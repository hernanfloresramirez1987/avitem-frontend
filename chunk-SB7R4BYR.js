import{a as F}from"./chunk-YWVDTYYJ.js";import{C as nt,E as L,L as _,N as H,Sa as $,U as l,V as S,X as v,Z as o,a as N,ea as E,ga as st,hc as at,k as Y,m as tt,o as p,q as f,qa as I,s as K,sa as it,w as O,wa as A,x as U,y as et}from"./chunk-NFVV6V22.js";var c=class{},rt=(()=>{class e extends c{getTranslation(t){return p({})}static \u0275fac=(()=>{let t;return function(s){return(t||(t=I(e)))(s||e)}})();static \u0275prov=l({token:e,factory:e.\u0275fac})}return e})(),C=class{},ot=(()=>{class e{handle(t){return t.key}static \u0275fac=function(n){return new(n||e)};static \u0275prov=l({token:e,factory:e.\u0275fac})}return e})();function V(e,a){if(e===a)return!0;if(e===null||a===null)return!1;if(e!==e&&a!==a)return!0;let t=typeof e,n=typeof a,s,i,r;if(t==n&&t=="object")if(Array.isArray(e)){if(!Array.isArray(a))return!1;if((s=e.length)==a.length){for(i=0;i<s;i++)if(!V(e[i],a[i]))return!1;return!0}}else{if(Array.isArray(a))return!1;r=Object.create(null);for(i in e){if(!V(e[i],a[i]))return!1;r[i]=!0}for(i in a)if(!(i in r)&&typeof a[i]<"u")return!1;return!0}return!1}function h(e){return typeof e<"u"&&e!==null}function D(e){return M(e)&&!W(e)&&e!==null}function M(e){return typeof e=="object"}function W(e){return Array.isArray(e)}function Z(e){return typeof e=="string"}function ft(e){return typeof e=="function"}function B(e,a){let t=Object.assign({},e);return M(e)?(M(e)&&M(a)&&Object.keys(a).forEach(n=>{D(a[n])?n in e?t[n]=B(e[n],a[n]):Object.assign(t,{[n]:a[n]}):Object.assign(t,{[n]:a[n]})}),t):B({},a)}function G(e,a){let t=a.split(".");a="";do a+=t.shift(),h(e)&&h(e[a])&&(D(e[a])||W(e[a])||!t.length)?(e=e[a],a=""):t.length?a+=".":e=void 0;while(t.length);return e}function dt(e,a,t){let n=a.split("."),s=e;for(let i=0;i<n.length;i++){let r=n[i];i===n.length-1?s[r]=t:((!s[r]||!D(s[r]))&&(s[r]={}),s=s[r])}}var d=class{},lt=(()=>{class e extends d{templateMatcher=/{{\s?([^{}\s]*)\s?}}/g;interpolate(t,n){if(Z(t))return this.interpolateString(t,n);if(ft(t))return this.interpolateFunction(t,n)}interpolateFunction(t,n){return t(n)}interpolateString(t,n){return n?t.replace(this.templateMatcher,(s,i)=>{let r=G(n,i);return h(r)?r:s}):t}static \u0275fac=(()=>{let t;return function(s){return(t||(t=I(e)))(s||e)}})();static \u0275prov=l({token:e,factory:e.\u0275fac})}return e})(),g=class{},ut=(()=>{class e extends g{compile(t,n){return t}compileTranslations(t,n){return t}static \u0275fac=(()=>{let t;return function(s){return(t||(t=I(e)))(s||e)}})();static \u0275prov=l({token:e,factory:e.\u0275fac})}return e})(),b=class{defaultLang;currentLang=this.defaultLang;translations={};langs=[];onTranslationChange=new A;onLangChange=new A;onDefaultLangChange=new A},q=new v("ISOLATE_TRANSLATE_SERVICE"),J=new v("USE_DEFAULT_LANG"),X=new v("DEFAULT_LANGUAGE"),k=new v("USE_EXTEND"),m=e=>f(e)?e:p(e),T=(()=>{class e{store;currentLoader;compiler;parser;missingTranslationHandler;useDefaultLang;extend;loadingTranslations;pending=!1;_translationRequests={};lastUseLanguage=null;get onTranslationChange(){return this.store.onTranslationChange}get onLangChange(){return this.store.onLangChange}get onDefaultLangChange(){return this.store.onDefaultLangChange}get defaultLang(){return this.store.defaultLang}set defaultLang(t){this.store.defaultLang=t}get currentLang(){return this.store.currentLang}set currentLang(t){this.store.currentLang=t}get langs(){return this.store.langs}set langs(t){this.store.langs=t}get translations(){return this.store.translations}set translations(t){this.store.translations=t}constructor(t,n,s,i,r,P=!0,u=!1,w=!1,j){this.store=t,this.currentLoader=n,this.compiler=s,this.parser=i,this.missingTranslationHandler=r,this.useDefaultLang=P,this.extend=w,u&&(this.store=new b),j&&this.setDefaultLang(j)}setDefaultLang(t){if(t===this.defaultLang)return;let n=this.retrieveTranslations(t);typeof n<"u"?(this.defaultLang==null&&(this.defaultLang=t),n.pipe(L(1)).subscribe(()=>{this.changeDefaultLang(t)})):this.changeDefaultLang(t)}getDefaultLang(){return this.defaultLang}use(t){if(this.lastUseLanguage=t,t===this.currentLang)return p(this.translations[t]);this.currentLang||(this.currentLang=t);let n=this.retrieveTranslations(t);return f(n)?(n.pipe(L(1)).subscribe(()=>{this.changeLang(t)}),n):(this.changeLang(t),p(this.translations[t]))}changeLang(t){t===this.lastUseLanguage&&(this.currentLang=t,this.onLangChange.emit({lang:t,translations:this.translations[t]}),this.defaultLang==null&&this.changeDefaultLang(t))}retrieveTranslations(t){if(typeof this.translations[t]>"u"||this.extend)return this._translationRequests[t]=this._translationRequests[t]||this.loadAndCompileTranslations(t),this._translationRequests[t]}getTranslation(t){return this.loadAndCompileTranslations(t)}loadAndCompileTranslations(t){this.pending=!0;let n=this.currentLoader.getTranslation(t).pipe(_(1),L(1));return this.loadingTranslations=n.pipe(K(s=>this.compiler.compileTranslations(s,t)),_(1),L(1)),this.loadingTranslations.subscribe({next:s=>{this.translations[t]=this.extend&&this.translations[t]?N(N({},s),this.translations[t]):s,this.updateLangs(),this.pending=!1},error:s=>{this.pending=!1}}),n}setTranslation(t,n,s=!1){let i=this.compiler.compileTranslations(n,t);(s||this.extend)&&this.translations[t]?this.translations[t]=B(this.translations[t],i):this.translations[t]=i,this.updateLangs(),this.onTranslationChange.emit({lang:t,translations:this.translations[t]})}getLangs(){return this.langs}addLangs(t){let n=t.filter(s=>!this.langs.includes(s));n.length>0&&(this.langs=[...this.langs,...n])}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResultForKey(t,n,s){let i;if(t&&(i=this.runInterpolation(G(t,n),s)),i===void 0&&this.defaultLang!=null&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(i=this.runInterpolation(G(this.translations[this.defaultLang],n),s)),i===void 0){let r={key:n,translateService:this};typeof s<"u"&&(r.interpolateParams=s),i=this.missingTranslationHandler.handle(r)}return i!==void 0?i:n}runInterpolation(t,n){if(W(t))return t.map(s=>this.runInterpolation(s,n));if(D(t)){let s={};for(let i in t){let r=this.runInterpolation(t[i],n);r!==void 0&&(s[i]=r)}return s}else return this.parser.interpolate(t,n)}getParsedResult(t,n,s){if(n instanceof Array){let i={},r=!1;for(let u of n)i[u]=this.getParsedResultForKey(t,u,s),r=r||f(i[u]);if(!r)return i;let P=n.map(u=>m(i[u]));return et(P).pipe(K(u=>{let w={};return u.forEach((j,ct)=>{w[n[ct]]=j}),w}))}return this.getParsedResultForKey(t,n,s)}get(t,n){if(!h(t)||!t.length)throw new Error('Parameter "key" is required and cannot be empty');return this.pending?this.loadingTranslations.pipe(nt(s=>m(this.getParsedResult(s,t,n)))):m(this.getParsedResult(this.translations[this.currentLang],t,n))}getStreamOnTranslationChange(t,n){if(!h(t)||!t.length)throw new Error('Parameter "key" is required and cannot be empty');return O(U(()=>this.get(t,n)),this.onTranslationChange.pipe(H(s=>{let i=this.getParsedResult(s.translations,t,n);return m(i)})))}stream(t,n){if(!h(t)||!t.length)throw new Error('Parameter "key" required');return O(U(()=>this.get(t,n)),this.onLangChange.pipe(H(s=>{let i=this.getParsedResult(s.translations,t,n);return m(i)})))}instant(t,n){if(!h(t)||t.length===0)throw new Error('Parameter "key" is required and cannot be empty');let s=this.getParsedResult(this.translations[this.currentLang],t,n);return f(s)?Array.isArray(t)?t.reduce((i,r)=>(i[r]=r,i),{}):t:s}set(t,n,s=this.currentLang){dt(this.translations[s],t,Z(n)?this.compiler.compile(n,s):this.compiler.compileTranslations(n,s)),this.updateLangs(),this.onTranslationChange.emit({lang:s,translations:this.translations[s]})}changeDefaultLang(t){this.defaultLang=t,this.onDefaultLangChange.emit({lang:t,translations:this.translations[t]})}reloadLang(t){return this.resetLang(t),this.loadAndCompileTranslations(t)}resetLang(t){delete this._translationRequests[t],delete this.translations[t]}getBrowserLang(){if(typeof window>"u"||!window.navigator)return;let t=this.getBrowserCultureLang();return t?t.split(/[-_]/)[0]:void 0}getBrowserCultureLang(){if(!(typeof window>"u"||typeof window.navigator>"u"))return window.navigator.languages?window.navigator.languages[0]:window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage}static \u0275fac=function(n){return new(n||e)(o(b),o(c),o(g),o(d),o(C),o(J),o(q),o(k),o(X))};static \u0275prov=l({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Et=(()=>{class e{translate;_ref;value="";lastKey=null;lastParams=[];onTranslationChange;onLangChange;onDefaultLangChange;constructor(t,n){this.translate=t,this._ref=n}updateValue(t,n,s){let i=r=>{this.value=r!==void 0?r:t,this.lastKey=t,this._ref.markForCheck()};if(s){let r=this.translate.getParsedResult(s,t,n);f(r)?r.subscribe(i):i(r)}this.translate.get(t,n).subscribe(i)}transform(t,...n){if(!t||!t.length)return t;if(V(t,this.lastKey)&&V(n,this.lastParams))return this.value;let s;if(h(n[0])&&n.length)if(Z(n[0])&&n[0].length){let i=n[0].replace(/(')?([a-zA-Z0-9_]+)(')?(\s)?:/g,'"$2":').replace(/:(\s)?(')(.*?)(')/g,':"$3"');try{s=JSON.parse(i)}catch(r){throw new SyntaxError(`Wrong parameter in TranslatePipe. Expected a valid Object, received: ${n[0]}`)}}else D(n[0])&&(s=n[0]);return this.lastKey=t,this.lastParams=n,this.updateValue(t,s),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(i=>{this.lastKey&&i.lang===this.translate.currentLang&&(this.lastKey=null,this.updateValue(t,s,i.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(i=>{this.lastKey&&(this.lastKey=null,this.updateValue(t,s,i.translations))})),this.onDefaultLangChange||(this.onDefaultLangChange=this.translate.onDefaultLangChange.subscribe(()=>{this.lastKey&&(this.lastKey=null,this.updateValue(t,s))})),this.value}_dispose(){typeof this.onTranslationChange<"u"&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),typeof this.onLangChange<"u"&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),typeof this.onDefaultLangChange<"u"&&(this.onDefaultLangChange.unsubscribe(),this.onDefaultLangChange=void 0)}ngOnDestroy(){this._dispose()}static \u0275fac=function(n){return new(n||e)($(T,16),$(at,16))};static \u0275pipe=st({name:"translate",type:e,pure:!1,standalone:!0});static \u0275prov=l({token:e,factory:e.\u0275fac})}return e})();var Q=(()=>{class e{static forRoot(t={}){return{ngModule:e,providers:[t.loader||{provide:c,useClass:rt},t.compiler||{provide:g,useClass:ut},t.parser||{provide:d,useClass:lt},t.missingTranslationHandler||{provide:C,useClass:ot},b,{provide:q,useValue:t.isolate},{provide:J,useValue:t.useDefaultLang},{provide:k,useValue:t.extend},{provide:X,useValue:t.defaultLanguage},T]}}static forChild(t={}){return{ngModule:e,providers:[t.loader||{provide:c,useClass:rt},t.compiler||{provide:g,useClass:ut},t.parser||{provide:d,useClass:lt},t.missingTranslationHandler||{provide:C,useClass:ot},{provide:q,useValue:t.isolate},{provide:J,useValue:t.useDefaultLang},{provide:k,useValue:t.extend},{provide:X,useValue:t.defaultLanguage},T]}}static \u0275fac=function(n){return new(n||e)};static \u0275mod=E({type:e});static \u0275inj=S({})}return e})();var y,R=class x{static{y=this}static{this.lan="es"}constructor(a){this.translate=a,this.changeLanguage$=new Y(y.lan),this.translate.setDefaultLang(y.lan)}changeLanguage(a){y.lan=a,this.translate.use(a),this.changeLanguage$.next(a)}static{this.\u0275fac=function(t){return new(t||x)(o(T))}}static{this.\u0275prov=l({token:x,factory:x.\u0275fac,providedIn:"root"})}};R=y=tt([it({providedIn:"root"})],R);var ht=(()=>{class e{http;prefix;suffix;constructor(t,n="/assets/i18n/",s=".json"){this.http=t,this.prefix=n,this.suffix=s}getTranslation(t){return this.http.get(`${this.prefix}${t}${this.suffix}`)}static \u0275fac=function(n){return new(n||e)(o(F),o(String),o(String))};static \u0275prov=l({token:e,factory:e.\u0275fac})}return e})();var Ut=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275mod=E({type:e})}static{this.\u0275inj=S({imports:[Q.forRoot({defaultLanguage:R.lan,loader:{provide:c,useFactory:t=>new ht(t,"./assets/i18n/",".json"),deps:[F]}}),Q]})}}return e})();export{c as a,T as b,Et as c,Q as d,R as e,ht as f,Ut as g};
