import{a as ve,b as be}from"./chunk-GV5YMGWN.js";import{a as _e}from"./chunk-UBRMCGMO.js";import{a as se}from"./chunk-3JZA5LBE.js";import{a as ge}from"./chunk-JNB2I2HX.js";import{a as me}from"./chunk-GKRCAYHA.js";import{j as le,k as de,l as pe,q as ce,r as ue,s as fe,t as M}from"./chunk-57TFHGI3.js";import"./chunk-5ETL6J2F.js";import{Ia as ie,Ja as oe,Oa as ne,Pa as ae,Z as $,ka as z,la as _,na as J,oa as K,qa as Q,sa as W,ta as X,va as Y,wa as Z,xa as ee,ya as te,za as re}from"./chunk-TBXDAASS.js";import{k as G,l as N,s as T,x as U,y as H}from"./chunk-SWNQVGCQ.js";import"./chunk-F2X3VGZZ.js";import{$a as c,Ca as t,Gb as l,Ha as m,Hb as b,Ib as C,Na as R,Nb as O,Ob as q,P as y,Ta as u,V as F,Xb as d,Yb as p,aa as j,ba as L,fb as v,kb as n,lb as r,mb as f,qb as A,ub as k,vb as E}from"./chunk-4PTIY3UM.js";var B=class e{#e=M.URL_API;http=F(T);getAllCategolias=()=>this.http.get(`${this.#e}categorias`);static \u0275fac=function(s){return new(s||e)};static \u0275prov=y({token:e,factory:e.\u0275fac,providedIn:"root"})};var D=class e{#e=M.URL_API;http=F(T);getAllColores=()=>this.http.get(`${this.#e}colores`);static \u0275fac=function(s){return new(s||e)};static \u0275prov=y({token:e,factory:e.\u0275fac,providedIn:"root"})};var xe=()=>["/labels/products"];function Se(e,i){e&1&&(n(0,"span",7),l(1,"Error en el Nombre."),r())}function Pe(e,i){e&1&&(n(0,"span",7),l(1,"Error en el Nombre."),r())}function Ie(e,i){e&1&&(n(0,"span",7),l(1),d(2,"translate"),r()),e&2&&(t(),C("Error en el ",p(2,1,"labels.fechaIngreso"),"."))}function ye(e,i){e&1&&(n(0,"span",7),l(1),d(2,"translate"),r()),e&2&&(t(),C("Error en el ",p(2,1,"labels.unidadMedida"),"."))}function Fe(e,i){e&1&&(n(0,"span",7),l(1),d(2,"translate"),r()),e&2&&(t(),C("Error en el ",p(2,1,"labels.id_color"),"."))}function Ee(e,i){e&1&&(n(0,"span",7),l(1),d(2,"translate"),r()),e&2&&(t(),C("Error en el ",p(2,1,"labels.codigoProducto"),"."))}function Ne(e,i){e&1&&(n(0,"span",7),l(1),d(2,"translate"),r()),e&2&&(t(),C("Error en el ",p(2,1,"labels.id_proveedor"),"."))}function Te(e,i){e&1&&(n(0,"span",7),l(1),d(2,"translate"),r()),e&2&&(t(),C("Error en el ",p(2,1,"labels.id_categoria"),"."))}function Me(e,i){if(e&1){let s=A();n(0,"div",25),f(1,"p-button",26),n(2,"p-button",27),k("click",function(){j(s);let g=E();return L(g.cleanAll())}),r(),n(3,"p-button",28),k("click",function(){j(s);let g=E();return L(g.saveProcto())}),r()()}if(e&2){let s=E();t(),c("routerLink",q(2,xe)),t(2),c("disabled",!s.registroForm.valid)}}var V=class e{constructor(i,s,o,g,h,w,x,S,P){this.categoriasServ=i;this.coloresServi=s;this.proveedoresServ=o;this.productosServ=g;this.translate=h;this.translateLanService=w;this.fb=x;this.router=S;this.datePipe=P;this.translateLanService.changeLanguage$.subscribe(a=>this.translate.use(a)),this.currentDate=this.datePipe.transform(new Date,"dd/MM/yyyy")||"",this.registroForm=this.fb.group({nombre:["",[_.required]],descripcion:[""],fechaIngreso:[this.currentDate,_.required],unidadMedida:["",_.required],codigoProducto:["",_.required],id_color:["",_.required],id_proveedor:["",_.required],id_categoria:["",_.required]}),this.productosServ.getUnidsMedida().subscribe(a=>this.unidades=a),this.proveedoresServ.postProveedoresSearch(this.proveedorDto).subscribe({next:a=>this.proveedores=a,error:a=>console.error("Error al obtener proveedores:",a)}),this.categoriasServ.getAllCategolias().subscribe({next:a=>this.categorias=a,error:a=>console.error("Error al obtener categorias:",a)}),this.coloresServi.getAllColores().subscribe({next:a=>{this.colores=a,console.log(this.colores)},error:a=>console.error("Error al obtener proveedores:",a)})}registroForm;categorias;colores;unidades;proveedores;proveedorDto;productoRegister;currentDate;getColorBackground(i){switch(i){case"Nat":return"gray";case"Cha":return"#FBE7C6";case"Neg":return"#000000";case"Mad":return"#8B4513";default:return"#FFFFFF"}}saveProcto(){console.log(this.asignarValores()),this.productosServ.postSaveProduct(this.asignarValores()).subscribe(i=>{i.CodigoEstado==="201"&&this.router.navigate(["inventory/products"])})}asignarValores(){let i=this.registroForm.value,o=new Date(i.fechaIngreso).toISOString().split("T")[0];return this.productoRegister={p_nombre:i.nombre,p_descripcion:i.descripcion,p_cantidadStock:0,p_fechaIngreso:o,p_unidadMedida:i.unidadMedida.medida,p_codigoProducto:i.codigoProducto,p_idProveedor:Number(i.id_proveedor.id),p_idCategoria:Number(i.id_color.id),p_idColor:Number(i.id_categoria.id),p_state:1}}cleanAll(){this.registroForm.patchValue({total:"",nombre:"",descripcion:"",fechaIngreso:new Date,unidadMedida:"",codigoProducto:"",id_color:"",id_proveedor:"",id_categoria:""},{emitEvent:!1})}static \u0275fac=function(s){return new(s||e)(m(B),m(D),m(ge),m(_e),m(ne),m(ce),m(Y),m(U),m(N))};static \u0275cmp=R({type:e,selectors:[["app-product-create"]],features:[O([N])],decls:56,vars:52,consts:[[3,"formGroup"],[3,"header"],[1,"align-items-left","justify-content-top","pr-2"],[1,"flex","flex-column","md:flex-row","flex-row"],[1,"flex","flex-wrap","justify-content-left","align-items-center","gap-2","pb-4","lg:w-8","md:w-6"],["for","nombre",1,"w-20rem"],["pInputText","","type","text",1,"w-full",3,"formControlName"],[2,"color","red"],[1,"flex","flex-wrap","justify-content-left","align-items-center","gap-2","pb-4","lg:w-full","px-2"],["for","description",1,"w-20rem"],[1,"flex","flex-wrap","justify-content-left","align-items-center","gap-2","pb-4","lg:w-4","md:w-5"],["for","fechaIngreso",1,"w-15rem"],["styleClass","w-full",1,"w-full","lg:w-full",3,"formControlName"],[1,"flex","flex-column","flex-row","md:flex-row"],[1,"flex","flex-wrap","justify-content-left","align-items-center","gap-2","pb-4","lg:w-full"],["for","unidadMedida",1,"w-15rem"],["optionLabel","medida","styleClass","w-full","placeholder","Seleccionar una Unidad",1,"w-full","lg:w-full",3,"options","formControlName"],["for","color",1,"w-15rem"],["optionLabel","color","styleClass","w-full","placeholder","Seleccionar un Color",1,"w-full","lg:w-full",3,"options","formControlName"],["for","codigoProducto",1,"w-15rem"],["for","proveedor",1,"w-15rem"],["optionLabel","empresa","styleClass","w-full","placeholder","Select un Proveedor",1,"w-full","lg:w-full",3,"formControlName","options","editable"],["for","LastName",1,"w-15rem"],["optionLabel","nombre","styleClass","w-full","placeholder","Select una Categoria",1,"w-full","lg:w-full",3,"formControlName","options","editable"],["pTemplate","footer"],[1,"flex","gap-3","mt-1"],["label","Cancel","severity","danger","styleClass","w-full",1,"w-full",3,"routerLink"],["label","Limpiar","severity","secondary","styleClass","w-full",1,"w-full",3,"click"],["label","Save","styleClass","w-full",1,"w-full",3,"click","disabled"]],template:function(s,o){if(s&1&&(n(0,"form",0)(1,"p-card",1),d(2,"translate"),d(3,"uppercase"),n(4,"div",2)(5,"div",3)(6,"div",4)(7,"label",5),l(8),d(9,"translate"),r(),f(10,"input",6),u(11,Se,2,0,"span",7),r(),n(12,"div",8)(13,"label",9),l(14),d(15,"translate"),r(),f(16,"input",6),u(17,Pe,2,0,"span",7),r(),n(18,"div",10)(19,"label",11),l(20),d(21,"translate"),r(),f(22,"p-datepicker",12),u(23,Ie,3,3,"span",7),r()(),n(24,"div",13)(25,"div",14)(26,"label",15),l(27),d(28,"translate"),r(),f(29,"p-dropdown",16),u(30,ye,3,3,"span",7),r(),n(31,"div",8)(32,"label",17),l(33),d(34,"translate"),r(),f(35,"p-dropdown",18),u(36,Fe,3,3,"span",7),r(),n(37,"div",8)(38,"label",19),l(39),d(40,"translate"),r(),f(41,"input",6),u(42,Ee,3,3,"span",7),r(),n(43,"div",8)(44,"label",20),l(45),d(46,"translate"),r(),f(47,"p-dropdown",21),u(48,Ne,3,3,"span",7),r(),n(49,"div",14)(50,"label",22),l(51),d(52,"translate"),r(),f(53,"p-dropdown",23),u(54,Te,3,3,"span",7),r()()(),u(55,Me,4,3,"ng-template",24),r()()),s&2){let g,h,w,x,S,P,a,I;c("formGroup",o.registroForm),t(),c("header",p(3,34,p(2,32,"pages.register_product"))),t(7),b(p(9,36,"labels.nombre")),t(2),c("formControlName","nombre"),t(),v((g=o.registroForm.get("nombre"))!=null&&g.invalid&&((g=o.registroForm.get("nombre"))!=null&&g.touched)?11:-1),t(3),b(p(15,38,"labels.description")),t(2),c("formControlName","descripcion"),t(),v((h=o.registroForm.get("description"))!=null&&h.invalid&&((h=o.registroForm.get("description"))!=null&&h.touched)?17:-1),t(3),b(p(21,40,"labels.fechaIngreso")),t(2),c("formControlName","fechaIngreso"),t(),v((w=o.registroForm.get("fechaIngreso"))!=null&&w.invalid&&((w=o.registroForm.get("fechaIngreso"))!=null&&w.touched)?23:-1),t(4),b(p(28,42,"labels.unidadMedida")),t(2),c("options",o.unidades)("formControlName","unidadMedida"),t(),v((x=o.registroForm.get("unidadMedida"))!=null&&x.invalid&&((x=o.registroForm.get("unidadMedida"))!=null&&x.touched)?30:-1),t(3),b(p(34,44,"labels.color")),t(2),c("options",o.colores)("formControlName","id_color"),t(),v((S=o.registroForm.get("id_color"))!=null&&S.invalid&&((S=o.registroForm.get("id_color"))!=null&&S.touched)?36:-1),t(3),b(p(40,46,"labels.codigoProducto")),t(2),c("formControlName","codigoProducto"),t(),v((P=o.registroForm.get("codigoProducto"))!=null&&P.invalid&&((P=o.registroForm.get("codigoProducto"))!=null&&P.touched)?42:-1),t(3),b(p(46,48,"labels.id_proveedor")),t(2),c("formControlName","id_proveedor")("options",o.proveedores)("editable",!0),t(),v((a=o.registroForm.get("id_proveedor"))!=null&&a.invalid&&((a=o.registroForm.get("id_proveedor"))!=null&&a.touched)?48:-1),t(3),b(p(52,50,"labels.id_categoria")),t(2),c("formControlName","id_categoria")("options",o.categorias)("editable",!0),t(),v((I=o.registroForm.get("id_categoria"))!=null&&I.invalid&&((I=o.registroForm.get("id_categoria"))!=null&&I.touched)?54:-1)}},dependencies:[fe,ue,$,ee,Q,z,J,K,W,X,re,te,be,ve,oe,ie,pe,de,le,me,ae,G,se,Z,H],styles:[".color-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:5px 10px;color:#fff;border-radius:4px}"]})};export{V as default};
