import{a as de}from"./chunk-CNUWKUH5.js";import{a as ne,b as oe,c as re,f as le,g as pe,h as ce}from"./chunk-DTEYWA75.js";import{b as Z,c as ee,d as te,e as ie,i as ae}from"./chunk-DIEVPZYL.js";import"./chunk-3BDIH3CX.js";import"./chunk-XOMGHBR6.js";import"./chunk-EQMBDBSY.js";import"./chunk-YNNLY5YU.js";import{s as se,t as me}from"./chunk-XV6XWGU3.js";import"./chunk-RPFCKF43.js";import"./chunk-VLOQAXLM.js";import{Na as X,Oa as Y,b as U,c as q,ca as W,d as J,e as G}from"./chunk-Z4B5FZRR.js";import{A as K,k as H,l as N}from"./chunk-PZZ6QWDK.js";import"./chunk-F2X3VGZZ.js";import{$ as x,Aa as n,Cb as E,Fa as f,Ia as w,Jb as R,Kb as A,Lb as L,Ma as k,Mb as m,Nb as g,Ob as C,Qb as j,Sa as y,_ as S,cb as p,cc as c,dc as d,ec as z,fc as $,ib as T,kb as I,lb as V,ma as h,mb as F,n as D,nb as s,ob as r,pb as _,rc as Q,sc as O,tb as M,yb as b,zb as o}from"./chunk-H3HIGMDG.js";import{a as B}from"./chunk-C6Q5SG76.js";var _e=["dt1"],ue=["menu"],fe=["filter"];function ge(t,i){if(t&1){let e=M();s(0,"div",8)(1,"p-button",9),c(2,"translate"),b("click",function(){S(e);let u=o(),v=L(4);return x(u.clear(v))}),r(),s(3,"p-button",10),b("click",function(){S(e);let u=o();return x(u.add())}),r()()}t&2&&(n(),p("label",d(2,3,"labels.clear"))("outlined",!0),n(2),p("outlined",!0))}function Ce(t,i){t&1&&(s(0,"th",13)(1,"div",15),m(2),c(3,"translate"),c(4,"uppercase"),_(5,"p-sortIcon",16),r()()),t&2&&(p("pSortableColumn","id"),n(2),g(d(4,5,d(3,3,"labels.id"))),n(3),p("field","id"))}function ve(t,i){if(t&1&&(s(0,"th",14)(1,"div",15),m(2),c(3,"translate"),c(4,"uppercase"),_(5,"p-sortIcon",16),r()()),t&2){let e=o().$implicit;E("pSortableColumn",e.field),n(2),g(d(4,5,d(3,3,"labels.fechaVenta"))),n(3),p("field",e.field)}}function Se(t,i){if(t&1&&(s(0,"th",14)(1,"div",15),m(2),c(3,"translate"),c(4,"uppercase"),_(5,"p-sortIcon",16),r()()),t&2){let e=o().$implicit;p("pSortableColumn",e.field),n(2),g(d(4,5,d(3,3,"labels.total"))),n(3),p("field",e.field)}}function xe(t,i){if(t&1&&(s(0,"th",14)(1,"div",15),m(2),c(3,"translate"),c(4,"uppercase"),_(5,"p-sortIcon",16),r()()),t&2){let e=o().$implicit;E("pSortableColumn",e.field),n(2),g(d(4,5,d(3,3,"labels.proveedor"))),n(3),p("field",e.field)}}function ye(t,i){if(t&1&&(s(0,"th",14)(1,"div",15),m(2),c(3,"translate"),c(4,"uppercase"),_(5,"p-sortIcon",16),r()()),t&2){let e=o().$implicit;E("pSortableColumn",e.field),n(2),g(d(4,5,d(3,3,"labels."+e.field))),n(3),p("field",e.field)}}function be(t,i){if(t&1&&y(0,Ce,6,7,"th",13)(1,ve,6,7,"th",14)(2,Se,6,7,"th",14)(3,xe,6,7,"th",14)(4,ye,6,7,"th",14),t&2){let e,a=i.$implicit;T((e=a.field)==="id"?0:e==="fechaventa"?1:e==="total"?2:e==="proveedor"?3:4)}}function he(t,i){if(t&1&&_(0,"appcommon-filter-input",17),t&2){let e=o().$implicit;p("field",e.field)}}function we(t,i){t&1&&(s(0,"th"),y(1,he,1,1,"appcommon-filter-input",17),r()),t&2&&(n(),T(1))}function Te(t,i){t&1&&(s(0,"th",12),m(1,"cargando"),r())}function Ie(t,i){if(t&1&&(s(0,"tr"),_(1,"th",11),V(2,be,5,1,null,null,I),r(),s(4,"tr"),V(5,we,2,1,"th",null,I,!1,Te,2,0,"th",12),r()),t&2){let e=i.$implicit;n(2),F(e),n(3),F(e)}}function Ve(t,i){if(t&1&&m(0),t&2){let e=o().$implicit,a=o().$implicit;C(" ",a[e.field]," ")}}function Fe(t,i){if(t&1&&(m(0),c(1,"date")),t&2){let e=o(2).$implicit;C(" ",z(1,1,e.fechaVenta,"dd/MM/yyyy")," ")}}function Me(t,i){if(t&1&&m(0),t&2){let e=o().$implicit,a=o().$implicit;C(" ",a[e.field]," ")}}function Ee(t,i){if(t&1&&m(0),t&2){let e=o(2).$implicit;j(" ",e.cliente.persona.nombre," ",e.cliente.persona.app," ",e.cliente.persona.apm," ")}}function Re(t,i){if(t&1&&m(0),t&2){let e=o(2).$implicit;C(" ",e.cliente.ci," ")}}function Be(t,i){if(t&1&&m(0),t&2){let e=o(2).$implicit;C(" ",e.cliente.nit," ")}}function Le(t,i){if(t&1&&(s(0,"td"),y(1,Ve,1,1)(2,Fe,2,4)(3,Me,1,1)(4,Ee,1,3)(5,Re,1,1)(6,Be,1,1),r()),t&2){let e,a=i.$implicit;n(),T((e=a.field)==="id"?1:e==="fechaVenta"?2:e==="total"?3:e==="cliente"?4:e==="ci"?5:6)}}function $e(t,i){if(t&1){let e=M();s(0,"tr")(1,"td",18)(2,"p-button",19),b("click",function(u){S(e),o();let v=L(1);return x(v.toggle(u))}),r()(),V(3,Le,7,1,"td",null,I),r()}if(t&2){let e=i.columns;n(2),p("icon","pi pi-ellipsis-v")("text",!0),n(),F(e)}}var P=class t{constructor(i,e,a,u,v){this.translateLanService=i;this.translate=e;this.filterservice=a;this.ventasServ=u;this.router=v;this.translateLanService.changeLanguage$.subscribe(l=>this.translate.use(l)),O(()=>{this.ventasServ.postAllVentasSearch(this.ventasdto()).pipe(D(l=>({data:Array.isArray(l.data)?[...l.data]:[],metadata:{page:l.metadata.page,rows:l.metadata.rows,total_records:l.metadata.total_records},loading:!1,error:null}))).subscribe({next:l=>{console.log(B({},this.ventasdto())),console.log(l),this.stateValues.set(l)},error:l=>{console.log(l),this.stateValues.set({data:[],metadata:{page:0,rows:0,total_records:0},loading:!0,error:l})}})})}table=w("dt1");menu=w("menu");filter=w("filter");stateValues=h({data:[],metadata:{page:0,rows:0,total_records:0},loading:!0,error:null});searchTxt=h([]);ventasdto=h({config:{populate_data:!0,page:1,rows:15,sort_field:[]},filter:{}});tablecon=ne.cantidadRegistros;stateIni=!1;selectedItemId=null;items=[{label:"View",icon:"pi pi-eye",routerLink:"/transactions/ventas/detail/214"},{label:"Download",icon:"pi pi-download",items:[{label:"Pdf",icon:"pi pi-file-pdf",style:{color:"crimson"},command:i=>{console.log(i)}}]}];title="pages.sales";expandedRows={};allowedColumns=["id","fechaVenta","total","cliente","ci","nit"];columns=this.allowedColumns;columnsSelectSignal=Q(()=>this.columns.map(i=>({field:i,header:i.charAt(0).toUpperCase()+i.slice(1)})));getDataPaged(i){i.filters&&this.stateIni!==!1&&this.ventasdto.update(()=>({config:{populate_data:!1,page:(i.first||0)/Number(i.rows)+1,sort_field:i.multiSortMeta?i.multiSortMeta.filter(e=>e.field):[],rows:Number(i.rows)},filter:B({},this.filterservice.applyFilterNew(i.filters,this.ventasdto().filter))})),this.stateIni=!0}clear=i=>{this.ventasdto.set({config:{populate_data:!1,page:1,rows:15,sort_field:[]},filter:{}}),i.clear()};add=()=>this.router.navigate(["/transactions/ventas/create"]);static \u0275fac=function(e){return new(e||t)(f(G),f(U),f(ce),f(de),f(K))};static \u0275cmp=k({type:t,selectors:[["app-sales"]],viewQuery:function(e,a){e&1&&(R(a.table,_e,5),R(a.menu,ue,5),R(a.filter,fe,5)),e&2&&A(3)},decls:11,vars:18,consts:[["menu",""],["dt1",""],["header",""],["body",""],[3,"model","popup"],[3,"header"],["datakey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} employees","styleClass","p-datatable-sm","responsiveLayout","scroll","scrollHeight","60vh",3,"onLazyLoad","value","paginator","loading","expandedRowKeys","rows","rowHover","rowsPerPageOptions","lazy","columns","reorderableColumns","totalRecords","sortMode","customSort","scrollable","paginatorPosition"],["pTemplate","caption"],[1,"flex","flex-wrap","justify-content-end","gap-2"],["icon","pi pi-filter-slash",3,"click","label","outlined"],["icon","pi pi-plus","severity","primary",1,"pr-1",3,"click","outlined"],["rowspan","2"],[2,"min-width","12rem"],["pReorderableColumn","",2,"min-width","1rem",3,"pSortableColumn"],["pReorderableColumn","",3,"pSortableColumn"],[1,"flex","justify-content-between","align-items-left"],[3,"field"],["type","text",3,"field"],[1,"flex","py-4"],["type","button",1,"p-button-text","p-button-rounded",3,"click","icon","text"]],template:function(e,a){if(e&1){let u=M();_(0,"p-tieredmenu",4,0),s(2,"p-card",5)(3,"p-table",6,1),b("onLazyLoad",function(l){return S(u),x(a.getDataPaged(l))}),m(5," > "),y(6,ge,4,5,"ng-template",7)(7,Ie,8,1,"ng-template",null,2,$)(9,$e,5,2,"ng-template",null,3,$),r()()}e&2&&(p("model",a.items)("popup",!0),n(2),p("header",a.title),n(),p("value",a.stateValues().data)("paginator",!0)("loading",a.stateValues().loading)("expandedRowKeys",a.expandedRows)("rows",a.stateValues().metadata.rows)("rowHover",!0)("rowsPerPageOptions",a.tablecon)("lazy",!0)("columns",a.columnsSelectSignal())("reorderableColumns",!0)("totalRecords",a.stateValues().metadata.total_records)("sortMode","multiple")("customSort",!0)("scrollable",!0)("paginatorPosition",a.stateValues().data&&a.stateValues().data.length>50?"both":"bottom"))},dependencies:[J,q,me,se,W,ae,Z,ee,ie,te,Y,X,pe,le,H,re,oe,N],encapsulation:2})};export{P as default};
