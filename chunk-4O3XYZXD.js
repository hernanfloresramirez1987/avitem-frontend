import{a as be}from"./chunk-EXT6ODLE.js";import{a as he}from"./chunk-NINX4UDH.js";import{a as fe,d as Ce,e as ge,f as xe,g as Se,h as ve}from"./chunk-N674FEQB.js";import"./chunk-JTXMDS4E.js";import"./chunk-2TFTJWQW.js";import"./chunk-GLG5OO3S.js";import{b as pe,c as ce,d as se,e as me,f as de,g as ue,i as _e}from"./chunk-NHAPQC3W.js";import"./chunk-KFFE56HM.js";import"./chunk-G255QGHI.js";import"./chunk-NUGAOAR2.js";import{b as W,c as X,d as Y,e as Z}from"./chunk-6HYSLB2P.js";import{i as ae,j as le}from"./chunk-LC6JGRRQ.js";import"./chunk-2WKEWB2B.js";import{D as ne,E as oe,F as re,j as ee,l as te,s as ie}from"./chunk-3T4WVZA5.js";import"./chunk-F2X3VGZZ.js";import{d as G,j as K}from"./chunk-THLIJB7Y.js";import"./chunk-AAQOC4TC.js";import{j as J,r as U,u as q}from"./chunk-F7YKD2CL.js";import{$ as v,Aa as o,Cb as x,Fa as g,Ia as I,Jb as M,Kb as z,Lb as H,Ma as N,Mb as s,N as D,Nb as d,Sa as b,T as j,_ as S,cb as m,cc as p,db as O,dc as c,fc as h,ib as F,kb as T,lb as E,ma as w,mb as B,n as A,nb as l,ob as a,pb as u,sc as R,tb as $,tc as Q,yb as y,zb as r}from"./chunk-J6TCZN46.js";import{a as V}from"./chunk-C6Q5SG76.js";var k=class t{#e="http://127.0.0.1:8080/api/templates/";http=j(G);postComponentsRedirecctions=i=>this.http.post(`${this.#e}postComponentsRedirecctions`,i);postComponents=i=>this.http.post(`${this.#e}getcomponents`,i);static \u0275fac=function(e){return new(e||t)};static \u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"})};var we=["dt1"],Ie=["menu"],Fe=["filter"];function Te(t,i){if(t&1){let e=$();l(0,"div",9)(1,"p-button",10),p(2,"translate"),y("click",function(){S(e);let _=r(),C=H(5);return v(_.clear(C))}),a(),l(3,"p-button",11),y("click",function(){S(e);let _=r();return v(_.add())}),a()()}t&2&&(o(),m("label",c(2,3,"labels.clear"))("outlined",!0),o(2),m("outlined",!0))}function Ee(t,i){t&1&&(l(0,"th",16)(1,"div",23),s(2),p(3,"translate"),p(4,"uppercase"),u(5,"p-sortIcon",24),a()()),t&2&&(m("pSortableColumn","id"),o(2),d(c(4,5,c(3,3,"labels.id"))),o(3),m("field","id"))}function Be(t,i){if(t&1&&(l(0,"th",17)(1,"div",23),s(2),p(3,"translate"),p(4,"uppercase"),u(5,"p-sortIcon",24),a()()),t&2){let e=r().$implicit;x("pSortableColumn",e.field),o(2),d(c(4,5,c(3,3,"labels.nombre"))),o(3),m("field",e.field)}}function $e(t,i){if(t&1&&(l(0,"th",18)(1,"div",23),s(2),p(3,"translate"),p(4,"uppercase"),u(5,"p-sortIcon",24),a()()),t&2){let e=r().$implicit;m("pSortableColumn",e.field),o(2),d(c(4,5,c(3,3,"labels.description"))),o(3),m("field",e.field)}}function Me(t,i){if(t&1&&(l(0,"th",19)(1,"div",23),s(2),p(3,"translate"),p(4,"uppercase"),u(5,"p-sortIcon",24),a()()),t&2){let e=r().$implicit;x("pSortableColumn",e.field),o(2),d(c(4,5,c(3,3,"labels.cantidadStock"))),o(3),m("field",e.field)}}function Re(t,i){if(t&1&&(l(0,"th",20)(1,"div",23),s(2),p(3,"translate"),p(4,"uppercase"),u(5,"p-sortIcon",24),a()()),t&2){let e=r().$implicit;x("pSortableColumn",e.field),o(2),d(c(4,5,c(3,3,"labels.fechaIngreso"))),o(3),m("field",e.field)}}function ke(t,i){t&1&&(l(0,"th",21),s(1),p(2,"translate"),p(3,"uppercase"),a()),t&2&&(o(),d(c(3,3,c(2,1,"labels.unidadMedida"))))}function Ve(t,i){if(t&1&&(l(0,"th",22)(1,"div",23),s(2),p(3,"translate"),p(4,"uppercase"),u(5,"p-sortIcon",24),a()()),t&2){let e=r().$implicit;x("pSortableColumn",e.field),o(2),d(c(4,5,c(3,3,"labels.codigoProducto"))),o(3),m("field",e.field)}}function Le(t,i){if(t&1&&(l(0,"th",20)(1,"div",23),s(2),p(3,"translate"),p(4,"uppercase"),u(5,"p-sortIcon",24),a()()),t&2){let e=r().$implicit;x("pSortableColumn",e.field),o(2),d(c(4,5,c(3,3,"labels.state"))),o(3),m("field",e.field)}}function Ae(t,i){if(t&1&&(l(0,"th",17)(1,"div",23),s(2),p(3,"translate"),p(4,"uppercase"),u(5,"p-sortIcon",24),a()()),t&2){let e=r().$implicit;x("pSortableColumn",e.field),o(2),d(c(4,5,c(3,3,"labels.empresa"))),o(3),m("field",e.field)}}function De(t,i){t&1&&(l(0,"th",21),s(1),p(2,"translate"),p(3,"uppercase"),a()),t&2&&(o(),d(c(3,3,c(2,1,"labels.categoria"))))}function je(t,i){if(t&1&&(l(0,"th",16)(1,"div",23),s(2),p(3,"translate"),p(4,"uppercase"),u(5,"p-sortIcon",24),a()()),t&2){let e=r().$implicit;x("pSortableColumn",e.field),o(2),d(c(4,5,c(3,3,"labels."+e.field))),o(3),m("field",e.field)}}function Ne(t,i){if(t&1&&b(0,Ee,6,7,"th",16)(1,Be,6,7,"th",17)(2,$e,6,7,"th",18)(3,Me,6,7,"th",19)(4,Re,6,7,"th",20)(5,ke,4,5,"th",21)(6,Ve,6,7,"th",22)(7,Le,6,7,"th",20)(8,Ae,6,7,"th",17)(9,De,4,5,"th",21)(10,je,6,7,"th",16),t&2){let e,n=i.$implicit;F((e=n.field)==="id"?0:e==="nombre"?1:e==="descripcion"?2:e==="cantidadStock"?3:e==="fechaIngreso"?4:e==="unidadMedida"?5:e==="codigoProducto"?6:e==="state"?7:e==="empresa"?8:e==="categoria"?9:10)}}function Oe(t,i){if(t&1&&u(0,"appcommon-filter-input",25),t&2){let e=r().$implicit;m("field",e.field)}}function ze(t,i){if(t&1&&u(0,"appcommon-filter-input",25),t&2){let e=r().$implicit;m("field",e.field)}}function He(t,i){if(t&1&&u(0,"appcommon-filter-input",26),t&2){let e=r().$implicit;m("field",e.field)}}function Qe(t,i){if(t&1&&(l(0,"th"),b(1,Oe,1,1,"appcommon-filter-input",25)(2,ze,1,1,"appcommon-filter-input",25)(3,He,1,1,"appcommon-filter-input",26),a()),t&2){let e,n=i.$implicit;o(),F((e=n.field)==="id"?1:e==="cantidadStock"?2:3)}}function Je(t,i){t&1&&(l(0,"th",15),s(1,"cargando"),a())}function Ue(t,i){if(t&1&&(l(0,"tr")(1,"th",12),u(2,"button",13)(3,"p-tableHeaderCheckbox",14),a(),E(4,Ne,11,1,null,null,T),a(),l(6,"tr"),E(7,Qe,4,1,"th",null,T,!1,Je,2,0,"th",15),a()),t&2){let e=i.$implicit;o(4),B(e),o(3),B(e)}}function qe(t,i){if(t&1&&(l(0,"td"),s(1),a()),t&2){let e=r().$implicit,n=r().$implicit;o(),d(n[e.field])}}function Ge(t,i){if(t&1&&(l(0,"td"),s(1),a()),t&2){let e=r().$implicit,n=r().$implicit;O("background-color",n.code),o(),d(n[e.field])}}function Ke(t,i){if(t&1&&(l(0,"td"),s(1),a()),t&2){let e=r().$implicit,n=r().$implicit;o(),d(n[e.field])}}function We(t,i){if(t&1&&(l(0,"td"),s(1),a()),t&2){let e=r().$implicit,n=r().$implicit;o(),d(n[e.field])}}function Xe(t,i){if(t&1&&(l(0,"td"),s(1),a()),t&2){let e=r().$implicit,n=r().$implicit;o(),d(n[e.field])}}function Ye(t,i){if(t&1&&(l(0,"td"),s(1),a()),t&2){let e=r().$implicit,n=r().$implicit;o(),d(n[e.field])}}function Ze(t,i){if(t&1&&(l(0,"td"),s(1),a()),t&2){let e=r().$implicit,n=r().$implicit;o(),d(n[e.field])}}function et(t,i){if(t&1&&(l(0,"td"),s(1),a()),t&2){let e=r().$implicit,n=r().$implicit;o(),d(n[e.field])}}function tt(t,i){if(t&1&&(l(0,"td"),s(1),a()),t&2){let e=r().$implicit,n=r().$implicit;o(),d(n[e.field])}}function it(t,i){if(t&1&&b(0,qe,2,1,"td")(1,Ge,2,3,"td",31)(2,Ke,2,1,"td")(3,We,2,1,"td")(4,Xe,2,1,"td")(5,Ye,2,1,"td")(6,Ze,2,1,"td")(7,et,2,1,"td")(8,tt,2,1,"td"),t&2){let e,n=i.$implicit;F((e=n.field)==="id"?0:e==="nombre"?1:e==="descripcion"?2:e==="codigoProducto"?3:e==="cantidadStock"?4:e==="state"?5:e==="empresa"?6:e==="categoria"?7:8)}}function nt(t,i){if(t&1&&(l(0,"tr",27)(1,"td",28),u(2,"button",29)(3,"p-tableCheckbox",30),a(),E(4,it,9,1,null,null,T),a()),t&2){let e=i.$implicit,n=i.columns,_=r();m("ngClass",_.rowClass(e)),o(3),m("value",e),o(),B(n)}}function ot(t,i){if(t&1){let e=$();l(0,"div",32)(1,"p-multiSelect",33),y("onChange",function(_){S(e);let C=r();return v(C.cargaColumnas(_))})("onSelectAllChange",function(_){S(e);let C=r();return v(C.selectAll(_))}),a()()}if(t&2){let e=r();o(),m("options",e.colsOptionsSelect)("ngModel",e.columnsSelectSignal())}}function rt(t,i){t&1&&(l(0,"tr")(1,"td",34),s(2,"No order found."),a()())}function at(t,i){t&1&&(l(0,"tr")(1,"td",34),s(2,"Loading orders data. Please wait."),a()())}var L=class t{constructor(i,e,n,_,C,P,lt){this.productsServ=i;this.filterservice=e;this.translate=n;this.translateLanService=_;this.externapiServ=C;this.router=P;this.arrayurilservice=lt;this.translateLanService.changeLanguage$.subscribe(f=>this.translate.use(f)),Q(()=>{this.productsServ.postProductsGet().pipe(A(f=>(console.log("console.log('', t):   ",f),{data:Array.isArray(f)?[...f]:[],page:0,rows:0,total_records:0,loaded:!0,loading:!1,error:null}))).subscribe({next:f=>{console.log(V({},this.productsdto())),console.log(f),this.stateValues.set({data:f.data&&f.data.length>0?[...f.data]:[],page:0,rows:0,total_records:0,loaded:!0,loading:!1,error:null})},error:f=>this.stateValues.set({data:[],page:0,rows:0,total_records:0,loaded:!1,loading:!0,error:f})})})}table=I("dt1");menu=I("menu");filter=I("filter");stateValues=w({data:[],page:0,rows:0,total_records:0,loaded:!1,loading:!0,error:null});searchTxt=w([]);productsdto=w({config:{populate_data:!0,page:1,rows:15,sort_field:[]},filter:{}});tablecon=fe.cantidadRegistros;stateIni=!1;title="pages.products";subtitle="labels.admin_products";allowedColumns=["id","nombre","codigoProducto","empresa","cantidadStock","fechaIngreso","unidadMedida","state","categoria"];columns=this.allowedColumns;columnsSelectSignal=R(()=>this.columns.map(i=>({field:i,header:i.charAt(0).toUpperCase()+i.slice(1)})));colsOptionsSelect=this.allowedColumns.map(i=>({field:i,header:i.charAt(0).toUpperCase()+i.slice(1)}));keylocalColumn="products_cols";clear=i=>{this.productsdto.set({config:{populate_data:!1,page:1,rows:15,sort_field:[]},filter:{}}),i.clear()};onColumnReorder=i=>localStorage.setItem(this.keylocalColumn,JSON.stringify(i.columns));getDataPaged(i){i.filters&&this.stateIni!==!1&&this.productsdto.update(()=>({config:{populate_data:!1,page:(i.first||0)/Number(i.rows)+1,sort_field:i.multiSortMeta?i.multiSortMeta.filter(e=>e.field):[],rows:Number(i.rows)},filter:V({},this.filterservice.applyFilterNew(i.filters,this.productsdto().filter))})),this.stateIni=!0}getColorBackground(i){switch(i){case"Natural":return"#cccccc";case"Champan":return"#FBE7C6";case"Negro":return"#000000";case"Madera":return"#8B4513";default:return"#FFFFFF"}}getColor(i){switch(i){case"Natural":return"#000000";case"Champan":return"#000000";case"Negro":return"#FFFFFF";case"Madera":return"#FFFFFF";default:return"#FFFFFF"}}add=()=>{this.router.navigate(["/inventory/products/create"])};rowClass(i){return{"!bg-red-50 !text-red-800":i.cantidadStock<=5}}cargaColumnas(i){let e=this.arrayurilservice.selectOrderedArray(this.colsOptionsSelect,i.value);this.columnsSelectSignal=R(()=>e),localStorage.setItem(this.keylocalColumn,JSON.stringify(this.columnsSelectSignal()))}selectAll(i){let e=[];i.checked&&(e=this.allowedColumns),this.columnsSelectSignal=R(()=>e),localStorage.setItem(this.keylocalColumn,JSON.stringify(e))}static \u0275fac=function(e){return new(e||t)(g(be),g(ve),g(W),g(Z),g(k),g(K),g(he))};static \u0275cmp=N({type:t,selectors:[["app-products"]],viewQuery:function(e,n){e&1&&(M(n.table,we,5),M(n.menu,Ie,5),M(n.filter,Fe,5)),e&2&&z(3)},decls:18,vars:22,consts:[["dt1",""],["caption",""],["header",""],["body",""],["paginatorleft",""],["emptymessage",""],["loadingbody",""],[3,"header","subheader"],["dataKey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} items","styleClass","p-datatable-sm","stripedRows","","responsiveLayout","scroll","scrollHeight","53vh",3,"onColReorder","onLazyLoad","value","paginator","loading","rows","rowHover","rowsPerPageOptions","lazy","columns","reorderableColumns","totalRecords","sortMode","customSort","scrollable","paginatorPosition"],[1,"flex","flex-wrap","justify-content-end"],["icon","pi pi-filter-slash",3,"click","label","outlined"],["icon","pi pi-plus","severity","primary",1,"pr-1",3,"click","outlined"],["rowspan","2"],["pButton","","pRipple","","type","button","icon","pi pi-ellipsis-v",1,"p-button-rounded","p-button-text","pt-2"],[1,"pb-0","px-2"],[2,"min-width","12rem"],["pReorderableColumn","",3,"pSortableColumn"],["pReorderableColumn","",2,"min-width","20rem",3,"pSortableColumn"],["pReorderableColumn","",2,"min-width","25rem",3,"pSortableColumn"],["pReorderableColumn","",2,"min-width","10rem",3,"pSortableColumn"],["pReorderableColumn","",2,"min-width","15rem",3,"pSortableColumn"],["pReorderableColumn","",2,"min-width","15rem"],["pReorderableColumn","",2,"min-width","2rem",3,"pSortableColumn"],[1,"flex","justify-content-between","align-items-left"],[3,"field"],["type","number",3,"field"],["type","text",1,"w-full",3,"field"],[3,"ngClass"],[1,"flex","py-4"],["pButton","","pRipple","","type","button","icon","pi pi-ellipsis-v",1,"p-button-rounded","p-button-text","pt-5"],[1,"p-2",3,"value"],[3,"backgroundColor"],[1,"flex","align-items-center","justify-content-center"],["inputId","float-label","optionLabel","header","selectedItemsLabel","{0} columns selected","size","small","placeholder","Choose Columns",1,"p-input-icon-left",3,"onChange","onSelectAllChange","options","ngModel"],["colspan","8"]],template:function(e,n){if(e&1){let _=$();l(0,"p-card",7),p(1,"translate"),p(2,"uppercase"),p(3,"translate"),l(4,"p-table",8,0),y("onColReorder",function(P){return S(_),v(n.onColumnReorder(P))})("onLazyLoad",function(P){return S(_),v(n.getDataPaged(P))}),b(6,Te,4,5,"ng-template",null,1,h)(8,Ue,10,1,"ng-template",null,2,h)(10,nt,6,2,"ng-template",null,3,h)(12,ot,2,2,"ng-template",null,4,h)(14,rt,3,0,"ng-template",null,5,h)(16,at,3,0,"ng-template",null,6,h),a()()}e&2&&(m("header",c(2,18,c(1,16,n.title)))("subheader",c(3,20,n.subtitle)),o(4),m("value",n.stateValues().data)("paginator",!0)("loading",n.stateValues().loading)("rows",n.stateValues().data.length)("rowHover",!0)("rowsPerPageOptions",n.tablecon)("lazy",!0)("columns",n.columnsSelectSignal())("reorderableColumns",!0)("totalRecords",n.stateValues().total_records)("sortMode","multiple")("customSort",!0)("scrollable",!0)("paginatorPosition",n.stateValues().data&&n.stateValues().data.length>50?"both":"bottom"))},dependencies:[Y,X,le,ae,U,_e,pe,ce,me,se,de,ue,re,ne,oe,Se,xe,q,J,ge,Ce,ie,ee,te],encapsulation:2})};export{L as default};
