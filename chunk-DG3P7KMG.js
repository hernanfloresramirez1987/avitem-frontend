import{a as be}from"./chunk-35AN4DBJ.js";import{a as fe}from"./chunk-YMK2TEKA.js";import{a as _e}from"./chunk-KKCKPGXG.js";import{j as pe,k as se,l as ce,q as me,r as ue,s as ve,t as ge,u as N}from"./chunk-XRQKEXJE.js";import{a as K}from"./chunk-ON7IMD56.js";import{Aa as re,Ba as ie,Ca as oe,Da as ne,Ea as ae,Na as le,Oa as de,b as $,c as z,ca as Q,e as J,pa as W,qa as b,sa as X,ta as Y,va as Z,xa as ee,ya as te}from"./chunk-6KC5HOCA.js";import{k as G,l as T,s as M,x as U,y as H}from"./chunk-QL2AGUDK.js";import"./chunk-F2X3VGZZ.js";import{$ as k,Aa as t,Fa as m,Lb as p,Ma as R,Mb as v,N as y,Nb as C,Sa as u,Sb as O,T as E,Tb as q,_ as L,ac as l,bc as d,cb as c,ib as _,nb as n,ob as r,pb as f,tb as A,xb as j,yb as F}from"./chunk-5DVEH5ZE.js";import"./chunk-C6Q5SG76.js";var B=class e{#e=N.URL_API;http=E(M);getAllCategolias=()=>this.http.get(`${this.#e}categorias`);static \u0275fac=function(s){return new(s||e)};static \u0275prov=y({token:e,factory:e.\u0275fac,providedIn:"root"})};var D=class e{#e=N.URL_API;http=E(M);getAllColores=()=>this.http.get(`${this.#e}colores`);static \u0275fac=function(s){return new(s||e)};static \u0275prov=y({token:e,factory:e.\u0275fac,providedIn:"root"})};var Pe=()=>["/labels/products"];function xe(e,i){e&1&&(n(0,"small",9),p(1,"Error en el Nombre."),r())}function we(e,i){e&1&&(n(0,"small",9),p(1,"Error en el Descripcion."),r())}function Ie(e,i){e&1&&(n(0,"span",9),p(1),l(2,"translate"),r()),e&2&&(t(),C("Error en el ",d(2,1,"labels.fechaIngreso"),"."))}function ye(e,i){e&1&&(n(0,"span",9),p(1),l(2,"translate"),r()),e&2&&(t(),C("Error en el ",d(2,1,"labels.unidadMedida"),"."))}function Ee(e,i){e&1&&(n(0,"span",9),p(1),l(2,"translate"),r()),e&2&&(t(),C("Error en el ",d(2,1,"labels.id_color"),"."))}function Fe(e,i){e&1&&(n(0,"span",9),p(1),l(2,"translate"),r()),e&2&&(t(),C("Error en el ",d(2,1,"labels.codigoProducto"),"."))}function Te(e,i){e&1&&(n(0,"span",9),p(1),l(2,"translate"),r()),e&2&&(t(),C("Error en el ",d(2,1,"labels.id_proveedor"),"."))}function Me(e,i){e&1&&(n(0,"span",9),p(1),l(2,"translate"),r()),e&2&&(t(),C("Error en el ",d(2,1,"labels.id_categoria"),"."))}function Ne(e,i){if(e&1){let s=A();n(0,"div",24),f(1,"p-button",25),n(2,"p-button",26),j("click",function(){L(s);let g=F();return k(g.cleanAll())}),r(),n(3,"p-button",27),j("click",function(){L(s);let g=F();return k(g.saveProcto())}),r()()}if(e&2){let s=F();t(),c("routerLink",q(2,Pe)),t(2),c("disabled",!s.registroForm.valid)}}var V=class e{constructor(i,s,o,g,h,S,P,x,w){this.categoriasServ=i;this.coloresServi=s;this.proveedoresServ=o;this.productosServ=g;this.translate=h;this.translateLanService=S;this.fb=P;this.router=x;this.datePipe=w;this.translateLanService.changeLanguage$.subscribe(a=>this.translate.use(a)),this.currentDate=this.datePipe.transform(new Date,"dd/MM/yyyy")||"",this.registroForm=this.fb.group({nombre:["",[b.required]],descripcion:[""],fechaIngreso:[this.currentDate,b.required],unidadMedida:["",b.required],codigoProducto:["",b.required],id_color:["",b.required],id_proveedor:["",b.required],id_categoria:["",b.required]}),this.productosServ.getUnidsMedida().subscribe(a=>this.unidades=a),this.proveedoresServ.postProveedoresSearch(this.proveedorDto).subscribe({next:a=>this.proveedores=a,error:a=>console.error("Error al obtener proveedores:",a)}),this.categoriasServ.getAllCategolias().subscribe({next:a=>this.categorias=a,error:a=>console.error("Error al obtener categorias:",a)}),this.coloresServi.getAllColores().subscribe({next:a=>{this.colores=a,console.log(this.colores)},error:a=>console.error("Error al obtener proveedores:",a)})}registroForm;categorias;colores;unidades;proveedores;proveedorDto;productoRegister;currentDate;getColorBackground(i){switch(i){case"Nat":return"gray";case"Cha":return"#FBE7C6";case"Neg":return"#000000";case"Mad":return"#8B4513";default:return"#FFFFFF"}}saveProcto(){console.log(this.asignarValores()),this.productosServ.postSaveProduct(this.asignarValores()).subscribe(i=>{i.CodigoEstado==="201"&&this.router.navigate(["inventory/products"])})}asignarValores(){let i=this.registroForm.value,o=new Date(i.fechaIngreso).toISOString().split("T")[0];return this.productoRegister={p_nombre:i.nombre,p_descripcion:i.descripcion,p_cantidadStock:0,p_fechaIngreso:o,p_unidadMedida:i.unidadMedida.medida,p_codigoProducto:i.codigoProducto,p_idProveedor:Number(i.id_proveedor.id),p_idCategoria:Number(i.id_color.id),p_idColor:Number(i.id_categoria.id),p_state:1}}cleanAll(){this.registroForm.patchValue({total:"",nombre:"",descripcion:"",fechaIngreso:new Date,unidadMedida:"",codigoProducto:"",id_color:"",id_proveedor:"",id_categoria:""},{emitEvent:!1})}static \u0275fac=function(s){return new(s||e)(m(B),m(D),m(_e),m(be),m($),m(J),m(re),m(U),m(T))};static \u0275cmp=R({type:e,selectors:[["app-product-create"]],features:[O([T])],decls:69,vars:62,consts:[[3,"formGroup"],[3,"header","subheader"],[1,"flex","md:flex-row","sm:flex-row"],[1,"col-12","md:col-12","p-2","w-full"],[1,"row-auto"],[1,"flex","md:flex-row","flex-row","w-full","p-2"],[1,"flex","flex-wrap","justify-content-left","align-items-center","gap-2","p-2","lg:w-full","md:w-full","w-full"],["for","nombre"],["pInputText","","type","text",1,"w-full",3,"formControlName","fluid"],[2,"color","red"],["for","nit"],["for","fechaIngreso",1,"w-15rem"],["styleClass","w-full",1,"w-full","lg:w-full",3,"formControlName"],["for","unidadMedida",1,"w-15rem"],["optionLabel","medida","styleClass","w-full","placeholder","Seleccionar una Unidad",1,"w-full","lg:w-full",3,"options","formControlName"],["for","color",1,"w-15rem"],["optionLabel","color","styleClass","w-full","placeholder","Seleccionar un Color",1,"w-full","lg:w-full",3,"options","formControlName"],["for","codigoProducto",1,"w-15rem"],["pInputText","","type","text",1,"w-full",3,"formControlName"],["for","proveedor",1,"w-15rem"],["optionLabel","empresa","styleClass","w-full","placeholder","Select un Proveedor",1,"w-full","lg:w-full",3,"formControlName","options","editable"],["for","LastName",1,"w-15rem"],["optionLabel","nombre","styleClass","w-full","placeholder","Select una Categoria",1,"w-full","lg:w-full",3,"formControlName","options","editable"],["pTemplate","footer"],[1,"flex","gap-3","mt-1"],["label","Cancel","severity","danger","styleClass","w-full",1,"w-full",3,"routerLink"],["label","Limpiar","severity","secondary","styleClass","w-full",1,"w-full",3,"click"],["label","Save","styleClass","w-full",1,"w-full",3,"click","disabled"]],template:function(s,o){if(s&1&&(n(0,"form",0)(1,"p-card",1),l(2,"translate"),l(3,"uppercase"),l(4,"translate"),n(5,"div",2)(6,"div",3)(7,"h6"),p(8),l(9,"translate"),l(10,"uppercase"),r(),n(11,"div",4)(12,"div",5)(13,"div",6)(14,"label",7),p(15),l(16,"translate"),r(),f(17,"input",8),u(18,xe,2,0,"small",9),r(),n(19,"div",6)(20,"label",10),p(21),l(22,"translate"),r(),f(23,"input",8),u(24,we,2,0,"small",9),r()(),n(25,"div",5)(26,"div",6)(27,"label",11),p(28),l(29,"translate"),r(),f(30,"p-datepicker",12),u(31,Ie,3,3,"span",9),r(),n(32,"div",6)(33,"label",13),p(34),l(35,"translate"),r(),f(36,"p-select",14),u(37,ye,3,3,"span",9),r()()()(),n(38,"div",3)(39,"h6"),p(40,"\xA0"),r(),n(41,"div",4)(42,"div",5)(43,"div",6)(44,"label",15),p(45),l(46,"translate"),r(),f(47,"p-select",16),u(48,Ee,3,3,"span",9),r(),n(49,"div",6)(50,"label",17),p(51),l(52,"translate"),r(),f(53,"input",18),u(54,Fe,3,3,"span",9),r()(),n(55,"div",5)(56,"div",6)(57,"label",19),p(58),l(59,"translate"),r(),f(60,"p-select",20),u(61,Te,3,3,"span",9),r(),n(62,"div",6)(63,"label",21),p(64),l(65,"translate"),r(),f(66,"p-select",22),u(67,Me,3,3,"span",9),r()()()()(),u(68,Ne,4,3,"ng-template",23),r()()),s&2){let g,h,S,P,x,w,a,I;c("formGroup",o.registroForm),t(),c("header",d(3,38,d(2,36,"pages.register_product")))("subheader",d(4,40,"labels.form_products")),t(7),v(d(10,44,d(9,42,"labels.detail_product"))),t(7),v(d(16,46,"labels.nombre")),t(2),c("formControlName","nombre")("fluid",!0),t(),_((g=o.registroForm.get("nombre"))!=null&&g.invalid&&((g=o.registroForm.get("nombre"))!=null&&g.touched)?18:-1),t(3),v(d(22,48,"labels.descripcion")),t(2),c("formControlName","descripcion")("fluid",!0),t(),_((h=o.registroForm.get("descripcion"))!=null&&h.invalid&&((h=o.registroForm.get("descripcion"))!=null&&h.touched)?24:-1),t(4),v(d(29,50,"labels.fechaIngreso")),t(2),c("formControlName","fechaIngreso"),t(),_((S=o.registroForm.get("fechaIngreso"))!=null&&S.invalid&&((S=o.registroForm.get("fechaIngreso"))!=null&&S.touched)?31:-1),t(3),v(d(35,52,"labels.unidadMedida")),t(2),c("options",o.unidades)("formControlName","unidadMedida"),t(),_((P=o.registroForm.get("unidadMedida"))!=null&&P.invalid&&((P=o.registroForm.get("unidadMedida"))!=null&&P.touched)?37:-1),t(8),v(d(46,54,"labels.color")),t(2),c("options",o.colores)("formControlName","id_color"),t(),_((x=o.registroForm.get("id_color"))!=null&&x.invalid&&((x=o.registroForm.get("id_color"))!=null&&x.touched)?48:-1),t(3),v(d(52,56,"labels.codigoProducto")),t(2),c("formControlName","codigoProducto"),t(),_((w=o.registroForm.get("codigoProducto"))!=null&&w.invalid&&((w=o.registroForm.get("codigoProducto"))!=null&&w.touched)?54:-1),t(4),v(d(59,58,"labels.id_proveedor")),t(2),c("formControlName","id_proveedor")("options",o.proveedores)("editable",!0),t(),_((a=o.registroForm.get("id_proveedor"))!=null&&a.invalid&&((a=o.registroForm.get("id_proveedor"))!=null&&a.touched)?61:-1),t(3),v(d(65,60,"labels.id_categoria")),t(2),c("formControlName","id_categoria")("options",o.categorias)("editable",!0),t(),_((I=o.registroForm.get("id_categoria"))!=null&&I.invalid&&((I=o.registroForm.get("id_categoria"))!=null&&I.touched)?67:-1)}},dependencies:[ge,ve,Q,oe,Z,W,X,Y,ee,te,ae,ne,ue,me,de,le,ce,se,pe,K,z,G,fe,ie,H],styles:[".color-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:5px 10px;color:#fff;border-radius:4px}"]})};export{V as default};
