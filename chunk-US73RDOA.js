import{a as _e,b as ue,c as fe}from"./chunk-SUCVKDWT.js";import{a as de}from"./chunk-3UMA6PGP.js";import{a as re,b as le,c as pe,f as se,g as me,h as ce}from"./chunk-VOZFKLIA.js";import"./chunk-B6S7RKMX.js";import"./chunk-UNFUOMSZ.js";import{b as te,c as ie,d as ne,e as ae,i as oe}from"./chunk-7I7RVYL5.js";import"./chunk-Y5YU34J4.js";import"./chunk-ORVVKJZF.js";import"./chunk-G255QGHI.js";import"./chunk-UYIDI6XF.js";import{b as K,c as U,d as J,e as G}from"./chunk-IJWSAIOW.js";import{j as N}from"./chunk-NU7MKXHP.js";import{i as Z,j as ee}from"./chunk-NB3FZJAV.js";import"./chunk-CKCKXBPA.js";import{E as X,F as Y}from"./chunk-QQUKQJE3.js";import"./chunk-F2X3VGZZ.js";import{ea as W}from"./chunk-UMAONBSZ.js";import{r as O,s as H}from"./chunk-OF6IZINW.js";import{$ as S,Aa as a,Cb as E,Fa as g,Ia as h,Jb as P,Kb as A,Lb as M,Ma as k,Mb as d,Nb as u,Qb as j,Sa as y,_ as v,cb as p,cc as s,dc as m,ec as z,fc as R,ib as w,kb as T,lb as I,ma as b,mb as V,n as D,nb as o,ob as r,pb as _,rc as Q,sc as q,tb as F,yb as x,zb as l}from"./chunk-H3HIGMDG.js";import{a as B}from"./chunk-C6Q5SG76.js";var ge=["dt1"],Ce=["menu"],ve=["filter"];function Se(t,i){if(t&1){let e=F();o(0,"div",8)(1,"p-button",9),s(2,"translate"),x("click",function(){v(e);let f=l(),C=M(7);return S(f.clear(C))}),r(),o(3,"p-button",10),x("click",function(){v(e);let f=l();return S(f.add())}),r()()}t&2&&(a(),p("label",m(2,3,"labels.clear"))("outlined",!0),a(2),p("outlined",!0))}function ye(t,i){t&1&&(o(0,"th",13)(1,"div",15),d(2),s(3,"translate"),s(4,"uppercase"),_(5,"p-sortIcon",16),r()()),t&2&&(p("pSortableColumn","id"),a(2),u(m(4,5,m(3,3,"labels.id"))),a(3),p("field","id"))}function xe(t,i){if(t&1&&(o(0,"th",14)(1,"div",15),d(2),s(3,"translate"),s(4,"uppercase"),_(5,"p-sortIcon",16),r()()),t&2){let e=l().$implicit;E("pSortableColumn",e.field),a(2),u(m(4,5,m(3,3,"labels.fechaVenta"))),a(3),p("field",e.field)}}function be(t,i){if(t&1&&(o(0,"th",14)(1,"div",15),d(2),s(3,"translate"),s(4,"uppercase"),_(5,"p-sortIcon",16),r()()),t&2){let e=l().$implicit;p("pSortableColumn",e.field),a(2),u(m(4,5,m(3,3,"labels.total"))),a(3),p("field",e.field)}}function he(t,i){if(t&1&&(o(0,"th",14)(1,"div",15),d(2),s(3,"translate"),s(4,"uppercase"),_(5,"p-sortIcon",16),r()()),t&2){let e=l().$implicit;E("pSortableColumn",e.field),a(2),u(m(4,5,m(3,3,"labels.proveedor"))),a(3),p("field",e.field)}}function we(t,i){if(t&1&&(o(0,"th",14)(1,"div",15),d(2),s(3,"translate"),s(4,"uppercase"),_(5,"p-sortIcon",16),r()()),t&2){let e=l().$implicit;E("pSortableColumn",e.field),a(2),u(m(4,5,m(3,3,"labels."+e.field))),a(3),p("field",e.field)}}function Te(t,i){if(t&1&&y(0,ye,6,7,"th",13)(1,xe,6,7,"th",14)(2,be,6,7,"th",14)(3,he,6,7,"th",14)(4,we,6,7,"th",14),t&2){let e,n=i.$implicit;w((e=n.field)==="id"?0:e==="fechaventa"?1:e==="total"?2:e==="proveedor"?3:4)}}function Ie(t,i){if(t&1&&_(0,"appcommon-filter-input",17),t&2){let e=l().$implicit;p("field",e.field)}}function Ve(t,i){if(t&1&&_(0,"appcommon-filter-input",18),t&2){let e=l().$implicit;p("field",e.field)}}function Fe(t,i){if(t&1&&_(0,"appcommon-filter-input",19),t&2){let e=l().$implicit;p("field",e.field)}}function Ee(t,i){if(t&1&&(o(0,"th"),y(1,Ie,1,1,"appcommon-filter-input",17)(2,Ve,1,1,"appcommon-filter-input",18)(3,Fe,1,1,"appcommon-filter-input",19),r()),t&2){let e,n=i.$implicit;a(),w((e=n.field)==="fechaVenta"?1:e==="total"?2:3)}}function Pe(t,i){t&1&&(o(0,"th",12),d(1,"cargando"),r())}function Be(t,i){if(t&1&&(o(0,"tr"),_(1,"th",11),I(2,Te,5,1,null,null,T),r(),o(4,"tr"),I(5,Ee,4,1,"th",null,T,!1,Pe,2,0,"th",12),r()),t&2){let e=i.$implicit;a(2),V(e),a(3),V(e)}}function Me(t,i){if(t&1&&(o(0,"td"),d(1),r()),t&2){let e=l().$implicit,n=l().$implicit;a(),u(n[e.field])}}function Re(t,i){if(t&1&&(o(0,"td"),d(1),s(2,"date"),r()),t&2){let e=l(2).$implicit;a(),u(z(2,1,e.fechaVenta,"dd/MM/yyyy"))}}function $e(t,i){if(t&1&&(o(0,"td",22),d(1),s(2,"bolivianos"),r()),t&2){let e=l().$implicit,n=l().$implicit;a(),u(m(2,1,n[e.field]))}}function Le(t,i){if(t&1&&(o(0,"td"),d(1),r()),t&2){let e=l(2).$implicit;a(),j("",e.cliente.persona.nombre," ",e.cliente.persona.app," ",e.cliente.persona.apm,"")}}function De(t,i){if(t&1&&(o(0,"td"),d(1),r()),t&2){let e=l(2).$implicit;a(),u(e.cliente.ci)}}function ke(t,i){if(t&1&&(o(0,"td"),d(1),r()),t&2){let e=l(2).$implicit;a(),u(e.cliente.nit)}}function Ae(t,i){if(t&1&&y(0,Me,2,1,"td")(1,Re,3,4,"td")(2,$e,3,3,"td",22)(3,Le,2,3,"td")(4,De,2,1,"td")(5,ke,2,1,"td"),t&2){let e,n=i.$implicit;w((e=n.field)==="id"?0:e==="fechaVenta"?1:e==="total"?2:e==="cliente"?3:e==="ci"?4:5)}}function je(t,i){if(t&1){let e=F();o(0,"tr")(1,"td",20)(2,"p-button",21),x("click",function(f){v(e),l();let C=M(1);return S(C.toggle(f))}),r()(),I(3,Ae,6,1,null,null,T),r()}if(t&2){let e=i.columns;a(2),p("icon","pi pi-ellipsis-v")("text",!0),a(),V(e)}}var $=class t{constructor(i,e,n,f,C,L){this.translateLanService=i;this.translate=e;this.filterservice=n;this.ventasServ=f;this.router=C;this.pdfreport=L;this.translateLanService.changeLanguage$.subscribe(c=>this.translate.use(c)),q(()=>{this.ventasServ.postAllVentasSearch(this.ventasdto()).pipe(D(c=>({data:Array.isArray(c.data)?[...c.data]:[],metadata:{page:c.metadata.page,rows:c.metadata.rows,total_records:c.metadata.total_records},loading:!1,error:null}))).subscribe({next:c=>{console.log(B({},this.ventasdto())),console.log(c),this.stateValues.set(c)},error:c=>{console.log(c),this.stateValues.set({data:[],metadata:{page:0,rows:0,total_records:0},loading:!0,error:c})}})})}table=h("dt1");menu=h("menu");filter=h("filter");stateValues=b({data:[],metadata:{page:0,rows:0,total_records:0},loading:!0,error:null});searchTxt=b([]);ventasdto=b({config:{populate_data:!0,page:1,rows:15,sort_field:[]},filter:{}});tablecon=re.cantidadRegistros;stateIni=!1;selectedItemId=null;items=[{label:"View",icon:"pi pi-eye",routerLink:"/transactions/ventas/detail/214"},{label:"Download",icon:"pi pi-download",items:[{label:"Pdf",icon:"pi pi-file-pdf",style:{color:"crimson"},command:i=>{console.log(i),this.generatePdf()}}]}];title="pages.sales";expandedRows={};allowedColumns=["id","fechaVenta","total","cliente","ci","nit"];columns=this.allowedColumns;columnsSelectSignal=Q(()=>this.columns.map(i=>({field:i,header:i.charAt(0).toUpperCase()+i.slice(1)})));getDataPaged(i){i.filters&&this.stateIni!==!1&&this.ventasdto.update(()=>({config:{populate_data:!1,page:(i.first||0)/Number(i.rows)+1,sort_field:i.multiSortMeta?i.multiSortMeta.filter(e=>e.field):[],rows:Number(i.rows)},filter:B({},this.filterservice.applyFilterNew(i.filters,this.ventasdto().filter))})),this.stateIni=!0}clear=i=>{this.ventasdto.set({config:{populate_data:!1,page:1,rows:15,sort_field:[]},filter:{}}),i.clear()};add=()=>this.router.navigate(["/transactions/ventas/create"]);generatePdf=()=>{let i=new _e,e=[{product:"Producto A",quantity:2,price:10,total:20},{product:"Producto B",quantity:1,price:15,total:15},{product:"Producto C",quantity:3,price:7,total:21}];this.pdfreport.generatePdf()};static \u0275fac=function(e){return new(e||t)(g(G),g(K),g(ce),g(ue),g(N),g(fe))};static \u0275cmp=k({type:t,selectors:[["app-sales"]],viewQuery:function(e,n){e&1&&(P(n.table,ge,5),P(n.menu,Ce,5),P(n.filter,ve,5)),e&2&&A(3)},decls:13,vars:25,consts:[["menu",""],["dt1",""],["header",""],["body",""],[3,"model","popup"],[3,"header","subheader"],["datakey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} employees","styleClass","p-datatable-sm","responsiveLayout","scroll","scrollHeight","60vh",3,"onLazyLoad","value","paginator","loading","expandedRowKeys","rows","rowHover","rowsPerPageOptions","lazy","columns","reorderableColumns","totalRecords","sortMode","customSort","scrollable","paginatorPosition"],["pTemplate","caption"],[1,"flex","flex-wrap","justify-content-end","gap-2"],["icon","pi pi-filter-slash",3,"click","label","outlined"],["icon","pi pi-plus","severity","primary",1,"pr-1",3,"click","outlined"],["rowspan","2"],[2,"min-width","12rem"],["pReorderableColumn","",2,"min-width","1rem",3,"pSortableColumn"],["pReorderableColumn","",3,"pSortableColumn"],[1,"flex","justify-content-between","align-items-left"],[3,"field"],["type","date",3,"field"],["type","number",3,"field"],["type","text",3,"field"],[1,"flex","py-4"],["type","button",1,"p-button-text","p-button-rounded",3,"click","icon","text"],[2,"width","12%","text-align","right"]],template:function(e,n){if(e&1){let f=F();_(0,"p-tieredmenu",4,0),o(2,"p-card",5),s(3,"translate"),s(4,"uppercase"),s(5,"translate"),o(6,"p-table",6,1),x("onLazyLoad",function(L){return v(f),S(n.getDataPaged(L))}),y(8,Se,4,5,"ng-template",7)(9,Be,8,1,"ng-template",null,2,R)(11,je,5,2,"ng-template",null,3,R),r()()}e&2&&(p("model",n.items)("popup",!0),a(2),p("header",m(4,21,m(3,19,n.title)))("subheader",m(5,23,"labels.admin_sales")),a(4),p("value",n.stateValues().data)("paginator",!0)("loading",n.stateValues().loading)("expandedRowKeys",n.expandedRows)("rows",n.stateValues().metadata.rows)("rowHover",!0)("rowsPerPageOptions",n.tablecon)("lazy",!0)("columns",n.columnsSelectSignal())("reorderableColumns",!0)("totalRecords",n.stateValues().metadata.total_records)("sortMode","multiple")("customSort",!0)("scrollable",!0)("paginatorPosition",n.stateValues().data&&n.stateValues().data.length>50?"both":"bottom"))},dependencies:[J,U,ee,Z,W,oe,te,ie,ae,ne,Y,X,me,se,O,pe,le,H,de],encapsulation:2})};export{$ as default};
