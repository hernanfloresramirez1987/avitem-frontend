import{a as me}from"./chunk-AZTZBJ7G.js";import{a as se}from"./chunk-JE6D4QHH.js";import{a as ne,d as ae,e as re,f as oe,g as le,h as pe}from"./chunk-7S3CTMJ4.js";import"./chunk-FUFXIFYC.js";import"./chunk-2IF7ZH3D.js";import{b as Y,c as Z,d as ee,e as te,i as ie}from"./chunk-MWQF4XXQ.js";import"./chunk-4LF5IOFW.js";import"./chunk-HIW4BMWQ.js";import"./chunk-G255QGHI.js";import"./chunk-UYIDI6XF.js";import{b as D,c as N,e as Q}from"./chunk-IJWSAIOW.js";import{i as W,j as X}from"./chunk-QXMRRD5J.js";import"./chunk-L5WP44S2.js";import{E as G,F as K,j as J,l as U,s as q}from"./chunk-TLDPOR5N.js";import"./chunk-NU7MKXHP.js";import"./chunk-F2X3VGZZ.js";import{ea as H}from"./chunk-S5MQWB2L.js";import{r as j}from"./chunk-OF6IZINW.js";import{$ as g,Aa as n,Cb as T,Fa as C,Ia as I,Jb as V,Kb as z,Ma as $,Mb as c,Nb as S,Ob as b,Sa as v,_ as h,cb as p,cc as d,dc as u,fc as F,ib as E,kb as k,lb as M,ma as y,mb as A,n as P,nb as a,ob as o,pb as s,rc as w,sc as O,tb as x,yb as B,zb as m}from"./chunk-H3HIGMDG.js";import{a as R}from"./chunk-C6Q5SG76.js";var ce=["dt1"],de=["filter"],ue=(t,i)=>i.field;function _e(t,i){if(t&1){let e=x();a(0,"div",9),s(1,"p-button",10),d(2,"translate"),a(3,"p-button",11),B("click",function(){h(e);let _=m();return g(_.add())}),o()()}t&2&&(n(),p("label",u(2,3,"labels.clear"))("outlined",!0),n(2),p("outlined",!0))}function fe(t,i){t&1&&(a(0,"th",14)(1,"div",18),c(2),d(3,"translate"),d(4,"uppercase"),s(5,"p-sortIcon",19),o()()),t&2&&(p("pSortableColumn","id"),n(2),b("",u(4,5,u(3,3,"labels.id"))," "),n(3),p("field","id"))}function he(t,i){if(t&1&&(a(0,"th",15)(1,"div",18),c(2),d(3,"translate"),d(4,"uppercase"),s(5,"p-sortIcon",19),o()()),t&2){let e=m().$implicit;T("pSortableColumn",e.field),n(2),b("",u(4,5,u(3,3,"labels.nombre"))," "),n(3),p("field",e.field)}}function ge(t,i){if(t&1&&(a(0,"th",16)(1,"div",18),c(2),d(3,"translate"),d(4,"uppercase"),s(5,"p-sortIcon",19),o()()),t&2){let e=m().$implicit;T("pSortableColumn",e.field),n(2),b("",u(4,5,u(3,3,"labels.direccion"))," "),n(3),p("field",e.field)}}function Ce(t,i){if(t&1&&(a(0,"th",16)(1,"div",18),c(2),d(3,"translate"),d(4,"uppercase"),s(5,"p-sortIcon",19),o()()),t&2){let e=m().$implicit;T("pSortableColumn",e.field),n(2),b("",u(4,5,u(3,3,"labels.almacen"))," "),n(3),p("field",e.field)}}function Se(t,i){if(t&1&&(a(0,"th",17)(1,"div",18),c(2),d(3,"uppercase"),s(4,"p-sortIcon",19),o()()),t&2){let e=m().$implicit;p("pSortableColumn",e.field),n(2),b("",u(3,3,e.field)," "),n(2),p("field",e.field)}}function be(t,i){if(t&1&&v(0,fe,6,7,"th",14)(1,he,6,7,"th",15)(2,ge,6,7,"th",16)(3,Ce,6,7,"th",16)(4,Se,5,5,"th",17),t&2){let e,l=i.$implicit;E((e=l.field)==="id"?0:e==="nombre"?1:e==="direccion"?2:e==="almacen"?3:4)}}function ye(t,i){if(t&1&&s(0,"appcommon-filter-input",20),t&2){let e=m().$implicit;p("field",e.field)}}function ve(t,i){if(t&1&&s(0,"appcommon-filter-input",21),t&2){let e=m().$implicit;p("field",e.field)}}function xe(t,i){if(t&1&&s(0,"appcommon-filter-input",20),t&2){let e=m().$implicit;p("field",e.field)}}function Be(t,i){if(t&1&&s(0,"appcommon-filter-input",20),t&2){let e=m().$implicit;p("field",e.field)}}function Te(t,i){if(t&1&&s(0,"appcommon-filter-input",21),t&2){let e=m().$implicit;p("field",e.field)}}function we(t,i){if(t&1&&(a(0,"th"),v(1,ye,1,1,"appcommon-filter-input",20)(2,ve,1,1,"appcommon-filter-input",21)(3,xe,1,1,"appcommon-filter-input",20)(4,Be,1,1,"appcommon-filter-input",20)(5,Te,1,1,"appcommon-filter-input",21),o()),t&2){let e,l=i.$implicit;n(),E((e=l.field)==="nombre"?1:e==="direccion"?2:e==="capacidad"?3:e==="matriz"?4:5)}}function Ie(t,i){t&1&&(a(0,"th",13),c(1,"cargando"),o())}function Ee(t,i){if(t&1&&(a(0,"tr"),s(1,"th",12),M(2,be,5,1,null,null,ue),o(),a(4,"tr"),M(5,we,6,1,"th",null,k,!1,Ie,2,0,"th",13),o()),t&2){let e=i.$implicit;n(2),A(e),n(3),A(e)}}function Me(t,i){if(t&1&&(a(0,"tr"),s(1,"td"),a(2,"td"),c(3),o(),a(4,"td"),c(5),o(),a(6,"td"),c(7),o(),a(8,"td"),c(9),o(),a(10,"td"),c(11),o()()),t&2){let e=i.$implicit;n(3),S(e.id),n(2),S(e.nombre),n(2),S(e.direccion),n(2),S(e.matriz),n(2),S(e.capacidad)}}function Ae(t,i){if(t&1){let e=x();a(0,"div",22)(1,"p-multiSelect",23),B("onChange",function(_){h(e);let f=m();return g(f.cargaColumnas(_))})("onSelectAllChange",function(_){h(e);let f=m();return g(f.selectAll(_))}),o()()}if(t&2){let e=m();n(),p("options",e.colsOptionsSelect)("ngModel",e.columnsSelectSignal())}}function Ve(t,i){t&1&&(a(0,"tr")(1,"td",24),c(2,"No order found."),o()())}function Fe(t,i){t&1&&(a(0,"tr")(1,"td",24),c(2,"Loading orders data. Please wait."),o()())}var L=class t{constructor(i,e,l,_,f){this.branches=i;this.filterservice=e;this.translate=l;this.translateLanService=_;this.arrayurilservice=f;this.translateLanService.changeLanguage$.subscribe(r=>this.translate.use(r)),O(()=>{this.branches.getAllSucursalesFiler(this.branchesdto()).pipe(P(r=>(console.log(r),{data:Array.isArray(r.data)?[...r.data]:[],metadata:{page:r.metadata.page,rows:r.metadata.rows,total_records:r.metadata.total_records}}))).subscribe({next:r=>(console.log(this.branchesdto(),r),this.stateValues.set({data:r.data,metadata:r.metadata,loading:!1,error:null}),console.log(this.stateValues()),r),error:r=>{this.stateValues.set({data:[],metadata:{page:0,rows:0,total_records:0},loading:!1,error:r}),console.log("console.log('', err):   ",r,this.stateValues())},complete:()=>{console.log("console.log('', this.stateValues()):   ",this.stateValues())}})})}table=I("dt1");filter=I("filter");stateValues=y({data:[],metadata:{page:0,rows:0,total_records:0},loading:!0,error:null});searchTxt=y([]);branchesdto=y({config:{populate_data:!0,page:1,rows:15,sort_field:[]},filter:{}});tablecon=ne.cantidadRegistros;stateIni=!1;keylocalColumn="branchs_cols";allowedColumns=["id","nombre","direccion","matriz","pacacidad"];columns=this.allowedColumns;columnsSelectSignal=w(()=>this.columns.map(i=>({field:i,header:i.charAt(0).toUpperCase()+i.slice(1)})));colsOptionsSelect=this.allowedColumns.map(i=>({field:i,header:i.charAt(0).toUpperCase()+i.slice(1)}));clear=i=>{i.clear()};onColumnReorder=i=>localStorage.setItem(this.keylocalColumn,JSON.stringify(i.columns));getDataPaged(i){i.filters&&this.stateIni!==!1&&this.branchesdto.update(()=>({config:{populate_data:!1,page:(i.first||0)/Number(i.rows)+1,sort_field:i.multiSortMeta?i.multiSortMeta.filter(e=>e.field):[],rows:Number(i.rows)},filter:R({},this.filterservice.applyFilterNew(i.filters,this.branchesdto().filter))})),this.stateIni=!0}cargaColumnas(i){let e=this.arrayurilservice.selectOrderedArray(this.colsOptionsSelect,i.value);this.columnsSelectSignal=w(()=>e),localStorage.setItem(this.keylocalColumn,JSON.stringify(this.columnsSelectSignal()))}selectAll(i){let e=[];i.checked&&(e=this.allowedColumns),this.columnsSelectSignal=w(()=>e),localStorage.setItem(this.keylocalColumn,JSON.stringify(e))}add=()=>{};static \u0275fac=function(e){return new(e||t)(C(me),C(pe),C(D),C(Q),C(se))};static \u0275cmp=$({type:t,selectors:[["app-branches"]],viewQuery:function(e,l){e&1&&(V(l.table,ce,5),V(l.filter,de,5)),e&2&&z(2)},decls:13,vars:20,consts:[["dt1",""],["paginatorleft",""],["emptymessage",""],[3,"header"],["datakey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} items","styleClass","p-datatable-sm p-datatable-gridlines p-0 m-0","responsiveLayout","scroll","scrollHeight","70vh",3,"onColReorder","onLazyLoad","value","paginator","rows","loading","rowHover","rowsPerPageOptions","lazy","columns","reorderableColumns","totalRecords","sortMode","customSort","scrollable","paginatorPosition","showCurrentPageReport"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","loadingbody"],[1,"flex","flex-wrap","justify-content-end","gap-1"],["icon","pi pi-filter-slash","styleClass","custom-hover",3,"label","outlined"],["icon","pi pi-plus","severity","primary",1,"pr-1",3,"click","outlined"],["rowspan","2"],[2,"min-width","8rem"],["pReorderableColumn","",2,"min-width","1rem",3,"pSortableColumn"],["pReorderableColumn","",2,"min-width","8rem",3,"pSortableColumn"],["pReorderableColumn","",2,"min-width","20rem",3,"pSortableColumn"],["pReorderableColumn","",3,"pSortableColumn"],[1,"flex","justify-content-between","align-items-left"],[3,"field"],["type","number",3,"field"],["type","text",3,"field"],[1,"flex","align-items-center","justify-content-center"],["inputId","float-label","optionLabel","header","selectedItemsLabel","{0} columns selected","size","small","placeholder","Choose Columns",1,"p-input-icon-left",3,"onChange","onSelectAllChange","options","ngModel"],["colspan","8"]],template:function(e,l){if(e&1){let _=x();a(0,"p-card",3),d(1,"translate"),d(2,"uppercase"),a(3,"p-table",4,0),B("onColReorder",function(r){return h(_),g(l.onColumnReorder(r))})("onLazyLoad",function(r){return h(_),g(l.getDataPaged(r))}),v(5,_e,4,5,"ng-template",5)(6,Ee,8,1,"ng-template",6)(7,Me,12,5,"ng-template",7)(8,Ae,2,2,"ng-template",null,1,F)(10,Ve,3,0,"ng-template",null,2,F)(12,Fe,3,0,"ng-template",8),o()()}e&2&&(p("header",u(2,18,u(1,16,"pages.branches"))),n(3),p("value",l.stateValues().data)("paginator",!0)("rows",l.stateValues().metadata.rows)("loading",l.stateValues().loading)("rowHover",!0)("rowsPerPageOptions",l.tablecon)("lazy",!0)("columns",l.columnsSelectSignal())("reorderableColumns",!0)("totalRecords",l.stateValues().metadata.total_records)("sortMode","multiple")("customSort",!0)("scrollable",!0)("paginatorPosition","bottom")("showCurrentPageReport",!0))},dependencies:[X,W,H,ie,Y,Z,te,ee,K,G,N,j,le,oe,re,ae,q,J,U],encapsulation:2})};export{L as default};
