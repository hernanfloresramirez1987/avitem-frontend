import{a as oe,b as me}from"./chunk-3WV3ZJ7R.js";import{b as ee,c as te,d as ie,f as ae,j as re}from"./chunk-L6AT2A54.js";import"./chunk-OGQHURAE.js";import{s as ne,t as le,u as pe,v as se}from"./chunk-O4MNLDLA.js";import"./chunk-XMSLJEE3.js";import{Ia as K,Ja as G,Oa as X,Pa as Y,Qa as Z,V as q,Z as J}from"./chunk-L6F5SHP5.js";import{k as H,r as N,w as U}from"./chunk-A5I2MG6G.js";import"./chunk-F2X3VGZZ.js";import{$a as s,Ab as E,Bb as R,Ca as a,Cb as B,Fb as O,Gb as n,Ha as v,Hb as d,Ib as h,Na as D,P as F,Ta as I,V as P,Xb as l,Yb as p,a as x,aa as y,ba as w,fb as $,hb as j,ib as k,jb as A,jc as z,kb as r,kc as Q,lb as o,mb as u,oa as g,q as V,qb as T,ub as W,vb as _,yb as S}from"./chunk-4PTIY3UM.js";var C=class t{#e=se.URL_API;http=P(N);getAllWarehouses=i=>this.http.post(`${this.#e}inventarios/all_filter`,i);static \u0275fac=function(e){return new(e||t)};static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})};var ue=["dt1"],fe=["filter"];function _e(t,i){if(t&1){let e=T();r(0,"div",7)(1,"p-button",8),l(2,"translate"),W("click",function(){y(e);let f=_(),b=O(5);return w(f.clear(b))}),o()()}t&2&&(a(),s("label",p(2,2,"labels.clear"))("outlined",!0))}function he(t,i){t&1&&(r(0,"th",10)(1,"div",14),n(2),l(3,"translate"),l(4,"uppercase"),u(5,"p-sortIcon",15),o()()),t&2&&(s("pSortableColumn","id"),a(2),h("",p(4,5,p(3,3,"labels.id"))," "),a(3),s("field","id"))}function ve(t,i){if(t&1&&(r(0,"th",11)(1,"div",14),n(2),l(3,"translate"),l(4,"uppercase"),u(5,"p-sortIcon",15),o()()),t&2){let e=_().$implicit;S("pSortableColumn",e.field),a(2),h("",p(4,5,p(3,3,"labels.idLote"))," "),a(3),s("field",e.field)}}function ge(t,i){if(t&1&&(r(0,"th",12)(1,"div",14),n(2),l(3,"translate"),l(4,"uppercase"),u(5,"p-sortIcon",15),o()()),t&2){let e=_().$implicit;S("pSortableColumn",e.field),a(2),h("",p(4,5,p(3,3,"labels.producto"))," "),a(3),s("field",e.field)}}function Se(t,i){if(t&1&&(r(0,"th",12)(1,"div",14),n(2),l(3,"translate"),l(4,"uppercase"),u(5,"p-sortIcon",15),o()()),t&2){let e=_().$implicit;S("pSortableColumn",e.field),a(2),h("",p(4,5,p(3,3,"labels.almacen"))," "),a(3),s("field",e.field)}}function Ce(t,i){if(t&1&&(r(0,"th",13)(1,"div",14),n(2),l(3,"translate"),l(4,"uppercase"),u(5,"p-sortIcon",15),o()()),t&2){let e=_().$implicit;s("pSortableColumn",e.field),a(2),h("",p(4,5,p(3,3,"labels.stock"))," "),a(3),s("field",e.field)}}function be(t,i){if(t&1&&(r(0,"th",13)(1,"div",14),n(2),l(3,"translate"),l(4,"uppercase"),u(5,"p-sortIcon",15),o()()),t&2){let e=_().$implicit;s("pSortableColumn",e.field),a(2),h(".... ",p(4,5,p(3,3,"labels.cantidadReservada"))," "),a(3),s("field",e.field)}}function xe(t,i){if(t&1&&(r(0,"th",13)(1,"div",14),n(2),l(3,"translate"),l(4,"uppercase"),u(5,"p-sortIcon",15),o()()),t&2){let e=_().$implicit;s("pSortableColumn",e.field),a(2),h("ss",p(4,5,p(3,3,"labels.producto"))," "),a(3),s("field",e.field)}}function ye(t,i){if(t&1&&(r(0,"th",12)(1,"div",14),n(2),l(3,"uppercase"),u(4,"p-sortIcon",15),o()()),t&2){let e=_().$implicit;s("pSortableColumn",e.field),a(2),h("",p(3,3,e.field)," "),a(2),s("field",e.field)}}function we(t,i){if(t&1&&I(0,he,6,7,"th",10)(1,ve,6,7,"th",11)(2,ge,6,7,"th",12)(3,Se,6,7,"th",12)(4,Ce,6,7,"th",13)(5,be,6,7,"th",13)(6,xe,6,7,"th",13)(7,ye,5,5,"th",12),t&2){let e,c=i.$implicit;$((e=c.field)==="id"?0:e==="idLote"?1:e==="producto"?2:e==="almacen"?3:e==="cantidadStock"?4:e==="cantidadReservada"?5:e==="cantidadDisponible"?6:7)}}function Ie(t,i){if(t&1&&(r(0,"tr"),u(1,"th",9),k(2,we,8,1,null,null,j),o()),t&2){let e=i.$implicit;a(2),A(e)}}function Te(t,i){if(t&1&&(r(0,"tr"),u(1,"td"),r(2,"td"),n(3),o(),r(4,"td"),n(5),o(),r(6,"td"),n(7),o(),r(8,"td"),n(9),o(),r(10,"td"),n(11),o(),r(12,"td"),n(13),o(),r(14,"td"),n(15),o(),r(16,"td"),n(17),o(),r(18,"td"),n(19),o(),r(20,"td"),n(21),o(),r(22,"td"),n(23),o(),r(24,"td"),n(25),o(),r(26,"td"),n(27),o(),r(28,"td"),n(29),o()()),t&2){let e=i.$implicit;a(3),d(e.id),a(2),d(e.idLote),a(2),d(e.producto.nombre),a(2),d(e.almacen.nombre),a(2),d(e.cantidadStock),a(2),d(e.cantidadReservada),a(2),d(e.cantidadDisponible),a(2),d(e.cant_ingresos),a(2),d(e.cant_salidas),a(2),d(e.cant_transferencias),a(2),d(e.precio_compra),a(2),d(e.precio_venta),a(2),d(e.sucursal),a(2),d(e.stock)}}function We(t,i){}var L=class t{constructor(i,e,c,f,b,M){this.warehouseServ=i;this.filterservice=e;this.translate=c;this.translateLanService=f;this.messageService=b;this.router=M;this.translateLanService.changeLanguage$.subscribe(m=>this.translate.use(m)),Q(()=>{this.warehouseServ.getAllWarehouses(this.warehousesdto()).pipe(V(m=>(console.log(m),{data:Array.isArray(m.data)?[...m.data]:[],metadata:{page:m.metadata.page,rows:m.metadata.rows,total_records:m.metadata.total_records},loading:!1,error:null}))).subscribe({next:m=>{console.log(m),console.log(x({},this.warehousesdto())),this.stateValues.set({data:m.data,metadata:m.metadata,loading:!1,error:null}),console.log(this.stateValues())},error:m=>{this.stateValues.set({data:[],metadata:{page:0,rows:0,total_records:0},loading:!1,error:m}),console.log("console.log('', err):   ",m,this.stateValues())},complete:()=>{console.log("console.log('', this.stateValues()):   ",this.stateValues())}})})}table;filter;stateValues=g({data:[],metadata:{page:0,rows:0,total_records:0},loading:!0,error:null});searchTxt=g([]);warehousesdto=g({config:{populate_data:!0,page:1,rows:15,sort_field:[]},filter:{}});tablecon=oe.cantidadRegistros;stateIni=!1;allowedColumns=["id","idLote","producto","almacen","cantidadStock","cant_ingresos","cant_salidas","cant_transferencias","precio_compra","precio_venta","sucursal"];columns=this.allowedColumns;columnsSelectSignal=z(()=>this.columns.map(i=>({field:i,header:i.charAt(0).toUpperCase()+i.slice(1)})));expandedRows={};clear=i=>{i.clear()};getDataPaged(i){i.filters&&this.stateIni!==!1&&this.warehousesdto.update(()=>({config:{populate_data:!1,page:(i.first||0)/Number(i.rows)+1,sort_field:i.multiSortMeta?i.multiSortMeta.filter(e=>e.field):[],rows:Number(i.rows)},filter:x({},this.filterservice.applyFilterNew(i.filters,this.warehousesdto().filter))})),this.stateIni=!0}static \u0275fac=function(e){return new(e||t)(v(C),v(me),v(X),v(ne),v(q),v(U))};static \u0275cmp=D({type:t,selectors:[["app-warehouse"]],viewQuery:function(e,c){if(e&1&&(E(ue,5),E(fe,5)),e&2){let f;R(f=B())&&(c.table=f.first),R(f=B())&&(c.filter=f.first)}},decls:10,vars:23,consts:[["dt1",""],[3,"header","subheader"],["dataKey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} items","styleClass","p-datatable-sm p-datatable-gridlines p-0 m-0","responsiveLayout","scroll","scrollHeight","70vh",3,"onLazyLoad","value","paginator","rows","loading","rowHover","rowsPerPageOptions","lazy","columns","reorderableColumns","totalRecords","sortMode","customSort","scrollable","paginatorPosition","showCurrentPageReport"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","footer"],[1,"flex","flex-wrap","justify-content-end","gap-2"],["icon","pi pi-filter-slash",3,"click","label","outlined"],["rowspan","2"],["pReorderableColumn","",2,"min-width","1rem",3,"pSortableColumn"],["pReorderableColumn","",2,"min-width","8rem",3,"pSortableColumn"],["pReorderableColumn","",2,"min-width","20rem",3,"pSortableColumn"],["pReorderableColumn","",2,"min-width","10rem",3,"pSortableColumn"],[1,"flex","justify-content-between","align-items-left"],[3,"field"]],template:function(e,c){if(e&1){let f=T();r(0,"p-card",1),l(1,"translate"),l(2,"uppercase"),l(3,"translate"),r(4,"p-table",2,0),W("onLazyLoad",function(M){return y(f),w(c.getDataPaged(M))}),I(6,_e,3,4,"ng-template",3)(7,Ie,4,0,"ng-template",4)(8,Te,30,14,"ng-template",5)(9,We,0,0,"ng-template",6),o()()}e&2&&(s("header",p(2,19,p(1,17,"pages.warehouse")))("subheader",p(3,21,"pages.warehouse_subheader")),a(4),s("value",c.stateValues().data)("paginator",!0)("rows",c.stateValues().metadata.rows)("loading",c.stateValues().loading)("rowHover",!0)("rowsPerPageOptions",c.tablecon)("lazy",!0)("columns",c.columnsSelectSignal())("reorderableColumns",!0)("totalRecords",c.stateValues().metadata.total_records)("sortMode","multiple")("customSort",!0)("scrollable",!0)("paginatorPosition","bottom")("showCurrentPageReport",!0))},dependencies:[pe,le,J,G,K,Z,Y,H,re,ee,te,ae,ie],encapsulation:2,changeDetection:0})};export{L as default};
