import{a as Te,b as Ie,c as Ne,d as De,e as Me}from"./chunk-QICJ2XHG.js";import{a as Ee}from"./chunk-53ARNPTS.js";import{a as Fe,b as Ve}from"./chunk-OF4KQEBK.js";import{a as we}from"./chunk-QPDKSILO.js";import{b as Ce,j as Se}from"./chunk-YOQYYWRA.js";import{b as be}from"./chunk-OVNQVQR5.js";import{a as fe,b as _e,c as ge,d as xe,e as ye}from"./chunk-PZTL2RAH.js";import{G as se,J as me,K as de,X as ce,Y as ue,b as K,c as Q,d as W,e as X,ea as ve,fa as he,g as Z,h as U,j as ee,k as te,m as ie,n as ne,o as ae,p as le,q as oe,s as re,x as pe}from"./chunk-GGYH7DSO.js";import"./chunk-4YRY4IP2.js";import{a as H,i as z,j as J}from"./chunk-NM3HJ4DI.js";import{s as q,t as D}from"./chunk-JAFPLUWG.js";import{$ as L,Cb as g,Db as V,Gb as A,Mb as o,Nb as s,Sa as t,Ta as _,Tb as O,Ub as Y,V as j,Wb as T,a as M,b as B,bb as G,dc as m,ea as $,ec as d,hb as v,jb as p,kb as R,mb as P,oa as I,ob as S,pa as N,tb as i,ub as e,vb as C,zb as k}from"./chunk-PQPLRZS3.js";var Be=(()=>{class l{constructor(){this.#e=ye.URL_API,this.http=L(H),this.postSaveVenta=a=>this.http.post(`${this.#e}proveedores/register`,a)}#e;static{this.\u0275fac=function(r){return new(r||l)}}static{this.\u0275prov=j({token:l,factory:l.\u0275fac,providedIn:"root"})}}return l})();var Pe=()=>({width:"100%"}),je=()=>({width:"100%"}),Le=()=>["/inventory/products"];function $e(l,u){l&1&&(i(0,"small",8),o(1,"Error en el Fecha de Compra."),e())}function Ge(l,u){l&1&&(i(0,"small",8),o(1,"Error en el Proveedor Seleccionado."),e())}function Re(l,u){l&1&&(i(0,"small",8),o(1,"Error en el Producto seleccionado."),e())}function Ae(l,u){l&1&&(i(0,"small",8),o(1,"Error en el Producto Seleccionado."),e())}function Oe(l,u){l&1&&(i(0,"small",8),o(1,"Error en el Fecha de Compra."),e())}function Ye(l,u){l&1&&(i(0,"small",8),o(1,"Error en el Precio de Compra."),e())}function qe(l,u){l&1&&(i(0,"small",8),o(1,"Error en el Precio de Venta."),e())}function He(l,u){l&1&&(i(0,"small",8),o(1,"Error en el Precio de Venta."),e())}function ze(l,u){l&1&&(i(0,"tr")(1,"th",27),o(2,"No"),e(),i(3,"th",28),o(4,"Producto"),e(),i(5,"th",29),o(6,"Cantidad"),e(),i(7,"th",29),o(8,"Precio Unitario"),e(),i(9,"th",29),o(10,"Precio Venta"),e(),i(11,"th",29),o(12,"Precio Total"),e(),i(13,"th",30),o(14,"Option"),e()())}function Je(l,u){if(l&1){let a=k();i(0,"tr")(1,"td",31),o(2),e(),i(3,"td"),o(4),e(),i(5,"td",31),o(6),e(),i(7,"td",31),o(8),e(),i(9,"td",31),o(10),e(),i(11,"td",31),o(12),e(),i(13,"td",32)(14,"p-buttonGroup")(15,"p-button",22),m(16,"translate"),g("click",function(){let n=I(a).$implicit,c=V();return N(c.deleteDetail(n))}),e()()()()}if(l&2){let a=u.$implicit,r=u.rowIndex,n=V();t(2),s(r+1),t(),R("background-color",n.getColorBackground(a.color))("color",n.getColor(a.color)),t(),s(a.name_product),t(2),s(a.cantidad),t(2),s(a.precioUnitario),t(2),s(a.precioVenta),t(2),s(a.cantidad*a.precioUnitario),t(3),p("title",d(16,11,"label.delet_detall"))}}function Ke(l,u){if(l&1){let a=k();i(0,"div",33),C(1,"p-button",34),i(2,"p-button",35),g("click",function(){I(a);let n=V();return N(n.cleanAll())}),e(),i(3,"p-button",36),g("click",function(){I(a);let n=V();return N(n.submitSales())}),e()()}if(l&2){let a=V();t(),p("routerLink",T(2,Le)),t(2),p("disabled",!a.salesForm.valid)}}var Pt=(()=>{class l{constructor(a,r,n,c,x,y,w,b,E,F){this.confirmationServ=a,this.employeesServ=r,this.ventasServ=n,this.productosServ=c,this.translate=x,this.translateLanService=y,this.fb=w,this.router=b,this.datePipe=E,this.toastServ=F,this.detailView=[],this.stateInputs=G(!0),this.currentDate=this.datePipe.transform(new Date,"dd/MM/yyyy"),this.total=0,this.totalVenta=0,this.translateLanService.changeLanguage$.subscribe(f=>this.translate.use(f)),this.salesForm=this.fb.group({fechaVenta:[this.currentDate],tokenSIN:[""],id_cliente:["",[U.required]],id_empleado:["",[U.required]],cantidad:[""],precioUnitario:[""],precioUnitarioVenta:[""],id_producto:[""]}),this.productosServ.postProductsGet().subscribe(f=>{this.productos=f.map(h=>B(M({},h),{display:`${h.nombre} (${h.color}) - ${h.unidadMedida}`})),this.stateInputs.set(!1)}),this.employeesServ.postEmployees(null).subscribe(f=>{console.log(f),this.empleados=f.data.map(h=>B(M({},h),{display:`${h.nombre} ${h.app} ${h.apm}, ${h.idcargo}`})),this.stateInputs.set(!1)})}asignarValores(){let a=this.salesForm.value;return console.log(String(this.datePipe.transform(this.getLastDateOfYear(new Date().getFullYear()),"yyyy-MM-dd"))),this.ventasRegister={fechaVenta:String(this.datePipe.transform(new Date,"yyyy-MM-dd")),total:this.total,confactura:!0,token_SIN:"123456",id_cliente:a.id_cliente.id,id_empleado:a.id_empleado.id,detalle:this.detailView.map(r=>(console.log(r),{cantidad:r.cantidad,precioUnitarioVent:r.precioUnitario,precioUnitVenta:r.precioUnitarioVent,id_producto:r.id_producto}))},console.log(`console.log(this.comprasRegister);
 `,this.ventasRegister),this.ventasRegister}getLastDateOfYear(a){return new Date(a,11,31)}notifySuccess(){this.toastServ.showSuccess("Operation Successful","The action was completed successfully.")}notifyError(){this.toastServ.showError("Operation Failed","An error occurred while processing the action.")}getColorBackground(a){switch(a){case"Natural":return"#cccccc";case"Champan":return"#FBE7C6";case"Negro":return"#000000";case"Madera":return"#8B4513";default:return"#FFFFFF"}}getColor(a){switch(a){case"Natural":return"#000000";case"Champan":return"#000000";case"Negro":return"#FFFFFF";case"Madera":return"#FFFFFF";default:return"#FFFFFF"}}deleteDetail(a){this.detailView=this.detailView.filter(r=>r!==a),this.funcTotal(),this.cleanForms()}changeTotalVenta(){}addDetail(){}updateData(){console.log("updateData() { } ")}funcTotal(){this.total=this.detailView.reduce((a,r)=>{let n=Number(r.cantidad)||0,c=Number(r.precioUnitarioVent)||0;return a+n*c},0)}cleanForms(){this.salesForm.patchValue({total:this.total,id_producto:"",cantidad:"",precioUnitario:"",precioVenta:""},{emitEvent:!1}),this.totalVenta=0}cleanAll(){}submitSales(){}static{this.\u0275fac=function(r){return new(r||l)(_(pe),_(we),_(Be),_(Ee),_(K),_(X),_(oe),_(z),_(D),_(Me))}}static{this.\u0275cmp=$({type:l,selectors:[["app-sale-create"]],standalone:!0,features:[O([D]),Y],decls:79,vars:72,consts:[[3,"formGroup"],[3,"header"],[1,"flex","flex-column","md:flex-row","sm:flex-row","w-full"],[1,"align-items-left","justify-content-top","w-full"],[1,"flex","flex-column","md:flex-row","gap-2","w-full"],[1,"flex","flex-wrap","justify-content-left","align-items-center","gap-2","pb-4","lg:w-full"],[1,"w-25rem"],["dateFormat","dd/mm/yy","type","text","styleClass","w-full",1,"w-full",3,"formControlName"],[2,"color","red"],[1,"flex","flex-wrap","justify-content-left","align-items-center","gap-2","pb-4","lg:w-full","px-2"],["pInputText","","type","text",1,"w-full",3,"disabled"],["optionLabel","nombre","styleClass","w-full","placeholder","Seleccionar un Cliente",1,"w-full","lg:w-full",3,"formControlName","options"],["optionLabel","display","placeholder","Seleccionar Empleado","styleClass","w-full",1,"w-full","lg:w-full",3,"formControlName","options"],[1,"flex","flex-column","md:flex-row","flex-row"],["optionLabel","display","styleClass","w-full","placeholder","Seleccionar un producto",1,"w-full","lg:w-full",3,"formControlName","options"],["pInputText","","type","number",1,"w-full",3,"change","formControlName"],["pInputText","","type","number",1,"w-full",3,"formControlName"],["pInputText","","type","number","disabled","",1,"w-full",3,"value"],[1,"justify-content-center","align-items-center"],[1,""],[1,"flex","justify-content-between"],["icon","pi pi-plus","severity","primary",3,"click","title"],["icon","pi pi-trash","severity","danger",3,"click","title"],[3,"value","tableStyle","styleClass"],["pTemplate","header"],["pTemplate","body"],["pTemplate","footer"],[2,"width","6%","text-align","right"],[2,"width","40%"],[2,"width","12%","text-align","right"],[2,"width","6%"],[2,"text-align","right"],[1,"flex","flex-wrap","justify-content-left"],[1,"flex","gap-3","mt-1"],["label","Cancel","severity","danger","styleClass","w-full",1,"w-full",3,"routerLink"],["label","Limpiar","severity","secondary","styleClass","w-full",1,"w-full",3,"click"],["label","Save","styleClass","w-full",1,"w-full",3,"click","disabled"]],template:function(r,n){if(r&1&&(C(0,"p-toast")(1,"p-confirmDialog"),i(2,"form",0)(3,"p-card",1),m(4,"translate"),m(5,"uppercase"),i(6,"div",2)(7,"div",3)(8,"div",4)(9,"div",5)(10,"label",6),o(11),m(12,"translate"),e(),C(13,"p-calendar",7),v(14,$e,2,0,"small",8),e(),i(15,"div",9)(16,"label",6),o(17),m(18,"translate"),e(),C(19,"input",10),e(),i(20,"div",9)(21,"label",6),o(22),m(23,"translate"),e(),C(24,"p-dropdown",11),v(25,Ge,2,0,"small",8),e(),i(26,"div",5)(27,"label",6),o(28),m(29,"translate"),e(),C(30,"p-dropdown",12),v(31,Re,2,0,"small",8),e()(),i(32,"div",13)(33,"div",9)(34,"label",6),o(35),m(36,"translate"),e(),C(37,"p-dropdown",14),v(38,Ae,2,0,"small",8),e(),i(39,"div",9)(40,"label",6),o(41),m(42,"translate"),e(),i(43,"input",15),g("change",function(){return n.changeTotalVenta()}),e(),v(44,Oe,2,0,"small",8),e(),i(45,"div",9)(46,"label",6),o(47),m(48,"translate"),e(),i(49,"input",15),g("change",function(){return n.changeTotalVenta()}),e(),v(50,Ye,2,0,"small",8),e(),i(51,"div",9)(52,"label",6),o(53),m(54,"translate"),e(),C(55,"input",16),v(56,qe,2,0,"small",8),e(),i(57,"div",9)(58,"label",6),o(59),m(60,"translate"),e(),C(61,"input",17),v(62,He,2,0,"small",8),e(),i(63,"div",18)(64,"label",19),o(65),m(66,"translate"),e(),i(67,"div",20)(68,"p-buttonGroup")(69,"p-button",21),m(70,"translate"),g("click",function(){return n.addDetail()}),e(),i(71,"p-button",22),m(72,"translate"),g("click",function(){return n.updateData()}),e()()()()(),i(73,"h4"),o(74,"Detalles"),e(),i(75,"p-table",23),v(76,ze,15,0,"ng-template",24)(77,Je,17,13,"ng-template",25),e()()(),v(78,Ke,4,3,"ng-template",26),e()()),r&2){let c,x,y,w,b,E,F,f;t(2),p("formGroup",n.salesForm),t(),p("header",d(5,43,d(4,41,"labels.register_sales"))),t(8),s(d(12,45,"sales.fechaVenta")),t(2),p("formControlName","fechaVenta"),t(),S(14,(c=n.salesForm.get("fechaVenta"))!=null&&c.invalid&&((c=n.salesForm.get("fechaVenta"))!=null&&c.touched)?14:-1),t(3),s(d(18,47,"sales.precio_total")),t(2),p("disabled",!0),t(3),s(d(23,49,"sales.id_cliente")),t(2),P(T(69,Pe)),p("formControlName","id_cliente")("options",n.clientes),t(),S(25,(x=n.salesForm.get("id_cliente"))!=null&&x.invalid&&((x=n.salesForm.get("id_cliente"))!=null&&x.touched)?25:-1),t(3),s(d(29,51,"sales.id_empleado")),t(2),p("formControlName","id_empleado")("options",n.empleados),t(),S(31,(y=n.salesForm.get("id_empleado"))!=null&&y.invalid&&((y=n.salesForm.get("id_empleado"))!=null&&y.touched)?31:-1),t(4),s(d(36,53,"sales.id_producto")),t(2),P(T(70,Pe)),p("formControlName","id_producto")("options",n.productos),t(),S(38,(w=n.salesForm.get("id_producto"))!=null&&w.invalid&&((w=n.salesForm.get("id_producto"))!=null&&w.touched)?38:-1),t(3),s(d(42,55,"sales.cantidad")),t(2),p("formControlName","cantidad"),t(),S(44,(b=n.salesForm.get("cantidad"))!=null&&b.invalid&&((b=n.salesForm.get("cantidad"))!=null&&b.touched)?44:-1),t(3),s(d(48,57,"sales.precioCompra")),t(2),p("formControlName","precioUnitario"),t(),S(50,(E=n.salesForm.get("precioUnitario"))!=null&&E.invalid&&((E=n.salesForm.get("precioUnitario"))!=null&&E.touched)?50:-1),t(3),s(d(54,59,"sales.precioUnitarioVenta")),t(2),p("formControlName","precioUnitarioVenta"),t(),S(56,(F=n.salesForm.get("precioUnitarioVenta"))!=null&&F.invalid&&((F=n.salesForm.get("precioUnitarioVenta"))!=null&&F.touched)?56:-1),t(3),s(d(60,61,"sales.totalVenta")),t(2),A("value",n.totalVenta),t(),S(62,(f=n.salesForm.get("totaCompra"))!=null&&f.invalid&&((f=n.salesForm.get("totaCompra"))!=null&&f.touched)?62:-1),t(3),s(d(66,63,"sales.options")),t(4),p("title",d(70,65,"label.add_detall")),t(2),p("title",d(72,67,"label.delet_detall")),t(4),p("value",n.detailView)("tableStyle",T(71,je))("styleClass","p-datatable-sm")}},dependencies:[re,ie,Z,ne,ee,te,ae,le,xe,ge,se,W,Q,de,me,he,ve,be,ue,ce,q,_e,fe,Ie,Te,Se,Ce,Ve,Fe,De,Ne,J]})}}return l})();export{Pt as default};
