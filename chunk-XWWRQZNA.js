import{b as le,c as se,d as de,e as me}from"./chunk-QICJ2XHG.js";import{a as oe}from"./chunk-KVPWR64H.js";import{a as re,b as ne}from"./chunk-OV7H44K2.js";import{j as Z}from"./chunk-HBCZXPSQ.js";import{b as ae}from"./chunk-OVNQVQR5.js";import{a as te,b as ie}from"./chunk-7F3ROMIE.js";import{a as K,b as Q,c as ee}from"./chunk-XRCNOI5B.js";import{J as $,K as z,Y as J,b as j,c as P,d as B,e as U,ea as W,fa as X,g as L,h as y,j as R,k as G,m as k,o as O,p as A,q as Y,s as q,x as H}from"./chunk-GGYH7DSO.js";import"./chunk-4YRY4IP2.js";import{a as T,i as b}from"./chunk-NM3HJ4DI.js";import{s as N,t as w}from"./chunk-JAFPLUWG.js";import{Mb as l,Nb as _,Sa as o,Ta as s,Tb as D,Ub as M,V as x,_ as E,bb as I,dc as c,ea as V,ec as u,hb as F,jb as m,ob as C,tb as n,ub as r,vb as p}from"./chunk-PQPLRZS3.js";var pe=(()=>{class e{#e=ee.URL_API;constructor(t){this.http=t}static{this.\u0275fac=function(i){return new(i||e)(E(T))}}static{this.\u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function ve(e,S){e&1&&(n(0,"small",7),l(1,"Error en el Fecha de Venta."),r())}function ge(e,S){e&1&&(n(0,"small",7),l(1,"Error en el Precio Total."),r())}function Fe(e,S){e&1&&(n(0,"small",7),l(1,"Error en el Cliente Seleccionado."),r())}function Ce(e,S){e&1&&(n(0,"small",7),l(1,"Error en el Empleado Seleccionado."),r())}function _e(e,S){e&1&&(n(0,"small",7),l(1,"Error en el Producto seleccionado."),r())}var Xe=(()=>{class e{constructor(t,i,a,d,f,h,v,g,ce){this.confirmationServ=t,this.ventasServ=i,this.productosServ=a,this.translate=d,this.translateLanService=f,this.fb=h,this.router=v,this.datePipe=g,this.toastServ=ce,this.detailView=[],this.stateInputs=I(!0),this.currentDate=this.datePipe.transform(new Date,"dd/MM/yyyy"),this.total=0,this.totalVenta=0,this.translateLanService.changeLanguage$.subscribe(ue=>this.translate.use(ue)),this.salesForm=this.fb.group({fechaVenta:[this.currentDate],total:[this.total],tokenSIN:[""],id_cliente:["",[y.required]],id_empleado:["",[y.required]],cantidad:[""],precioUnitario:[""],id_producto:[""]})}asignarValores(){let t=this.salesForm.value;return console.log(String(this.datePipe.transform(this.getLastDateOfYear(new Date().getFullYear()),"yyyy-MM-dd"))),this.ventasRegister={fechaVenta:String(this.datePipe.transform(new Date,"yyyy-MM-dd")),total:this.total,confactura:!0,token_SIN:"123456",id_cliente:t.id_cliente.id,id_empleado:t.id_empleado.id,detalle:this.detailView.map(i=>(console.log(i),{cantidad:i.cantidad,precioUnitarioVent:i.precioUnitario,precioUnitVenta:i.precioUnitarioVent,id_producto:i.id_producto}))},console.log(`console.log(this.comprasRegister);
 `,this.ventasRegister),this.ventasRegister}getLastDateOfYear(t){return new Date(t,11,31)}notifySuccess(){this.toastServ.showSuccess("Operation Successful","The action was completed successfully.")}notifyError(){this.toastServ.showError("Operation Failed","An error occurred while processing the action.")}getColorBackground(t){switch(t){case"Natural":return"#cccccc";case"Champan":return"#FBE7C6";case"Negro":return"#000000";case"Madera":return"#8B4513";default:return"#FFFFFF"}}getColor(t){switch(t){case"Natural":return"#000000";case"Champan":return"#000000";case"Negro":return"#FFFFFF";case"Madera":return"#FFFFFF";default:return"#FFFFFF"}}deleteDetail(t){this.detailView=this.detailView.filter(i=>i!==t),this.funcTotal(),this.cleanForms()}updateData(){console.log("updateData() { } ")}funcTotal(){this.total=this.detailView.reduce((t,i)=>{let a=Number(i.cantidad)||0,d=Number(i.precioUnitarioVent)||0;return t+a*d},0)}cleanForms(){this.salesForm.patchValue({total:this.total,id_producto:"",cantidad:"",precioUnitario:"",precioVenta:""},{emitEvent:!1}),this.totalVenta=0}static{this.\u0275fac=function(i){return new(i||e)(s(H),s(pe),s(oe),s(j),s(U),s(Y),s(b),s(w),s(me))}}static{this.\u0275cmp=V({type:e,selectors:[["app-sale-create"]],standalone:!0,features:[D([w]),M],decls:39,vars:34,consts:[[3,"formGroup"],[3,"header"],[1,"flex","flex-column","md:flex-row","sm:flex-row","w-full"],[1,"flex","flex-column","md:flex-row","gap-2","w-full"],[1,"flex","flex-wrap","justify-content-left","align-items-center","gap-2","pb-4","lg:w-full"],[1,"w-25rem"],["dateFormat","dd/mm/yy","type","text","styleClass","w-full",1,"w-full",3,"formControlName"],[2,"color","red"],[1,"flex","flex-wrap","justify-content-left","align-items-center","gap-2","pb-4","lg:w-full","px-2"],["pInputText","","type","text",1,"w-full",3,"formControlName"],["optionLabel","display","placeholder","Seleccionar Producto","styleClass","w-full",1,"w-full","lg:w-full",3,"formControlName","options"]],template:function(i,a){if(i&1&&(p(0,"p-toast")(1,"p-confirmDialog"),n(2,"form",0)(3,"p-card",1),c(4,"translate"),c(5,"uppercase"),n(6,"div",2)(7,"div",3)(8,"div",4)(9,"label",5),l(10),c(11,"translate"),r(),p(12,"p-calendar",6),F(13,ve,2,0,"small",7),r(),n(14,"div",8)(15,"label",5),l(16),c(17,"translate"),r(),p(18,"input",9),F(19,ge,2,0,"small",7),r(),n(20,"div",8)(21,"label",5),l(22),c(23,"translate"),r(),p(24,"p-dropdown",10),F(25,Fe,2,0,"small",7),r(),n(26,"div",8)(27,"label",5),l(28),c(29,"translate"),r(),p(30,"p-dropdown",10),F(31,Ce,2,0,"small",7),r(),n(32,"div",4)(33,"label",5),l(34),c(35,"translate"),r(),p(36,"p-dropdown",10),F(37,_e,2,0,"small",7),r()(),p(38,"hr"),r()()()),i&2){let d,f,h,v,g;o(2),m("formGroup",a.salesForm),o(),m("header",u(5,22,u(4,20,"labels.register_sales"))),o(7),_(u(11,24,"sales.fechaVenta")),o(2),m("formControlName","fechaVenta"),o(),C(13,(d=a.salesForm.get("fechaVenta"))!=null&&d.invalid&&((d=a.salesForm.get("fechaVenta"))!=null&&d.touched)?13:-1),o(3),_(u(17,26,"sales.precio_total")),o(2),m("formControlName","total"),o(),C(19,(f=a.salesForm.get("total"))!=null&&f.invalid&&((f=a.salesForm.get("total"))!=null&&f.touched)?19:-1),o(3),_(u(23,28,"sales.id_cliente")),o(2),m("formControlName","id_cliente")("options",a.productos),o(),C(25,(h=a.salesForm.get("id_cliente"))!=null&&h.invalid&&((h=a.salesForm.get("id_cliente"))!=null&&h.touched)?25:-1),o(3),_(u(29,30,"sales.id_empleado")),o(2),m("formControlName","id_empleado")("options",a.productos),o(),C(31,(v=a.salesForm.get("id_empleado"))!=null&&v.invalid&&((v=a.salesForm.get("id_empleado"))!=null&&v.touched)?31:-1),o(3),_(u(35,32,"sales.producto")),o(2),m("formControlName","id_producto")("options",a.productos),o(),C(37,(g=a.salesForm.get("id_producto"))!=null&&g.invalid&&((g=a.salesForm.get("id_producto"))!=null&&g.touched)?37:-1)}},dependencies:[q,k,L,R,G,O,A,ie,te,B,P,z,$,X,W,ae,J,N,Q,K,le,Z,ne,re,de,se]})}}return e})();export{Xe as default};
