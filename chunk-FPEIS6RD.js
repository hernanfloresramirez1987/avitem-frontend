import{a as oe,b as le,c as pe,d as ce}from"./chunk-U754WE7Z.js";import{c as ee,d as te,e as ie,g as ae,k as re}from"./chunk-ZP6HYMN5.js";import"./chunk-4O3W2NBE.js";import"./chunk-OGQHURAE.js";import"./chunk-GH36OMHH.js";import"./chunk-7C7CYQMH.js";import{s as ne,t as se,u as me,v as de}from"./chunk-O4MNLDLA.js";import"./chunk-XMSLJEE3.js";import"./chunk-44UL6WXM.js";import{Ia as K,Ja as G,Oa as X,Pa as Y,Qa as Z,V as q,Z as J}from"./chunk-L6F5SHP5.js";import{k as H,r as N,w as U}from"./chunk-A5I2MG6G.js";import"./chunk-F2X3VGZZ.js";import{$a as s,Ab as F,Bb as L,Ca as a,Cb as M,Fb as O,Gb as n,Ha as v,Hb as d,Ib as h,Na as A,P as $,Ta as C,V as j,Xb as l,Yb as p,a as y,aa as w,ba as I,fb as T,hb as k,ib as W,jb as E,jc as z,kb as r,kc as Q,lb as o,mb as u,oa as g,q as D,qb as R,ub as B,vb as f,yb as x}from"./chunk-4PTIY3UM.js";var S=class t{#e=de.URL_API;http=j(N);getAllWarehouses=i=>this.http.post(`${this.#e}inventarios/all_filter`,i);static \u0275fac=function(e){return new(e||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})};var _e=["dt1"],he=["filter"],ve=(t,i)=>i.field;function ge(t,i){if(t&1){let e=R();r(0,"div",7)(1,"p-button",8),l(2,"translate"),B("click",function(){w(e);let _=f(),b=O(5);return I(_.clear(b))}),o()()}t&2&&(a(),s("label",p(2,2,"labels.clear"))("outlined",!0))}function Ce(t,i){t&1&&(r(0,"th",12)(1,"div",16),n(2),l(3,"translate"),l(4,"uppercase"),u(5,"p-sortIcon",17),o()()),t&2&&(s("pSortableColumn","id"),a(2),h("",p(4,5,p(3,3,"labels.id"))," "),a(3),s("field","id"))}function xe(t,i){if(t&1&&(r(0,"th",13)(1,"div",16),n(2),l(3,"translate"),l(4,"uppercase"),u(5,"p-sortIcon",17),o()()),t&2){let e=f().$implicit;x("pSortableColumn",e.field),a(2),h("",p(4,5,p(3,3,"labels.idLote"))," "),a(3),s("field",e.field)}}function Se(t,i){if(t&1&&(r(0,"th",14)(1,"div",16),n(2),l(3,"translate"),l(4,"uppercase"),u(5,"p-sortIcon",17),o()()),t&2){let e=f().$implicit;x("pSortableColumn",e.field),a(2),h("",p(4,5,p(3,3,"labels.producto"))," "),a(3),s("field",e.field)}}function be(t,i){if(t&1&&(r(0,"th",14)(1,"div",16),n(2),l(3,"translate"),l(4,"uppercase"),u(5,"p-sortIcon",17),o()()),t&2){let e=f().$implicit;x("pSortableColumn",e.field),a(2),h("",p(4,5,p(3,3,"labels.almacen"))," "),a(3),s("field",e.field)}}function ye(t,i){if(t&1&&(r(0,"th",15)(1,"div",16),n(2),l(3,"translate"),l(4,"uppercase"),u(5,"p-sortIcon",17),o()()),t&2){let e=f().$implicit;s("pSortableColumn",e.field),a(2),h("",p(4,5,p(3,3,"labels.cantreserv"))," "),a(3),s("field",e.field)}}function we(t,i){if(t&1&&(r(0,"th",15)(1,"div",16),n(2),l(3,"translate"),l(4,"uppercase"),u(5,"p-sortIcon",17),o()()),t&2){let e=f().$implicit;s("pSortableColumn",e.field),a(2),h("",p(4,5,p(3,3,"labels.cantdespach"))," "),a(3),s("field",e.field)}}function Ie(t,i){if(t&1&&(r(0,"th",15)(1,"div",16),n(2),l(3,"translate"),l(4,"uppercase"),u(5,"p-sortIcon",17),o()()),t&2){let e=f().$implicit;s("pSortableColumn",e.field),a(2),h("ss",p(4,5,p(3,3,"labels.cantidadDespachada"))," "),a(3),s("field",e.field)}}function Te(t,i){if(t&1&&(r(0,"th",14)(1,"div",16),n(2),l(3,"uppercase"),u(4,"p-sortIcon",17),o()()),t&2){let e=f().$implicit;s("pSortableColumn",e.field),a(2),h("",p(3,3,e.field)," "),a(2),s("field",e.field)}}function We(t,i){if(t&1&&C(0,Ce,6,7,"th",12)(1,xe,6,7,"th",13)(2,Se,6,7,"th",14)(3,be,6,7,"th",14)(4,ye,6,7,"th",15)(5,we,6,7,"th",15)(6,Ie,6,7,"th",15)(7,Te,5,5,"th",14),t&2){let e,c=i.$implicit;T((e=c.field)==="id"?0:e==="idLote"?1:e==="producto"?2:e==="almacen"?3:e==="cantidadReservada"?4:e==="cantidadDespachada"?5:e==="cantidadDespachada"?6:7)}}function Ee(t,i){if(t&1&&u(0,"appcommon-filter-input",18),t&2){let e=f().$implicit;s("field",e.field)}}function Re(t,i){t&1&&(r(0,"th",10),C(1,Ee,1,1,"appcommon-filter-input",18),o()),t&2&&(a(),T(1))}function Be(t,i){t&1&&(r(0,"th",11),n(1,"cargando"),o())}function Fe(t,i){if(t&1&&(r(0,"tr"),u(1,"th",9),W(2,We,8,1,null,null,ve),o(),r(4,"tr"),W(5,Re,2,1,"th",10,k,!1,Be,2,0,"th",11),o()),t&2){let e=i.$implicit;a(2),E(e),a(3),E(e)}}function Le(t,i){if(t&1&&(r(0,"tr"),u(1,"td"),r(2,"td"),n(3),o(),r(4,"td"),n(5),o(),r(6,"td"),n(7),o(),r(8,"td"),n(9),o(),r(10,"td"),n(11),o(),r(12,"td"),n(13),o(),r(14,"td"),n(15),o(),r(16,"td"),n(17),o(),r(18,"td"),n(19),o(),r(20,"td"),n(21),o(),r(22,"td"),n(23),o(),r(24,"td"),n(25),o(),r(26,"td"),n(27),o(),r(28,"td"),n(29),o()()),t&2){let e=i.$implicit;a(3),d(e.id),a(2),d(e.idLote),a(2),d(e.producto==null?null:e.producto.nombre),a(2),d(e.almacen==null?null:e.almacen.nombre),a(2),d(e.cantidadReservada),a(2),d(e.cantidadDespachada),a(2),d(e.cantidadStock),a(2),d(e.cant_ingresos),a(2),d(e.cant_salidas),a(2),d(e.cant_transferencias),a(2),d(e.precio_compra),a(2),d(e.precio_venta),a(2),d(e.sucursal),a(2),d(e.stock)}}function Me(t,i){}var V=class t{constructor(i,e,c,_,b,P){this.warehouseServ=i;this.filterservice=e;this.translate=c;this.translateLanService=_;this.messageService=b;this.router=P;this.translateLanService.changeLanguage$.subscribe(m=>this.translate.use(m)),Q(()=>{this.warehouseServ.getAllWarehouses(this.warehousesdto()).pipe(D(m=>(console.log(m),{data:Array.isArray(m.data)?[...m.data]:[],metadata:{page:m.metadata.page,rows:m.metadata.rows,total_records:m.metadata.total_records},loading:!1,error:null}))).subscribe({next:m=>{console.log(m),console.log(y({},this.warehousesdto())),this.stateValues.set({data:m.data,metadata:m.metadata,loading:!1,error:null}),console.log(this.stateValues())},error:m=>{this.stateValues.set({data:[],metadata:{page:0,rows:0,total_records:0},loading:!1,error:m}),console.log("console.log('', err):   ",m,this.stateValues())},complete:()=>{console.log("console.log('', this.stateValues()):   ",this.stateValues())}})})}table;filter;stateValues=g({data:[],metadata:{page:0,rows:0,total_records:0},loading:!0,error:null});searchTxt=g([]);warehousesdto=g({config:{populate_data:!0,page:1,rows:15,sort_field:[]},filter:{}});tablecon=oe.cantidadRegistros;stateIni=!1;allowedColumns=["id","idLote","producto","almacen","cantidadStock","cantidadDespachada","cant_salidas","cant_transferencias","precio_compra","precio_venta","sucursal"];columns=this.allowedColumns;columnsSelectSignal=z(()=>this.columns.map(i=>({field:i,header:i.charAt(0).toUpperCase()+i.slice(1)})));expandedRows={};clear=i=>{i.clear()};getDataPaged(i){i.filters&&this.stateIni!==!1&&this.warehousesdto.update(()=>({config:{populate_data:!1,page:(i.first||0)/Number(i.rows)+1,sort_field:i.multiSortMeta?i.multiSortMeta.filter(e=>e.field):[],rows:Number(i.rows)},filter:y({},this.filterservice.applyFilterNew(i.filters,this.warehousesdto().filter))})),this.stateIni=!0}static \u0275fac=function(e){return new(e||t)(v(S),v(ce),v(X),v(ne),v(q),v(U))};static \u0275cmp=A({type:t,selectors:[["app-warehouse"]],viewQuery:function(e,c){if(e&1&&(F(_e,5),F(he,5)),e&2){let _;L(_=M())&&(c.table=_.first),L(_=M())&&(c.filter=_.first)}},decls:10,vars:23,consts:[["dt1",""],[3,"header","subheader"],["dataKey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} items","styleClass","p-datatable-sm p-datatable-gridlines p-0 m-0","responsiveLayout","scroll","scrollHeight","70vh",3,"onLazyLoad","value","paginator","rows","loading","rowHover","rowsPerPageOptions","lazy","columns","reorderableColumns","totalRecords","sortMode","customSort","scrollable","paginatorPosition","showCurrentPageReport"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","footer"],[1,"flex","flex-wrap","justify-content-end","gap-2"],["icon","pi pi-filter-slash",3,"click","label","outlined"],["rowspan","2"],[2,"min-width","11rem"],[2,"min-width","8rem"],["pReorderableColumn","",2,"min-width","1rem",3,"pSortableColumn"],["pReorderableColumn","",2,"min-width","8rem",3,"pSortableColumn"],["pReorderableColumn","",2,"min-width","20rem",3,"pSortableColumn"],["pReorderableColumn","",2,"min-width","10rem",3,"pSortableColumn"],[1,"flex","justify-content-between","align-items-left"],[3,"field"],["type","text",3,"field"]],template:function(e,c){if(e&1){let _=R();r(0,"p-card",1),l(1,"translate"),l(2,"uppercase"),l(3,"translate"),r(4,"p-table",2,0),B("onLazyLoad",function(P){return w(_),I(c.getDataPaged(P))}),C(6,ge,3,4,"ng-template",3)(7,Fe,8,1,"ng-template",4)(8,Le,30,14,"ng-template",5)(9,Me,0,0,"ng-template",6),o()()}e&2&&(s("header",p(2,19,p(1,17,"pages.warehouse")))("subheader",p(3,21,"pages.warehouse_subheader")),a(4),s("value",c.stateValues().data)("paginator",!0)("rows",c.stateValues().metadata.rows)("loading",c.stateValues().loading)("rowHover",!0)("rowsPerPageOptions",c.tablecon)("lazy",!0)("columns",c.columnsSelectSignal())("reorderableColumns",!0)("totalRecords",c.stateValues().metadata.total_records)("sortMode","multiple")("customSort",!0)("scrollable",!0)("paginatorPosition","bottom")("showCurrentPageReport",!0))},dependencies:[me,se,J,G,K,Z,Y,H,re,ee,te,ae,ie,pe,le],encapsulation:2,changeDetection:0})};export{V as default};
