import{a as pe}from"./chunk-ZMEZRAWX.js";import{a as ee,b as te,c as ie,f as ne,g as ae,h as le}from"./chunk-PT4FTKDN.js";import{b as J,c as W,d as X,e as Y,i as Z}from"./chunk-WB22MYLO.js";import"./chunk-5PQNPMCX.js";import"./chunk-M7UVUUMQ.js";import"./chunk-X25LBHHL.js";import"./chunk-KI67JIP4.js";import{s as oe,t as re}from"./chunk-72EFRCC2.js";import"./chunk-TEPZEHNQ.js";import"./chunk-HKUDOG6E.js";import{Na as q,Oa as G,b as O,c as H,ca as U,d as K,e as N}from"./chunk-EBX3HSBQ.js";import{k as z,z as Q}from"./chunk-NZR6XVXW.js";import"./chunk-F2X3VGZZ.js";import{$ as S,Aa as a,Bb as M,Fa as g,Ia as h,Ib as R,Jb as D,Kb as B,Lb as m,Ma as k,Nb as _,Sa as b,_ as v,ac as c,bc as d,cb as p,dc as L,ib as w,kb as T,lb as I,ma as y,mb as V,n as P,nb as s,ob as r,pb as u,pc as A,qc as j,tb as F,xb as x,yb as o}from"./chunk-5DVEH5ZE.js";import{a as E}from"./chunk-C6Q5SG76.js";var se=["dt1"],me=["menu"],ce=["filter"];function de(e,i){if(e&1){let t=F();s(0,"div",8)(1,"p-button",9),c(2,"translate"),x("click",function(){v(t);let f=o(),C=B(4);return S(f.clear(C))}),r(),s(3,"p-button",10),x("click",function(){v(t);let f=o();return S(f.add())}),r()()}e&2&&(a(),p("label",d(2,3,"labels.clear"))("outlined",!0),a(2),p("outlined",!0))}function _e(e,i){e&1&&(s(0,"th",14)(1,"div",19),m(2),c(3,"translate"),c(4,"uppercase"),u(5,"p-sortIcon",20),r()()),e&2&&(p("pSortableColumn","id"),a(2),_("",d(4,5,d(3,3,"labels.id"))," "),a(3),p("field","id"))}function ue(e,i){if(e&1&&(s(0,"th",15)(1,"div",19),m(2),c(3,"translate"),c(4,"uppercase"),u(5,"p-sortIcon",20),r()()),e&2){let t=o().$implicit;M("pSortableColumn",t.field),a(2),_("",d(4,5,d(3,3,"labels.fechaVenta"))," "),a(3),p("field",t.field)}}function fe(e,i){if(e&1&&(s(0,"th",16)(1,"div",19),m(2),c(3,"translate"),c(4,"uppercase"),u(5,"p-sortIcon",20),r()()),e&2){let t=o().$implicit;p("pSortableColumn",t.field),a(2),_("",d(4,5,d(3,3,"labels.total"))," "),a(3),p("field",t.field)}}function ge(e,i){if(e&1&&(s(0,"th",17)(1,"div",19),m(2),c(3,"translate"),c(4,"uppercase"),u(5,"p-sortIcon",20),r()()),e&2){let t=o().$implicit;M("pSortableColumn",t.field),a(2),_("",d(4,5,d(3,3,"labels.proveedor"))," "),a(3),p("field",t.field)}}function Ce(e,i){if(e&1&&(s(0,"th",18)(1,"div",19),m(2),c(3,"translate"),c(4,"uppercase"),u(5,"p-sortIcon",20),r()()),e&2){let t=o().$implicit;M("pSortableColumn",t.field),a(2),_("",d(4,5,d(3,3,"labels."+t.field))," "),a(3),p("field",t.field)}}function ve(e,i){if(e&1&&b(0,_e,6,7,"th",14)(1,ue,6,7,"th",15)(2,fe,6,7,"th",16)(3,ge,6,7,"th",17)(4,Ce,6,7,"th",18),e&2){let t,n=i.$implicit;w((t=n.field)==="id"?0:t==="fechaventa"?1:t==="total"?2:t==="proveedor"?3:4)}}function Se(e,i){if(e&1&&u(0,"appcommon-filter-input",21),e&2){let t=o().$implicit;p("field",t.field)}}function be(e,i){e&1&&(s(0,"th",12),b(1,Se,1,1,"appcommon-filter-input",21),r()),e&2&&(a(),w(1))}function xe(e,i){e&1&&(s(0,"th",13),m(1,"cargando"),r())}function ye(e,i){if(e&1&&(s(0,"tr"),u(1,"th",11),I(2,ve,5,1,null,null,T),r(),s(4,"tr"),I(5,be,2,1,"th",12,T,!1,xe,2,0,"th",13),r()),e&2){let t=i.$implicit;a(2),V(t),a(3),V(t)}}function he(e,i){if(e&1&&m(0),e&2){let t=o().$implicit,n=o().$implicit;_(" ",n[t.field]," ")}}function we(e,i){if(e&1&&m(0),e&2){let t=o().$implicit,n=o().$implicit;_(" ",n[t.field]," ")}}function Te(e,i){if(e&1&&m(0),e&2){let t=o().$implicit,n=o().$implicit;_(" ",n[t.field]," ")}}function Ie(e,i){if(e&1&&m(0),e&2){let t=o().$implicit,n=o().$implicit;_(" ",n[t.field]," ")}}function Ve(e,i){if(e&1&&(s(0,"td"),b(1,he,1,1)(2,we,1,1)(3,Te,1,1)(4,Ie,1,1),r()),e&2){let t,n=i.$implicit;a(),w((t=n.field)==="fechaventa"?1:t==="total"?2:t==="proveedor"?3:4)}}function Fe(e,i){if(e&1){let t=F();s(0,"tr")(1,"td",22)(2,"p-button",23),x("click",function(f){v(t),o();let C=B(1);return S(C.toggle(f))}),r()(),I(3,Ve,5,1,"td",null,T),r()}if(e&2){let t=i.columns;a(2),p("icon","pi pi-ellipsis-v")("text",!0),a(),V(t)}}var $=class e{constructor(i,t,n,f,C){this.translateLanService=i;this.translate=t;this.filterservice=n;this.ventasServ=f;this.router=C;this.translateLanService.changeLanguage$.subscribe(l=>this.translate.use(l)),j(()=>{console.log("hola ...... "),this.ventasServ.getVentas(this.ventasdto()).pipe(P(l=>(console.log("console.log('', t):   ",l),{data:Array.isArray(l)?[...l]:[],page:0,rows:0,total_records:0,loading:!1,error:null}))).subscribe({next:l=>{console.log(E({},this.ventasdto())),console.log(l),this.stateValues.set({data:l.data&&l.data.length>0?[...l.data]:[],page:0,rows:0,total_records:0,loading:!1,error:null})},error:l=>{console.log(l),this.stateValues.set({data:[],page:0,rows:0,total_records:0,loading:!0,error:l})}})})}table=h("dt1");menu=h("menu");filter=h("filter");stateValues=y({data:[],page:0,rows:0,total_records:0,loading:!0,error:null});searchTxt=y([]);ventasdto=y({config:{populate_data:!0,page:1,rows:15,sort_field:[]},filter:{}});tablecon=ee.cantidadRegistros;stateIni=!1;selectedItemId=null;items=[{label:"View",icon:"pi pi-eye",routerLink:"/transactions/ventas/detail/214"},{label:"Download",icon:"pi pi-download",items:[{label:"Pdf",icon:"pi pi-file-pdf",style:{color:"crimson"},command:i=>{console.log(i)}}]}];title="pages.sales";expandedRows={};allowedColumns=["id","fechaventa","total","cliente"];columns=this.allowedColumns;columnsSelectSignal=A(()=>this.columns.map(i=>({field:i,header:i.charAt(0).toUpperCase()+i.slice(1)})));getDataPaged(i){i.filters&&this.stateIni!==!1&&this.ventasdto.update(()=>({config:{populate_data:!1,page:(i.first||0)/Number(i.rows)+1,sort_field:i.multiSortMeta?i.multiSortMeta.filter(t=>t.field):[],rows:Number(i.rows)},filter:E({},this.filterservice.applyFilterNew(i.filters,this.ventasdto().filter))})),this.stateIni=!0}clear=i=>{this.ventasdto.set({config:{populate_data:!1,page:1,rows:15,sort_field:[]},filter:{}}),i.clear()};add=()=>this.router.navigate(["/transactions/ventas/create"]);static \u0275fac=function(t){return new(t||e)(g(N),g(O),g(le),g(pe),g(Q))};static \u0275cmp=k({type:e,selectors:[["app-sales"]],viewQuery:function(t,n){t&1&&(R(n.table,se,5),R(n.menu,me,5),R(n.filter,ce,5)),t&2&&D(3)},decls:11,vars:18,consts:[["menu",""],["dt1",""],["header",""],["body",""],[3,"model","popup"],[3,"header"],["dataKey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} employees","styleClass","p-datatable-sm","responsiveLayout","scroll","scrollHeight","60vh",3,"onLazyLoad","value","paginator","loading","expandedRowKeys","rows","rowHover","rowsPerPageOptions","lazy","columns","reorderableColumns","totalRecords","sortMode","customSort","scrollable","paginatorPosition"],["pTemplate","caption"],[1,"flex","flex-wrap","justify-content-end","gap-2"],["icon","pi pi-filter-slash",3,"click","label","outlined"],["icon","pi pi-plus","severity","primary",1,"pr-1",3,"click","outlined"],["rowspan","2"],[2,"min-width","11rem"],[2,"min-width","12rem"],["pReorderableColumn","",2,"min-width","1rem",3,"pSortableColumn"],["pReorderableColumn","",2,"min-width","20rem",3,"pSortableColumn"],["pReorderableColumn","",2,"min-width","25rem",3,"pSortableColumn"],["pReorderableColumn","",2,"min-width","10rem",3,"pSortableColumn"],["pReorderableColumn","",3,"pSortableColumn"],[1,"flex","justify-content-between","align-items-left"],[3,"field"],["type","text",3,"field"],[1,"flex","py-4"],["type","button",1,"p-button-text","p-button-rounded",3,"click","icon","text"]],template:function(t,n){if(t&1){let f=F();u(0,"p-tieredmenu",4,0),s(2,"p-card",5)(3,"p-table",6,1),x("onLazyLoad",function(l){return v(f),S(n.getDataPaged(l))}),m(5," > "),b(6,de,4,5,"ng-template",7)(7,ye,8,1,"ng-template",null,2,L)(9,Fe,5,2,"ng-template",null,3,L),r()()}t&2&&(p("model",n.items)("popup",!0),a(2),p("header",n.title),a(),p("value",n.stateValues().data)("paginator",!0)("loading",n.stateValues().loading)("expandedRowKeys",n.expandedRows)("rows",n.stateValues().data.length)("rowHover",!0)("rowsPerPageOptions",n.tablecon)("lazy",!0)("columns",n.columnsSelectSignal())("reorderableColumns",!0)("totalRecords",n.stateValues().total_records)("sortMode","multiple")("customSort",!0)("scrollable",!0)("paginatorPosition",n.stateValues().data&&n.stateValues().data.length>50?"both":"bottom"))},dependencies:[K,H,re,oe,U,Z,J,W,Y,X,G,q,ae,ne,z,ie,te],encapsulation:2})};export{$ as default};
