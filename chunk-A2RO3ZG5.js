import{a as be}from"./chunk-OFSYLXU5.js";import{a as ge}from"./chunk-2IF7ZH3D.js";import{a as _e}from"./chunk-Q2L4726D.js";import{a as N}from"./chunk-G255QGHI.js";import{a as K}from"./chunk-UYIDI6XF.js";import{b as $,c as J,e as z}from"./chunk-IJWSAIOW.js";import{i as pe,j as se,l as ce,m as me,n as ue,s as fe,t as ve}from"./chunk-QXMRRD5J.js";import{E as le,F as de,g as W,h as b,j as X,k as Y,m as Z,o as ee,p as te,r as re,s as ie,t as oe,u as ne,v as ae}from"./chunk-TLDPOR5N.js";import{d as M,j as U,k as H}from"./chunk-NU7MKXHP.js";import"./chunk-F2X3VGZZ.js";import{ea as Q}from"./chunk-S5MQWB2L.js";import{r as G,s as T}from"./chunk-OF6IZINW.js";import{$ as k,Aa as t,Fa as m,Ma as R,Mb as p,N as y,Nb as _,Ob as C,Sa as u,T as F,Ub as O,Vb as q,_ as L,cb as c,cc as l,dc as d,ib as g,nb as n,ob as r,pb as f,tb as A,yb as j,zb as E}from"./chunk-H3HIGMDG.js";import"./chunk-C6Q5SG76.js";var B=class e{#e=N.URL_API;http=F(M);getAllCategolias=()=>this.http.get(`${this.#e}categorias`);static \u0275fac=function(s){return new(s||e)};static \u0275prov=y({token:e,factory:e.\u0275fac,providedIn:"root"})};var D=class e{#e=N.URL_API;http=F(M);getAllColores=()=>this.http.get(`${this.#e}colores`);static \u0275fac=function(s){return new(s||e)};static \u0275prov=y({token:e,factory:e.\u0275fac,providedIn:"root"})};var Pe=()=>["/inventory/products"];function xe(e,i){e&1&&(n(0,"small",9),p(1,"Error en el Nombre."),r())}function we(e,i){e&1&&(n(0,"small",9),p(1,"Error en el Descripcion."),r())}function Ie(e,i){e&1&&(n(0,"span",9),p(1),l(2,"translate"),r()),e&2&&(t(),C("Error en el ",d(2,1,"labels.fechaIngreso"),"."))}function ye(e,i){e&1&&(n(0,"span",9),p(1),l(2,"translate"),r()),e&2&&(t(),C("Error en el ",d(2,1,"labels.unidadMedida"),"."))}function Fe(e,i){e&1&&(n(0,"span",9),p(1),l(2,"translate"),r()),e&2&&(t(),C("Error en el ",d(2,1,"labels.id_color"),"."))}function Ee(e,i){e&1&&(n(0,"span",9),p(1),l(2,"translate"),r()),e&2&&(t(),C("Error en el ",d(2,1,"labels.codigoProducto"),"."))}function Te(e,i){e&1&&(n(0,"span",9),p(1),l(2,"translate"),r()),e&2&&(t(),C("Error en el ",d(2,1,"labels.id_proveedor"),"."))}function Me(e,i){e&1&&(n(0,"span",9),p(1),l(2,"translate"),r()),e&2&&(t(),C("Error en el ",d(2,1,"labels.id_categoria"),"."))}function Ne(e,i){if(e&1){let s=A();n(0,"div",24),f(1,"p-button",25),n(2,"p-button",26),j("click",function(){L(s);let v=E();return k(v.cleanAll())}),r(),n(3,"p-button",27),j("click",function(){L(s);let v=E();return k(v.saveProcto())}),r()()}if(e&2){let s=E();t(),c("routerLink",q(2,Pe)),t(2),c("disabled",!s.registroForm.valid)}}var V=class e{constructor(i,s,o,v,h,S,P,x,w){this.categoriasServ=i;this.coloresServi=s;this.proveedoresServ=o;this.productosServ=v;this.translate=h;this.translateLanService=S;this.fb=P;this.router=x;this.datePipe=w;this.translateLanService.changeLanguage$.subscribe(a=>this.translate.use(a)),this.currentDate=this.datePipe.transform(new Date,"dd/MM/yyyy")||"",this.registroForm=this.fb.group({nombre:["",[b.required]],descripcion:[""],fechaIngreso:[this.currentDate,b.required],unidadMedida:["",b.required],codigoProducto:["",b.required],id_color:["",b.required],id_proveedor:["",b.required],id_categoria:["",b.required]}),this.productosServ.getUnidsMedida().subscribe(a=>this.unidades=a),this.proveedoresServ.postProveedoresSearch(this.proveedorDto).subscribe({next:a=>this.proveedores=a,error:a=>console.error("Error al obtener proveedores:",a)}),this.categoriasServ.getAllCategolias().subscribe({next:a=>this.categorias=a,error:a=>console.error("Error al obtener categorias:",a)}),this.coloresServi.getAllColores().subscribe({next:a=>{this.colores=a,console.log(this.colores)},error:a=>console.error("Error al obtener proveedores:",a)})}registroForm;categorias;colores;unidades;proveedores;proveedorDto;productoRegister;currentDate;getColorBackground(i){switch(i){case"Nat":return"gray";case"Cha":return"#FBE7C6";case"Neg":return"#000000";case"Mad":return"#8B4513";default:return"#FFFFFF"}}saveProcto(){console.log(this.asignarValores()),this.productosServ.postSaveProduct(this.asignarValores()).subscribe(i=>{i.CodigoEstado==="201"&&this.router.navigate(["inventory/products"])})}asignarValores(){let i=this.registroForm.value,o=new Date(i.fechaIngreso).toISOString().split("T")[0];return this.productoRegister={p_nombre:i.nombre,p_descripcion:i.descripcion,p_cantidadStock:0,p_fechaIngreso:o,p_unidadMedida:i.unidadMedida.medida,p_codigoProducto:i.codigoProducto,p_idProveedor:Number(i.id_proveedor.id),p_idCategoria:Number(i.id_color.id),p_idColor:Number(i.id_categoria.id),p_state:1}}cleanAll(){this.registroForm.patchValue({total:"",nombre:"",descripcion:"",fechaIngreso:new Date,unidadMedida:"",codigoProducto:"",id_color:"",id_proveedor:"",id_categoria:""},{emitEvent:!1})}static \u0275fac=function(s){return new(s||e)(m(B),m(D),m(_e),m(be),m($),m(z),m(re),m(U),m(T))};static \u0275cmp=R({type:e,selectors:[["app-product-create"]],features:[O([T])],decls:63,vars:57,consts:[[3,"formGroup"],[3,"header","subheader"],[1,"flex","flex-row"],[1,"col-12","md:col-12","w-full"],[1,"row-auto"],[1,"flex","md:flex-row","flex-row","w-full"],[1,"flex","flex-wrap","justify-content-left","align-items-center","gap-2","p-2","lg:w-full","md:w-full","w-full"],["for","nombre"],["pInputText","","type","text",1,"w-full",3,"formControlName","fluid"],[2,"color","red"],["for","nit"],["for","fechaIngreso",1,"w-15rem"],["styleClass","w-full",1,"w-full","lg:w-full",3,"formControlName"],["for","unidadMedida",1,"w-15rem"],["optionLabel","medida","styleClass","w-full","placeholder","Seleccionar una Unidad",1,"w-full","lg:w-full",3,"options","formControlName"],["for","color",1,"w-15rem"],["optionLabel","color","styleClass","w-full","placeholder","Seleccionar un Color",1,"w-full","lg:w-full",3,"options","formControlName"],["for","codigoProducto",1,"w-15rem"],["pInputText","","type","text",1,"w-full",3,"formControlName"],["for","proveedor",1,"w-15rem"],["optionLabel","empresa","styleClass","w-full","placeholder","Select un Proveedor",1,"w-full","lg:w-full",3,"formControlName","options","editable"],["for","LastName",1,"w-15rem"],["optionLabel","nombre","styleClass","w-full","placeholder","Select una Categoria",1,"w-full","lg:w-full",3,"formControlName","options","editable"],["pTemplate","footer"],[1,"flex","gap-3","mt-1"],["label","Cancel","severity","danger","styleClass","w-full",1,"w-full",3,"routerLink"],["label","Limpiar","severity","secondary","styleClass","w-full",1,"w-full",3,"click"],["label","Save","styleClass","w-full",1,"w-full",3,"click","disabled"]],template:function(s,o){if(s&1&&(n(0,"form",0)(1,"p-card",1),l(2,"translate"),l(3,"uppercase"),l(4,"translate"),n(5,"div",2)(6,"div",3)(7,"div",4)(8,"div",5)(9,"div",6)(10,"label",7),p(11),l(12,"translate"),r(),f(13,"input",8),u(14,xe,2,0,"small",9),r(),n(15,"div",6)(16,"label",10),p(17),l(18,"translate"),r(),f(19,"input",8),u(20,we,2,0,"small",9),r()(),n(21,"div",5)(22,"div",6)(23,"label",11),p(24),l(25,"translate"),r(),f(26,"p-datepicker",12),u(27,Ie,3,3,"span",9),r(),n(28,"div",6)(29,"label",13),p(30),l(31,"translate"),r(),f(32,"p-select",14),u(33,ye,3,3,"span",9),r()()()(),n(34,"div",3)(35,"div",4)(36,"div",5)(37,"div",6)(38,"label",15),p(39),l(40,"translate"),r(),f(41,"p-select",16),u(42,Fe,3,3,"span",9),r(),n(43,"div",6)(44,"label",17),p(45),l(46,"translate"),r(),f(47,"input",18),u(48,Ee,3,3,"span",9),r()(),n(49,"div",5)(50,"div",6)(51,"label",19),p(52),l(53,"translate"),r(),f(54,"p-select",20),u(55,Te,3,3,"span",9),r(),n(56,"div",6)(57,"label",21),p(58),l(59,"translate"),r(),f(60,"p-select",22),u(61,Me,3,3,"span",9),r()()()()(),u(62,Ne,4,3,"ng-template",23),r()()),s&2){let v,h,S,P,x,w,a,I;c("formGroup",o.registroForm),t(),c("header",d(3,37,d(2,35,"pages.register_product")))("subheader",d(4,39,"labels.form_products")),t(10),_(d(12,41,"labels.nombre")),t(2),c("formControlName","nombre")("fluid",!0),t(),g((v=o.registroForm.get("nombre"))!=null&&v.invalid&&((v=o.registroForm.get("nombre"))!=null&&v.touched)?14:-1),t(3),_(d(18,43,"labels.descripcion")),t(2),c("formControlName","descripcion")("fluid",!0),t(),g((h=o.registroForm.get("descripcion"))!=null&&h.invalid&&((h=o.registroForm.get("descripcion"))!=null&&h.touched)?20:-1),t(4),_(d(25,45,"labels.fechaIngreso")),t(2),c("formControlName","fechaIngreso"),t(),g((S=o.registroForm.get("fechaIngreso"))!=null&&S.invalid&&((S=o.registroForm.get("fechaIngreso"))!=null&&S.touched)?27:-1),t(3),_(d(31,47,"labels.unidadMedida")),t(2),c("options",o.unidades)("formControlName","unidadMedida"),t(),g((P=o.registroForm.get("unidadMedida"))!=null&&P.invalid&&((P=o.registroForm.get("unidadMedida"))!=null&&P.touched)?33:-1),t(6),_(d(40,49,"labels.color")),t(2),c("options",o.colores)("formControlName","id_color"),t(),g((x=o.registroForm.get("id_color"))!=null&&x.invalid&&((x=o.registroForm.get("id_color"))!=null&&x.touched)?42:-1),t(3),_(d(46,51,"labels.codigoProducto")),t(2),c("formControlName","codigoProducto"),t(),g((w=o.registroForm.get("codigoProducto"))!=null&&w.invalid&&((w=o.registroForm.get("codigoProducto"))!=null&&w.touched)?48:-1),t(4),_(d(53,53,"labels.id_proveedor")),t(2),c("formControlName","id_proveedor")("options",o.proveedores)("editable",!0),t(),g((a=o.registroForm.get("id_proveedor"))!=null&&a.invalid&&((a=o.registroForm.get("id_proveedor"))!=null&&a.touched)?55:-1),t(3),_(d(59,55,"labels.id_categoria")),t(2),c("formControlName","id_categoria")("options",o.categorias)("editable",!0),t(),g((I=o.registroForm.get("id_categoria"))!=null&&I.invalid&&((I=o.registroForm.get("id_categoria"))!=null&&I.touched)?61:-1)}},dependencies:[se,pe,Q,oe,Z,W,X,Y,ee,te,ae,ne,ve,fe,de,le,ue,me,ce,K,J,G,ge,ie,H],styles:[".color-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:5px 10px;color:#fff;border-radius:4px}"]})};export{V as default};
