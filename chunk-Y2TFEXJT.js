import{a as ee}from"./chunk-MLR4ATCB.js";import{a as G,b as Y}from"./chunk-3WV3ZJ7R.js";import{b as N,c as $,d as q,j as K}from"./chunk-XUHDHR7E.js";import"./chunk-OGQHURAE.js";import{a as Z}from"./chunk-NHECFUMR.js";import"./chunk-5XVCGBHY.js";import{o as J,p as W,q as X}from"./chunk-DXZH3M7L.js";import"./chunk-XMSLJEE3.js";import{Ha as D,Ia as j,Ja as z,Oa as Q,Pa as U,Qa as H,Z as A}from"./chunk-L6F5SHP5.js";import{k as F,w as x}from"./chunk-A5I2MG6G.js";import"./chunk-F2X3VGZZ.js";import{$a as a,Ab as T,Bb as V,Ca as c,Cb as M,Fb as P,Gb as E,Ha as m,Ib as O,Na as R,Ta as S,Xb as v,Yb as b,a as y,aa as d,ba as u,jc as k,kb as l,kc as B,lb as s,mb as h,oa as _,q as I,qb as C,ub as f,vb as w}from"./chunk-4PTIY3UM.js";var te=["dt1"],ie=["filter"];function re(n,e){if(n&1&&(l(0,"th",11),E(1),v(2,"translate"),h(3,"p-sortIcon",12),s()),n&2){let t=e.$implicit;a("pSortableColumn",t),c(),O(" ",b(2,3,t)," "),c(2),a("field",t)}}function oe(n,e){if(n&1){let t=C();l(0,"tr")(1,"th",8)(2,"p-button",9),f("click",function(o){d(t);let p=w();return u(p.toggleMenu(o))}),s()(),S(3,re,4,5,"th",10),s()}if(n&2){let t=e.$implicit;c(2),a("rounded",!1)("text",!0),c(),a("ngForOf",t)}}function ne(n,e){if(n&1){let t=C();l(0,"tr")(1,"td")(2,"p-button",9),f("click",function(o){d(t);let p=w();return u(p.toggleMenu(o))}),s()()()}n&2&&(c(2),a("rounded",!1)("text",!0))}var L=class n{constructor(e,t,i,o,p,g){this.usersServ=e;this.clientServ=t;this.filterservice=i;this.translate=o;this.translateLanService=p;this.router=g;this.translateLanService.changeLanguage$.subscribe(r=>this.translate.use(r)),B(()=>{this.clientServ.postClients(this.employeedto()).pipe(I(r=>(console.log("console.log('', t):   ",r),{data:Array.isArray(r)?[...r]:[],page:0,rows:0,total_records:0,loaded:!0,loading:!1,error:null}))).subscribe({next:r=>{console.log(y({},this.employeedto())),console.log(r),this.stateValues.set({data:r.data&&r.data.length>0?[...r.data]:[],page:0,rows:0,total_records:0,loaded:!0,loading:!1,error:null})},error:r=>this.stateValues.set({data:[],page:0,rows:0,total_records:0,loaded:!1,loading:!0,error:r})})}),this.usersServ.getExpedidoOptions().subscribe(r=>this.expedidoOptions=r)}table;filter;stateValues=_({data:[],page:0,rows:0,total_records:0,loaded:!1,loading:!0,error:null});searchTxt=_([]);employeedto=_({config:{populate_data:!0,page:1,rows:15,sort_field:[]},filter:{}});tablecon=G.cantidadRegistros;stateIni=!1;allowedColumns=["id","ci","nombre","app","apm","sexo","fnaci","idtipo"];columns=this.allowedColumns;columnsSelectSignal=k(()=>this.columns.map(e=>({field:e,header:e.charAt(0).toUpperCase()+e.slice(1)})));clients=[];expedidoOptions;ngOnInit(){this.clientServ.getAllClients().subscribe(e=>{this.clients=e})}clear=e=>{this.employeedto.set({config:{populate_data:!1,page:1,rows:15,sort_field:[]},filter:{}}),e.clear()};toggleMenu=e=>{console.log(e)};getDataPaged(e){e.filters&&this.stateIni!==!1&&this.employeedto.update(()=>({config:{populate_data:!1,page:(e.first||0)/Number(e.rows)+1,sort_field:e.multiSortMeta?e.multiSortMeta.filter(t=>t.field):[],rows:Number(e.rows)},filter:y({},this.filterservice.applyFilterNew(e.filters,this.employeedto().filter))})),this.stateIni=!0}add=()=>this.router.navigate(["/users/clientes/create"]);static \u0275fac=function(t){return new(t||n)(m(Z),m(ee),m(Y),m(Q),m(J),m(x))};static \u0275cmp=R({type:n,selectors:[["app-clientes"]],viewQuery:function(t,i){if(t&1&&(T(te,5),T(ie,5)),t&2){let o;V(o=M())&&(i.table=o.first),V(o=M())&&(i.filter=o.first)}},decls:12,vars:19,consts:[["dt1",""],[3,"header"],[1,"flex","justify-content-between"],["pButton","","label","Clear","icon","pi pi-filter-slash",1,"p-button-outlined","mr-1",3,"click"],["pButton","","label","Add","icon","pi pi-plus",1,"p-button-outlined","mr-1",3,"click"],["dataKey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} employees","styleClass","p-datatable-sm","responsiveLayout","scroll","scrollHeight","60vh",3,"onLazyLoad","value","paginator","loading","rows","rowHover","rowsPerPageOptions","lazy","columns","reorderableColumns","totalRecords","sortMode","customSort","scrollable","paginatorPosition"],["pTemplate","header"],["pTemplate","body"],["rowspan","2"],["icon","pi pi-ellipsis-v","severity","secondary",3,"click","rounded","text"],[3,"pSortableColumn",4,"ngFor","ngForOf"],[3,"pSortableColumn"],[3,"field"]],template:function(t,i){if(t&1){let o=C();l(0,"p-card",1),v(1,"translate"),v(2,"uppercase"),l(3,"div",2),h(4,"div"),l(5,"div")(6,"button",3),f("click",function(){d(o);let g=P(9);return u(i.clear(g))}),s(),l(7,"button",4),f("click",function(){return d(o),u(i.add())}),s()()(),l(8,"p-table",5,0),f("onLazyLoad",function(g){return d(o),u(i.getDataPaged(g))}),S(10,oe,4,3,"ng-template",6)(11,ne,3,2,"ng-template",7),s()()}t&2&&(a("header",b(2,17,b(1,15,"pages.employees"))),c(8),a("value",i.stateValues().data)("paginator",!0)("loading",i.stateValues().loading)("rows",i.stateValues().data.length)("rowHover",!0)("rowsPerPageOptions",i.tablecon)("lazy",!0)("columns",i.columnsSelectSignal())("reorderableColumns",!0)("totalRecords",i.stateValues().total_records)("sortMode","multiple")("customSort",!0)("scrollable",!0)("paginatorPosition",i.stateValues().data&&i.stateValues().data.length>50?"both":"bottom"))},dependencies:[X,W,A,H,U,z,D,j,F,K,N,$,q],encapsulation:2})};export{L as default};
