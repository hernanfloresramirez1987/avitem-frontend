import{a as Ve,b as Ie,c as Te,d as Ne,e as De}from"./chunk-QICJ2XHG.js";import{a as Ee}from"./chunk-T5MRVGB7.js";import{a as Fe,b as be}from"./chunk-OV7H44K2.js";import{a as xe}from"./chunk-XHYAFPP4.js";import{b as _e,j as Ce}from"./chunk-HBCZXPSQ.js";import{b as we}from"./chunk-OVNQVQR5.js";import{a as Se,b as ge}from"./chunk-7F3ROMIE.js";import{a as ue,b as fe,c as ye}from"./chunk-XRCNOI5B.js";import{G as pe,J as se,K as me,X as de,Y as ce,b as J,c as K,d as Q,e as W,ea as he,fa as ve,g as X,h as P,j as Z,k as ee,m as te,n as ie,o as ne,p as ae,q as le,s as oe,x as re}from"./chunk-GGYH7DSO.js";import"./chunk-4YRY4IP2.js";import{a as H,i as z}from"./chunk-NM3HJ4DI.js";import{s as q,t as I}from"./chunk-JAFPLUWG.js";import{$ as U,Cb as b,Db as M,Gb as O,Mb as a,Nb as p,Sa as t,Ta as h,Tb as A,Ub as Y,V as B,Wb as V,a as T,b as N,bb as G,dc as s,ea as j,ec as m,hb as v,jb as c,kb as L,mb as D,oa as k,ob as C,pa as $,tb as i,ub as e,vb as S,zb as R}from"./chunk-PQPLRZS3.js";var Me=(()=>{class l{constructor(){this.#e=ye.URL_API,this.http=U(H),this.postSaveVenta=o=>this.http.post(`${this.#e}proveedores/register`,o)}#e;static{this.\u0275fac=function(r){return new(r||l)}}static{this.\u0275prov=B({token:l,factory:l.\u0275fac,providedIn:"root"})}}return l})();var Pe=()=>({width:"100%"}),je=()=>({width:"100%"});function ke(l,f){l&1&&(i(0,"small",8),a(1,"Error en el Fecha de Compra."),e())}function $e(l,f){l&1&&(i(0,"small",8),a(1,"Error en el Precio Total."),e())}function Ge(l,f){l&1&&(i(0,"small",8),a(1,"Error en el Proveedor Seleccionado."),e())}function Le(l,f){l&1&&(i(0,"small",8),a(1,"Error en el Producto seleccionado."),e())}function Re(l,f){l&1&&(i(0,"small",8),a(1,"Error en el Producto Seleccionado."),e())}function Oe(l,f){l&1&&(i(0,"small",8),a(1,"Error en el Fecha de Compra."),e())}function Ae(l,f){l&1&&(i(0,"small",8),a(1,"Error en el Precio de Compra."),e())}function Ye(l,f){l&1&&(i(0,"small",8),a(1,"Error en el Precio de Venta."),e())}function qe(l,f){l&1&&(i(0,"small",8),a(1,"Error en el Precio de Venta."),e())}function He(l,f){l&1&&(i(0,"tr")(1,"th",28),a(2,"No"),e(),i(3,"th",29),a(4,"Producto"),e(),i(5,"th",30),a(6,"Cantidad"),e(),i(7,"th",30),a(8,"Precio Unitario"),e(),i(9,"th",30),a(10,"Precio Venta"),e(),i(11,"th",30),a(12,"Precio Total"),e(),i(13,"th",31),a(14,"Option"),e()())}function ze(l,f){if(l&1){let o=R();i(0,"tr")(1,"td",32),a(2),e(),i(3,"td"),a(4),e(),i(5,"td",32),a(6),e(),i(7,"td",32),a(8),e(),i(9,"td",32),a(10),e(),i(11,"td",32),a(12),e(),i(13,"td",33)(14,"p-buttonGroup")(15,"p-button",22),s(16,"translate"),b("click",function(){let n=k(o).$implicit,u=M();return $(u.deleteDetail(n))}),e()()()()}if(l&2){let o=f.$implicit,r=f.rowIndex,n=M();t(2),p(r+1),t(),L("background-color",n.getColorBackground(o.color))("color",n.getColor(o.color)),t(),p(o.name_product),t(2),p(o.cantidad),t(2),p(o.precioUnitario),t(2),p(o.precioVenta),t(2),p(o.cantidad*o.precioUnitario),t(3),c("title",m(16,11,"label.delet_detall"))}}var Dt=(()=>{class l{constructor(o,r,n,u,g,y,x,w,E,F){this.confirmationServ=o,this.employeesServ=r,this.ventasServ=n,this.productosServ=u,this.translate=g,this.translateLanService=y,this.fb=x,this.router=w,this.datePipe=E,this.toastServ=F,this.detailView=[],this.stateInputs=G(!0),this.currentDate=this.datePipe.transform(new Date,"dd/MM/yyyy"),this.total=0,this.totalVenta=0,this.translateLanService.changeLanguage$.subscribe(_=>this.translate.use(_)),this.salesForm=this.fb.group({fechaVenta:[this.currentDate],total:[this.total],tokenSIN:[""],id_cliente:["",[P.required]],id_empleado:["",[P.required]],cantidad:[""],precioUnitario:[""],precioUnitarioVenta:[""],id_producto:[""]}),this.productosServ.postProductsGet().subscribe(_=>{this.productos=_.map(d=>N(T({},d),{display:`${d.nombre} (${d.color}) - ${d.unidadMedida}`})),this.stateInputs.set(!1)}),this.employeesServ.postEmployees(null).subscribe(_=>{this.empleados=_.data.map(d=>N(T({},d),{display:`${d.nombre} ${d.app} ${d.apm}, ${d.idcargo}`})),this.stateInputs.set(!1)})}asignarValores(){let o=this.salesForm.value;return console.log(String(this.datePipe.transform(this.getLastDateOfYear(new Date().getFullYear()),"yyyy-MM-dd"))),this.ventasRegister={fechaVenta:String(this.datePipe.transform(new Date,"yyyy-MM-dd")),total:this.total,confactura:!0,token_SIN:"123456",id_cliente:o.id_cliente.id,id_empleado:o.id_empleado.id,detalle:this.detailView.map(r=>(console.log(r),{cantidad:r.cantidad,precioUnitarioVent:r.precioUnitario,precioUnitVenta:r.precioUnitarioVent,id_producto:r.id_producto}))},console.log(`console.log(this.comprasRegister);
 `,this.ventasRegister),this.ventasRegister}getLastDateOfYear(o){return new Date(o,11,31)}notifySuccess(){this.toastServ.showSuccess("Operation Successful","The action was completed successfully.")}notifyError(){this.toastServ.showError("Operation Failed","An error occurred while processing the action.")}getColorBackground(o){switch(o){case"Natural":return"#cccccc";case"Champan":return"#FBE7C6";case"Negro":return"#000000";case"Madera":return"#8B4513";default:return"#FFFFFF"}}getColor(o){switch(o){case"Natural":return"#000000";case"Champan":return"#000000";case"Negro":return"#FFFFFF";case"Madera":return"#FFFFFF";default:return"#FFFFFF"}}deleteDetail(o){this.detailView=this.detailView.filter(r=>r!==o),this.funcTotal(),this.cleanForms()}changeTotalVenta(){}addDetail(){}updateData(){console.log("updateData() { } ")}funcTotal(){this.total=this.detailView.reduce((o,r)=>{let n=Number(r.cantidad)||0,u=Number(r.precioUnitarioVent)||0;return o+n*u},0)}cleanForms(){this.salesForm.patchValue({total:this.total,id_producto:"",cantidad:"",precioUnitario:"",precioVenta:""},{emitEvent:!1}),this.totalVenta=0}static{this.\u0275fac=function(r){return new(r||l)(h(re),h(xe),h(Me),h(Ee),h(J),h(W),h(le),h(z),h(I),h(De))}}static{this.\u0275cmp=j({type:l,selectors:[["app-sale-create"]],standalone:!0,features:[A([I]),Y],decls:81,vars:73,consts:[[3,"formGroup"],[3,"header"],[1,"flex","flex-column","md:flex-row","sm:flex-row","w-full"],[1,"align-items-left","justify-content-top","w-full"],[1,"flex","flex-column","md:flex-row","gap-2","w-full"],[1,"flex","flex-wrap","justify-content-left","align-items-center","gap-2","pb-4","lg:w-full"],[1,"w-25rem"],["dateFormat","dd/mm/yy","type","text","styleClass","w-full",1,"w-full",3,"formControlName"],[2,"color","red"],[1,"flex","flex-wrap","justify-content-left","align-items-center","gap-2","pb-4","lg:w-full","px-2"],["pInputText","","type","text",1,"w-full",3,"formControlName"],["optionLabel","nombre","styleClass","w-full","placeholder","Seleccionar un Cliente",1,"w-full","lg:w-full",3,"formControlName","options"],["optionLabel","display","placeholder","Seleccionar Empleado","styleClass","w-full",1,"w-full","lg:w-full",3,"formControlName","options"],[1,"flex","flex-column","md:flex-row","flex-row"],["optionLabel","display","styleClass","w-full","placeholder","Seleccionar un producto",1,"w-full","lg:w-full",3,"formControlName","options"],["pInputText","","type","number",1,"w-full",3,"change","formControlName"],["pInputText","","type","number",1,"w-full",3,"formControlName"],["pInputText","","type","number","disabled","",1,"w-full",3,"value"],[1,"justify-content-center","align-items-center"],[1,""],[1,"flex","justify-content-between"],["icon","pi pi-plus","severity","primary",3,"click","title"],["icon","pi pi-trash","severity","danger",3,"click","title"],[3,"value","tableStyle","styleClass"],["pTemplate","header"],["pTemplate","body"],[1,"flex","gap-3","mt-1"],["label","Cancel","severity","secondary","styleClass","w-full",1,"w-full"],[2,"width","6%","text-align","right"],[2,"width","40%"],[2,"width","12%","text-align","right"],[2,"width","6%"],[2,"text-align","right"],[1,"flex","flex-wrap","justify-content-left"]],template:function(r,n){if(r&1&&(S(0,"p-toast")(1,"p-confirmDialog"),i(2,"form",0)(3,"p-card",1),s(4,"translate"),s(5,"uppercase"),i(6,"div",2)(7,"div",3)(8,"div",4)(9,"div",5)(10,"label",6),a(11),s(12,"translate"),e(),S(13,"p-calendar",7),v(14,ke,2,0,"small",8),e(),i(15,"div",9)(16,"label",6),a(17),s(18,"translate"),e(),S(19,"input",10),v(20,$e,2,0,"small",8),e(),i(21,"div",9)(22,"label",6),a(23),s(24,"translate"),e(),S(25,"p-dropdown",11),v(26,Ge,2,0,"small",8),e(),i(27,"div",5)(28,"label",6),a(29),s(30,"translate"),e(),S(31,"p-dropdown",12),v(32,Le,2,0,"small",8),e()(),i(33,"div",13)(34,"div",9)(35,"label",6),a(36),s(37,"translate"),e(),S(38,"p-dropdown",14),v(39,Re,2,0,"small",8),e(),i(40,"div",9)(41,"label",6),a(42),s(43,"translate"),e(),i(44,"input",15),b("change",function(){return n.changeTotalVenta()}),e(),v(45,Oe,2,0,"small",8),e(),i(46,"div",9)(47,"label",6),a(48),s(49,"translate"),e(),i(50,"input",15),b("change",function(){return n.changeTotalVenta()}),e(),v(51,Ae,2,0,"small",8),e(),i(52,"div",9)(53,"label",6),a(54),s(55,"translate"),e(),S(56,"input",16),v(57,Ye,2,0,"small",8),e(),i(58,"div",9)(59,"label",6),a(60),s(61,"translate"),e(),S(62,"input",17),v(63,qe,2,0,"small",8),e(),i(64,"div",18)(65,"label",19),a(66),s(67,"translate"),e(),i(68,"div",20)(69,"p-buttonGroup")(70,"p-button",21),s(71,"translate"),b("click",function(){return n.addDetail()}),e(),i(72,"p-button",22),s(73,"translate"),b("click",function(){return n.updateData()}),e()()()()(),i(74,"h4"),a(75,"Detalles"),e(),i(76,"p-table",23),v(77,He,15,0,"ng-template",24)(78,ze,17,13,"ng-template",25),e(),i(79,"div",26),S(80,"p-button",27),e()()()()()),r&2){let u,g,y,x,w,E,F,_,d;t(2),c("formGroup",n.salesForm),t(),c("header",m(5,44,m(4,42,"labels.register_sales"))),t(8),p(m(12,46,"sales.fechaVenta")),t(2),c("formControlName","fechaVenta"),t(),C(14,(u=n.salesForm.get("fechaVenta"))!=null&&u.invalid&&((u=n.salesForm.get("fechaVenta"))!=null&&u.touched)?14:-1),t(3),p(m(18,48,"sales.precio_total")),t(2),c("formControlName","total"),t(),C(20,(g=n.salesForm.get("total"))!=null&&g.invalid&&((g=n.salesForm.get("total"))!=null&&g.touched)?20:-1),t(3),p(m(24,50,"sales.id_cliente")),t(2),D(V(70,Pe)),c("formControlName","id_cliente")("options",n.clientes),t(),C(26,(y=n.salesForm.get("id_cliente"))!=null&&y.invalid&&((y=n.salesForm.get("id_cliente"))!=null&&y.touched)?26:-1),t(3),p(m(30,52,"sales.id_empleado")),t(2),c("formControlName","id_empleado")("options",n.empleados),t(),C(32,(x=n.salesForm.get("id_empleado"))!=null&&x.invalid&&((x=n.salesForm.get("id_empleado"))!=null&&x.touched)?32:-1),t(4),p(m(37,54,"sales.id_producto")),t(2),D(V(71,Pe)),c("formControlName","id_producto")("options",n.productos),t(),C(39,(w=n.salesForm.get("id_producto"))!=null&&w.invalid&&((w=n.salesForm.get("id_producto"))!=null&&w.touched)?39:-1),t(3),p(m(43,56,"sales.cantidad")),t(2),c("formControlName","cantidad"),t(),C(45,(E=n.salesForm.get("cantidad"))!=null&&E.invalid&&((E=n.salesForm.get("cantidad"))!=null&&E.touched)?45:-1),t(3),p(m(49,58,"sales.precioCompra")),t(2),c("formControlName","precioUnitario"),t(),C(51,(F=n.salesForm.get("precioUnitario"))!=null&&F.invalid&&((F=n.salesForm.get("precioUnitario"))!=null&&F.touched)?51:-1),t(3),p(m(55,60,"sales.precioUnitarioVenta")),t(2),c("formControlName","precioUnitarioVenta"),t(),C(57,(_=n.salesForm.get("precioUnitarioVenta"))!=null&&_.invalid&&((_=n.salesForm.get("precioUnitarioVenta"))!=null&&_.touched)?57:-1),t(3),p(m(61,62,"sales.totalVenta")),t(2),O("value",n.totalVenta),t(),C(63,(d=n.salesForm.get("totaCompra"))!=null&&d.invalid&&((d=n.salesForm.get("totaCompra"))!=null&&d.touched)?63:-1),t(3),p(m(67,64,"sales.options")),t(4),c("title",m(71,66,"label.add_detall")),t(2),c("title",m(73,68,"label.delet_detall")),t(4),c("value",n.detailView)("tableStyle",V(72,je))("styleClass","p-datatable-sm")}},dependencies:[oe,te,X,ie,Z,ee,ne,ae,ge,Se,pe,Q,K,me,se,ve,he,we,ce,de,q,fe,ue,Ie,Ve,Ce,_e,be,Fe,Ne,Te]})}}return l})();export{Dt as default};
