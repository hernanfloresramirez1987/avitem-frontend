import{a as _e,b as he,c as ge,d as ve,e as xe}from"./chunk-TA2AFEC4.js";import"./chunk-XOZZOHTX.js";import"./chunk-DPQUKKS7.js";import{a as fe}from"./chunk-TBLWTZKC.js";import{b as se,c as me,d as ce,f as de,j as ue}from"./chunk-HIU3DXSA.js";import"./chunk-R4XMLPRT.js";import"./chunk-BYC53JMJ.js";import{a as ye}from"./chunk-G255QGHI.js";import{s as Ce,t as Se}from"./chunk-5W7I67TA.js";import"./chunk-FEY3J7V6.js";import{a as te}from"./chunk-TKR6C5GP.js";import"./chunk-VXALU44M.js";import{Aa as re,Ma as le,Na as pe,Z as ie,b as Y,ba as ae,c as Z,d as ee,ra as ne,ta as oe}from"./chunk-INNAZPTW.js";import{d as G,i as X}from"./chunk-JCFNFE6R.js";import{r as K}from"./chunk-T5GUEJU5.js";import"./chunk-F2X3VGZZ.js";import{Ab as T,Bb as s,Da as a,Eb as E,Ia as g,La as j,Lb as P,Mb as Q,Nb as U,Ob as l,Pa as H,Pb as f,Q as S,Qb as v,V as N,Va as I,W as z,a as L,ba as y,ca as x,dc as m,ec as c,fb as p,gc as B,lb as O,nb as J,ob as A,pa as b,pb as V,q as D,qb as n,rb as o,sb as d,sc as W,tc as q,wb as w}from"./chunk-RCKDCOFB.js";var R=class t{#e=ye.URL_API;http=z(G);getAllWarehouses=i=>this.http.post(`${this.#e}inventarios/all_filter`,i);static \u0275fac=function(e){return new(e||t)};static \u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"})};var M=class t{toColumns(i){return Object.getOwnPropertyNames(i).map(r=>({field:r,header:r}))}addColumnInInit=(i,e)=>[e,...i];areEqual=(i,e)=>JSON.stringify(i)==JSON.stringify(e);static \u0275fac=function(e){return new(e||t)};static \u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"})};var F=class t{constructor(i){this.objectutil=i}selectOrderedArray(i,e){let r=[];for(let _ of i){let h=e.find(C=>this.objectutil.areEqual(C,_));h&&r.push(h)}return r}static \u0275fac=function(e){return new(e||t)(N(M))};static \u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"})};var Te=["dt1"],Ee=["filter"],We=(t,i)=>i.field;function Re(t,i){if(t&1){let e=w();n(0,"div",9)(1,"p-button",10),m(2,"translate"),T("click",function(){y(e);let _=s(),h=U(4);return x(_.clear(h))}),o()()}t&2&&(a(),p("label",c(2,2,"labels.clear"))("outlined",!0))}function Me(t,i){t&1&&(n(0,"th",13)(1,"div",18),l(2),m(3,"translate"),m(4,"uppercase"),d(5,"p-sortIcon",19),o()()),t&2&&(p("pSortableColumn","id"),a(2),v("",c(4,5,c(3,3,"labels.id"))," "),a(3),p("field","id"))}function Fe(t,i){if(t&1&&(n(0,"th",14)(1,"div",18),l(2),m(3,"translate"),m(4,"uppercase"),d(5,"p-sortIcon",19),o()()),t&2){let e=s().$implicit;E("pSortableColumn",e.field),a(2),v("",c(4,5,c(3,3,"labels.idLote"))," "),a(3),p("field",e.field)}}function Le(t,i){if(t&1&&(n(0,"th",15)(1,"div",18),l(2),m(3,"translate"),m(4,"uppercase"),d(5,"p-sortIcon",19),o()()),t&2){let e=s().$implicit;E("pSortableColumn",e.field),a(2),v("",c(4,5,c(3,3,"labels.producto"))," "),a(3),p("field",e.field)}}function je(t,i){if(t&1&&(n(0,"th",15)(1,"div",18),l(2),m(3,"translate"),m(4,"uppercase"),d(5,"p-sortIcon",19),o()()),t&2){let e=s().$implicit;E("pSortableColumn",e.field),a(2),v("",c(4,5,c(3,3,"labels.almacen"))," "),a(3),p("field",e.field)}}function Oe(t,i){if(t&1&&(n(0,"th",16)(1,"div",18),l(2),m(3,"translate"),m(4,"uppercase"),d(5,"p-sortIcon",19),o()()),t&2){let e=s().$implicit;p("pSortableColumn",e.field),a(2),v("",c(4,5,c(3,3,"labels.cantreserv"))," "),a(3),p("field",e.field)}}function Ae(t,i){if(t&1&&(n(0,"th",16)(1,"div",18),l(2),m(3,"translate"),m(4,"uppercase"),d(5,"p-sortIcon",19),o()()),t&2){let e=s().$implicit;p("pSortableColumn",e.field),a(2),v("",c(4,5,c(3,3,"labels.cantidadDespachada"))," "),a(3),p("field",e.field)}}function Ve(t,i){if(t&1&&(n(0,"th",17)(1,"div",18),l(2),m(3,"uppercase"),d(4,"p-sortIcon",19),o()()),t&2){let e=s().$implicit;p("pSortableColumn",e.field),a(2),v("",c(3,3,e.field)," "),a(2),p("field",e.field)}}function Pe(t,i){if(t&1&&I(0,Me,6,7,"th",13)(1,Fe,6,7,"th",14)(2,Le,6,7,"th",15)(3,je,6,7,"th",15)(4,Oe,6,7,"th",16)(5,Ae,6,7,"th",16)(6,Ve,5,5,"th",17),t&2){let e,r=i.$implicit;O((e=r.field)==="id"?0:e==="idLote"?1:e==="producto"?2:e==="almacen"?3:e==="cantidadReservada"?4:e==="cantidadDespachada"?5:6)}}function Be(t,i){if(t&1&&d(0,"appcommon-filter-input",20),t&2){let e=s().$implicit;p("field",e.field)}}function $e(t,i){if(t&1&&d(0,"appcommon-filter-input",21),t&2){let e=s().$implicit;p("field",e.field)}}function ke(t,i){if(t&1&&d(0,"appcommon-filter-input",20),t&2){let e=s().$implicit;p("field",e.field)}}function De(t,i){if(t&1&&d(0,"appcommon-filter-input",20),t&2){let e=s().$implicit;p("field",e.field)}}function Ne(t,i){if(t&1&&d(0,"appcommon-filter-input",20),t&2){let e=s().$implicit;p("field",e.field)}}function ze(t,i){if(t&1&&d(0,"appcommon-filter-input",21),t&2){let e=s().$implicit;p("field",e.field)}}function He(t,i){if(t&1&&(n(0,"th"),I(1,Be,1,1,"appcommon-filter-input",20)(2,$e,1,1,"appcommon-filter-input",21)(3,ke,1,1,"appcommon-filter-input",20)(4,De,1,1,"appcommon-filter-input",20)(5,Ne,1,1,"appcommon-filter-input",20)(6,ze,1,1,"appcommon-filter-input",21),o()),t&2){let e,r=i.$implicit;a(),O((e=r.field)==="idLote"?1:e==="nombreProducto"?2:e==="cantidadStock"?3:e==="cantidadDespachada"?4:e==="cantidadReservada"?5:6)}}function Je(t,i){t&1&&(n(0,"th",12),l(1,"cargando"),o())}function Qe(t,i){if(t&1&&(n(0,"tr"),d(1,"th",11),A(2,Pe,7,1,null,null,We),o(),n(4,"tr"),A(5,He,7,1,"th",null,J,!1,Je,2,0,"th",12),o()),t&2){let e=i.$implicit;a(2),V(e),a(3),V(e)}}function Ue(t,i){if(t&1&&(n(0,"tr"),d(1,"td"),n(2,"td"),l(3),o(),n(4,"td"),l(5),o(),n(6,"td"),l(7),o(),n(8,"td"),l(9),o(),n(10,"td"),l(11),o(),n(12,"td"),l(13),o(),n(14,"td"),l(15),o(),n(16,"td"),l(17),o(),n(18,"td",22),l(19),o(),n(20,"td",22),l(21),o(),n(22,"td"),l(23),o(),n(24,"td",22),l(25),o()()),t&2){let e=i.$implicit;a(3),f(e.id),a(2),f(e.idLote),a(2),f(e.nombreProducto),a(2),f(e.almacen==null?null:e.almacen.nombre),a(2),f(e.cantidadStock),a(2),f(e.cantidadDespachada),a(2),f(e.cantidadReservada),a(2),f(e.cant_transferencias),a(2),f(e.precio_compra),a(2),f(e.precio_venta),a(2),f(e.sucursal),a(2),f(e.stock)}}function qe(t,i){if(t&1){let e=w();n(0,"div",23)(1,"p-multiSelect",24),T("onChange",function(_){y(e);let h=s();return x(h.cargaColumnas(_))})("onSelectAllChange",function(_){y(e);let h=s();return x(h.selectAll(_))}),o()()}if(t&2){let e=s();a(),p("options",e.colsOptionsSelect)("ngModel",e.columnsSelectSignal())}}function Ke(t,i){t&1&&(n(0,"tr")(1,"td",25),l(2,"No order found."),o()())}function Ge(t,i){t&1&&(n(0,"tr")(1,"td",25),l(2,"Loading orders data. Please wait."),o()())}var k=class t{constructor(i,e,r,_,h,C,Xe){this.inventaryServ=i;this.filterservice=e;this.translate=r;this.translateLanService=_;this.messageService=h;this.router=C;this.arrayurilservice=Xe;this.translateLanService.changeLanguage$.subscribe(u=>this.translate.use(u)),q(()=>{this.inventaryServ.getAllWarehouses(this.warehousesdto()).pipe(D(u=>(console.log(u),{data:Array.isArray(u.data)?[...u.data]:[],metadata:{page:u.metadata.page,rows:u.metadata.rows,total_records:u.metadata.total_records},loading:!1,error:null}))).subscribe({next:u=>{console.log(u),console.log(L({},this.warehousesdto())),this.stateValues.set({data:u.data,metadata:u.metadata,loading:!1,error:null}),console.log(this.stateValues())},error:u=>{this.stateValues.set({data:[],metadata:{page:0,rows:0,total_records:0},loading:!1,error:u}),console.log("console.log('', err):   ",u,this.stateValues())},complete:()=>{console.log("console.log('', this.stateValues()):   ",this.stateValues())}})})}table=j("dt1");filter=j("filter");stateValues=b({data:[],metadata:{page:0,rows:0,total_records:0},loading:!0,error:null});searchTxt=b([]);warehousesdto=b({config:{populate_data:!0,page:1,rows:15,sort_field:[]},filter:{}});tablecon=fe.cantidadRegistros;stateIni=!1;keylocalColumn="inventory_cols";allowedColumns=["id","idLote","producto","almacen","cantidadStock","cantidadDespachada","cant_salidas","cant_transferencias","precio_compra","precio_venta","sucursal"];columns=this.allowedColumns;columnsSelectSignal=W(()=>this.columns.map(i=>({field:i,header:i.charAt(0).toUpperCase()+i.slice(1)})));colsOptionsSelect=this.allowedColumns.map(i=>({field:i,header:i.charAt(0).toUpperCase()+i.slice(1)}));expandedRows={};clear=i=>{i.clear()};onColumnReorder=i=>localStorage.setItem(this.keylocalColumn,JSON.stringify(i.columns));getDataPaged(i){i.filters&&this.stateIni!==!1&&this.warehousesdto.update(()=>({config:{populate_data:!1,page:(i.first||0)/Number(i.rows)+1,sort_field:i.multiSortMeta?i.multiSortMeta.filter(e=>e.field):[],rows:Number(i.rows)},filter:L({},this.filterservice.applyFilterNew(i.filters,this.warehousesdto().filter))})),this.stateIni=!0}cargaColumnas(i){let e=this.arrayurilservice.selectOrderedArray(this.colsOptionsSelect,i.value);this.columnsSelectSignal=W(()=>e),localStorage.setItem(this.keylocalColumn,JSON.stringify(this.columnsSelectSignal()))}selectAll(i){let e=[];i.checked&&(e=this.allowedColumns),this.columnsSelectSignal=W(()=>e),localStorage.setItem(this.keylocalColumn,JSON.stringify(e))}static \u0275fac=function(e){return new(e||t)(g(R),g(xe),g(Y),g(te),g(ie),g(X),g(F))};static \u0275cmp=H({type:t,selectors:[["app-inventory"]],viewQuery:function(e,r){e&1&&(P(r.table,Te,5),P(r.filter,Ee,5)),e&2&&Q(2)},decls:13,vars:20,consts:[["dt1",""],["paginatorleft",""],["emptymessage",""],[3,"header"],["dataKey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} items","styleClass","p-datatable-sm p-datatable-gridlines p-0 m-0","responsiveLayout","scroll","scrollHeight","70vh",3,"onColReorder","onLazyLoad","value","paginator","rows","loading","rowHover","rowsPerPageOptions","lazy","columns","reorderableColumns","totalRecords","sortMode","customSort","scrollable","paginatorPosition","showCurrentPageReport"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","loadingbody"],[1,"flex","flex-wrap","justify-content-end","gap-2"],["icon","pi pi-filter-slash",3,"click","label","outlined"],["rowspan","2"],[2,"min-width","8rem"],["pReorderableColumn","",2,"min-width","1rem",3,"pSortableColumn"],["pReorderableColumn","",2,"min-width","8rem",3,"pSortableColumn"],["pReorderableColumn","",2,"min-width","20rem",3,"pSortableColumn"],["pReorderableColumn","",2,"min-width","10rem",3,"pSortableColumn"],["pReorderableColumn","",3,"pSortableColumn"],[1,"flex","justify-content-between","align-items-left"],[3,"field"],["type","number",3,"field"],["type","text",3,"field"],[1,"text-right"],[1,"flex","align-items-center","justify-content-center"],["inputId","float-label","optionLabel","header","selectedItemsLabel","{0} columns selected","size","small","placeholder","Choose Columns",1,"p-input-icon-left",3,"onChange","onSelectAllChange","options","ngModel"],["colspan","8"]],template:function(e,r){if(e&1){let _=w();n(0,"p-card",3),m(1,"translate"),m(2,"uppercase"),n(3,"p-table",4,0),T("onColReorder",function(C){return y(_),x(r.onColumnReorder(C))})("onLazyLoad",function(C){return y(_),x(r.getDataPaged(C))}),I(5,Re,3,4,"ng-template",5)(6,Qe,8,1,"ng-template",6)(7,Ue,26,12,"ng-template",7)(8,qe,2,2,"ng-template",null,1,B)(10,Ke,3,0,"ng-template",null,2,B)(12,Ge,3,0,"ng-template",8),o()()}e&2&&(p("header",c(2,18,c(1,16,"pages.warehouse"))),a(3),p("value",r.stateValues().data)("paginator",!0)("rows",r.stateValues().metadata.rows)("loading",r.stateValues().loading)("rowHover",!0)("rowsPerPageOptions",r.tablecon)("lazy",!0)("columns",r.columnsSelectSignal())("reorderableColumns",!0)("totalRecords",r.stateValues().metadata.total_records)("sortMode","multiple")("customSort",!0)("scrollable",!0)("paginatorPosition","bottom")("showCurrentPageReport",!0))},dependencies:[Se,Ce,ae,pe,le,ee,Z,K,ue,se,me,de,ce,ve,ge,he,_e,re,ne,oe],encapsulation:2,changeDetection:0})};export{k as default};
