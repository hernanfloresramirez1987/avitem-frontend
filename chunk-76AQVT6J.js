import{a as be}from"./chunk-EXT6ODLE.js";import{a as he}from"./chunk-NINX4UDH.js";import{a as fe,d as Ce,e as xe,f as ge,g as Se,h as ve}from"./chunk-N674FEQB.js";import"./chunk-JTXMDS4E.js";import"./chunk-2TFTJWQW.js";import"./chunk-GLG5OO3S.js";import{b as pe,c as ce,d as se,e as me,f as de,g as ue,i as _e}from"./chunk-NHAPQC3W.js";import"./chunk-KFFE56HM.js";import"./chunk-G255QGHI.js";import"./chunk-NUGAOAR2.js";import{b as W,c as X,d as Y,e as Z}from"./chunk-6HYSLB2P.js";import{i as ae,j as le}from"./chunk-LC6JGRRQ.js";import"./chunk-2WKEWB2B.js";import{D as ne,E as oe,F as re,j as ee,l as te,s as ie}from"./chunk-3T4WVZA5.js";import"./chunk-F2X3VGZZ.js";import{d as G,j as K}from"./chunk-THLIJB7Y.js";import"./chunk-AAQOC4TC.js";import{j as U,r as J,u as q}from"./chunk-F7YKD2CL.js";import{$ as h,Aa as o,Cb as x,Fa as C,Fb as R,Gb as k,Hb as V,Lb as H,Ma as O,Mb as s,N as j,Nb as d,Sa as b,T as N,_ as v,cb as m,cc as p,db as z,dc as c,fc as S,ib as w,kb as F,lb as I,ma as P,mb as T,n as D,nb as l,ob as a,pb as _,sc as B,tb as E,tc as Q,yb as y,zb as r}from"./chunk-J6TCZN46.js";import{a as M}from"./chunk-C6Q5SG76.js";var $=class t{#e="http://127.0.0.1:8080/api/templates/";http=N(G);postComponentsRedirecctions=i=>this.http.post(`${this.#e}postComponentsRedirecctions`,i);postComponents=i=>this.http.post(`${this.#e}getcomponents`,i);static \u0275fac=function(e){return new(e||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})};var we=["dt1"],Fe=["filter"];function Ie(t,i){if(t&1){let e=E();l(0,"div",9)(1,"p-button",10),p(2,"translate"),y("click",function(){v(e);let u=r(),g=H(5);return h(u.clear(g))}),a(),l(3,"p-button",11),y("click",function(){v(e);let u=r();return h(u.add())}),a()()}t&2&&(o(),m("label",c(2,3,"labels.clear"))("outlined",!0),o(2),m("outlined",!0))}function Te(t,i){t&1&&(l(0,"th",16)(1,"div",23),s(2),p(3,"translate"),p(4,"uppercase"),_(5,"p-sortIcon",24),a()()),t&2&&(m("pSortableColumn","id"),o(2),d(c(4,5,c(3,3,"labels.id"))),o(3),m("field","id"))}function Ee(t,i){if(t&1&&(l(0,"th",17)(1,"div",23),s(2),p(3,"translate"),p(4,"uppercase"),_(5,"p-sortIcon",24),a()()),t&2){let e=r().$implicit;x("pSortableColumn",e.field),o(2),d(c(4,5,c(3,3,"labels.nombre"))),o(3),m("field",e.field)}}function Be(t,i){if(t&1&&(l(0,"th",18)(1,"div",23),s(2),p(3,"translate"),p(4,"uppercase"),_(5,"p-sortIcon",24),a()()),t&2){let e=r().$implicit;m("pSortableColumn",e.field),o(2),d(c(4,5,c(3,3,"labels.description"))),o(3),m("field",e.field)}}function $e(t,i){if(t&1&&(l(0,"th",19)(1,"div",23),s(2),p(3,"translate"),p(4,"uppercase"),_(5,"p-sortIcon",24),a()()),t&2){let e=r().$implicit;x("pSortableColumn",e.field),o(2),d(c(4,5,c(3,3,"labels.cantidadStock"))),o(3),m("field",e.field)}}function Me(t,i){if(t&1&&(l(0,"th",20)(1,"div",23),s(2),p(3,"translate"),p(4,"uppercase"),_(5,"p-sortIcon",24),a()()),t&2){let e=r().$implicit;x("pSortableColumn",e.field),o(2),d(c(4,5,c(3,3,"labels.fechaIngreso"))),o(3),m("field",e.field)}}function Re(t,i){t&1&&(l(0,"th",21),s(1),p(2,"translate"),p(3,"uppercase"),a()),t&2&&(o(),d(c(3,3,c(2,1,"labels.unidadMedida"))))}function ke(t,i){if(t&1&&(l(0,"th",22)(1,"div",23),s(2),p(3,"translate"),p(4,"uppercase"),_(5,"p-sortIcon",24),a()()),t&2){let e=r().$implicit;x("pSortableColumn",e.field),o(2),d(c(4,5,c(3,3,"labels.codigoProducto"))),o(3),m("field",e.field)}}function Ve(t,i){if(t&1&&(l(0,"th",20)(1,"div",23),s(2),p(3,"translate"),p(4,"uppercase"),_(5,"p-sortIcon",24),a()()),t&2){let e=r().$implicit;x("pSortableColumn",e.field),o(2),d(c(4,5,c(3,3,"labels.state"))),o(3),m("field",e.field)}}function Le(t,i){if(t&1&&(l(0,"th",17)(1,"div",23),s(2),p(3,"translate"),p(4,"uppercase"),_(5,"p-sortIcon",24),a()()),t&2){let e=r().$implicit;x("pSortableColumn",e.field),o(2),d(c(4,5,c(3,3,"labels.empresa"))),o(3),m("field",e.field)}}function Ae(t,i){t&1&&(l(0,"th",21),s(1),p(2,"translate"),p(3,"uppercase"),a()),t&2&&(o(),d(c(3,3,c(2,1,"labels.categoria"))))}function De(t,i){if(t&1&&(l(0,"th",16)(1,"div",23),s(2),p(3,"translate"),p(4,"uppercase"),_(5,"p-sortIcon",24),a()()),t&2){let e=r().$implicit;x("pSortableColumn",e.field),o(2),d(c(4,5,c(3,3,"labels."+e.field))),o(3),m("field",e.field)}}function je(t,i){if(t&1&&b(0,Te,6,7,"th",16)(1,Ee,6,7,"th",17)(2,Be,6,7,"th",18)(3,$e,6,7,"th",19)(4,Me,6,7,"th",20)(5,Re,4,5,"th",21)(6,ke,6,7,"th",22)(7,Ve,6,7,"th",20)(8,Le,6,7,"th",17)(9,Ae,4,5,"th",21)(10,De,6,7,"th",16),t&2){let e,n=i.$implicit;w((e=n.field)==="id"?0:e==="nombre"?1:e==="descripcion"?2:e==="cantidadStock"?3:e==="fechaIngreso"?4:e==="unidadMedida"?5:e==="codigoProducto"?6:e==="state"?7:e==="empresa"?8:e==="categoria"?9:10)}}function Ne(t,i){if(t&1&&_(0,"appcommon-filter-input",25),t&2){let e=r().$implicit;m("field",e.field)}}function Oe(t,i){if(t&1&&_(0,"appcommon-filter-input",25),t&2){let e=r().$implicit;m("field",e.field)}}function ze(t,i){if(t&1&&_(0,"appcommon-filter-input",26),t&2){let e=r().$implicit;m("field",e.field)}}function He(t,i){if(t&1&&(l(0,"th"),b(1,Ne,1,1,"appcommon-filter-input",25)(2,Oe,1,1,"appcommon-filter-input",25)(3,ze,1,1,"appcommon-filter-input",26),a()),t&2){let e,n=i.$implicit;o(),w((e=n.field)==="id"?1:e==="cantidadStock"?2:3)}}function Qe(t,i){t&1&&(l(0,"th",15),s(1,"cargando"),a())}function Ue(t,i){if(t&1&&(l(0,"tr")(1,"th",12),_(2,"button",13)(3,"p-tableHeaderCheckbox",14),a(),I(4,je,11,1,null,null,F),a(),l(6,"tr"),I(7,He,4,1,"th",null,F,!1,Qe,2,0,"th",15),a()),t&2){let e=i.$implicit;o(4),T(e),o(3),T(e)}}function Je(t,i){if(t&1&&(l(0,"td"),s(1),a()),t&2){let e=r().$implicit,n=r().$implicit;o(),d(n[e.field])}}function qe(t,i){if(t&1&&(l(0,"td"),s(1),a()),t&2){let e=r().$implicit,n=r().$implicit;z("background-color",n.code),o(),d(n[e.field])}}function Ge(t,i){if(t&1&&(l(0,"td"),s(1),a()),t&2){let e=r().$implicit,n=r().$implicit;o(),d(n[e.field])}}function Ke(t,i){if(t&1&&(l(0,"td"),s(1),a()),t&2){let e=r().$implicit,n=r().$implicit;o(),d(n[e.field])}}function We(t,i){if(t&1&&(l(0,"td"),s(1),a()),t&2){let e=r().$implicit,n=r().$implicit;o(),d(n[e.field])}}function Xe(t,i){if(t&1&&(l(0,"td"),s(1),a()),t&2){let e=r().$implicit,n=r().$implicit;o(),d(n[e.field])}}function Ye(t,i){if(t&1&&(l(0,"td"),s(1),a()),t&2){let e=r().$implicit,n=r().$implicit;o(),d(n[e.field])}}function Ze(t,i){if(t&1&&(l(0,"td"),s(1),a()),t&2){let e=r().$implicit,n=r().$implicit;o(),d(n[e.field])}}function et(t,i){if(t&1&&(l(0,"td"),s(1),a()),t&2){let e=r().$implicit,n=r().$implicit;o(),d(n[e.field])}}function tt(t,i){if(t&1&&b(0,Je,2,1,"td")(1,qe,2,3,"td",31)(2,Ge,2,1,"td")(3,Ke,2,1,"td")(4,We,2,1,"td")(5,Xe,2,1,"td")(6,Ye,2,1,"td")(7,Ze,2,1,"td")(8,et,2,1,"td"),t&2){let e,n=i.$implicit;w((e=n.field)==="id"?0:e==="nombre"?1:e==="descripcion"?2:e==="codigoProducto"?3:e==="cantidadStock"?4:e==="state"?5:e==="empresa"?6:e==="categoria"?7:8)}}function it(t,i){if(t&1&&(l(0,"tr",27)(1,"td",28),_(2,"button",29)(3,"p-tableCheckbox",30),a(),I(4,tt,9,1,null,null,F),a()),t&2){let e=i.$implicit,n=i.columns,u=r();m("ngClass",u.rowClass(e)),o(3),m("value",e),o(),T(n)}}function nt(t,i){if(t&1){let e=E();l(0,"div",32)(1,"p-multiSelect",33),y("onChange",function(u){v(e);let g=r();return h(g.cargaColumnas(u))})("onSelectAllChange",function(u){v(e);let g=r();return h(g.selectAll(u))}),a()()}if(t&2){let e=r();o(),m("options",e.colsOptionsSelect)("ngModel",e.columnsSelectSignal())}}function ot(t,i){t&1&&(l(0,"tr")(1,"td",34),s(2,"No order found."),a()())}function rt(t,i){t&1&&(l(0,"tr")(1,"td",34),s(2,"Loading orders data. Please wait."),a()())}var L=class t{constructor(i,e,n,u,g,A,at){this.productsServ=i;this.filterservice=e;this.translate=n;this.translateLanService=u;this.externapiServ=g;this.router=A;this.arrayurilservice=at;this.translateLanService.changeLanguage$.subscribe(f=>this.translate.use(f)),Q(()=>{this.productsServ.postProductsGet().pipe(D(f=>(console.log("console.log('', t):   ",f),{data:Array.isArray(f)?[...f]:[],page:0,rows:0,total_records:0,loaded:!0,loading:!1,error:null}))).subscribe({next:f=>{console.log(M({},this.productsdto())),console.log(f),this.stateValues.set({data:f.data&&f.data.length>0?[...f.data]:[],page:0,rows:0,total_records:0,loaded:!0,loading:!1,error:null})},error:f=>this.stateValues.set({data:[],page:0,rows:0,total_records:0,loaded:!1,loading:!0,error:f})})})}table;filter;stateValues=P({data:[],page:0,rows:0,total_records:0,loaded:!1,loading:!0,error:null});searchTxt=P([]);productsdto=P({config:{populate_data:!0,page:1,rows:15,sort_field:[]},filter:{}});tablecon=fe.cantidadRegistros;stateIni=!1;allowedColumns=["id","nombre","codigoProducto","empresa","cantidadStock","fechaIngreso","unidadMedida","state","categoria"];columns=this.allowedColumns;columnsSelectSignal=B(()=>this.columns.map(i=>({field:i,header:i.charAt(0).toUpperCase()+i.slice(1)})));colsOptionsSelect=this.allowedColumns.map(i=>({field:i,header:i.charAt(0).toUpperCase()+i.slice(1)}));keylocalColumn="products_cols";clear=i=>{this.productsdto.set({config:{populate_data:!1,page:1,rows:15,sort_field:[]},filter:{}}),i.clear()};getDataPaged(i){i.filters&&this.stateIni!==!1&&this.productsdto.update(()=>({config:{populate_data:!1,page:(i.first||0)/Number(i.rows)+1,sort_field:i.multiSortMeta?i.multiSortMeta.filter(e=>e.field):[],rows:Number(i.rows)},filter:M({},this.filterservice.applyFilterNew(i.filters,this.productsdto().filter))})),this.stateIni=!0}getColorBackground(i){switch(i){case"Natural":return"#cccccc";case"Champan":return"#FBE7C6";case"Negro":return"#000000";case"Madera":return"#8B4513";default:return"#FFFFFF"}}getColor(i){switch(i){case"Natural":return"#000000";case"Champan":return"#000000";case"Negro":return"#FFFFFF";case"Madera":return"#FFFFFF";default:return"#FFFFFF"}}add=()=>{this.router.navigate(["/inventory/products/create"])};rowClass(i){return{"!bg-red-50 !text-red-800":i.cantidadStock<=5}}cargaColumnas(i){let e=this.arrayurilservice.selectOrderedArray(this.colsOptionsSelect,i.value);this.columnsSelectSignal=B(()=>e),localStorage.setItem(this.keylocalColumn,JSON.stringify(this.columnsSelectSignal()))}selectAll(i){let e=[];i.checked&&(e=this.allowedColumns),this.columnsSelectSignal=B(()=>e),localStorage.setItem(this.keylocalColumn,JSON.stringify(e))}static \u0275fac=function(e){return new(e||t)(C(be),C(ve),C(W),C(Z),C($),C(K),C(he))};static \u0275cmp=O({type:t,selectors:[["app-products"]],viewQuery:function(e,n){if(e&1&&(R(we,5),R(Fe,5)),e&2){let u;k(u=V())&&(n.table=u.first),k(u=V())&&(n.filter=u.first)}},decls:18,vars:22,consts:[["dt1",""],["caption",""],["header",""],["body",""],["paginatorleft",""],["emptymessage",""],["loadingbody",""],[3,"header","subheader"],["dataKey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} employees","styleClass","p-datatable-sm","stripedRows","","responsiveLayout","scroll","scrollHeight","53vh",3,"onLazyLoad","value","paginator","loading","rows","rowHover","rowsPerPageOptions","lazy","columns","reorderableColumns","totalRecords","sortMode","customSort","scrollable","paginatorPosition"],[1,"flex","flex-wrap","justify-content-end"],["icon","pi pi-filter-slash",3,"click","label","outlined"],["icon","pi pi-plus","severity","primary",1,"pr-1",3,"click","outlined"],["rowspan","2"],["pButton","","pRipple","","type","button","icon","pi pi-ellipsis-v",1,"p-button-rounded","p-button-text","pt-2"],[1,"pb-0","px-2"],[2,"min-width","12rem"],["pReorderableColumn","",3,"pSortableColumn"],["pReorderableColumn","",2,"min-width","20rem",3,"pSortableColumn"],["pReorderableColumn","",2,"min-width","25rem",3,"pSortableColumn"],["pReorderableColumn","",2,"min-width","10rem",3,"pSortableColumn"],["pReorderableColumn","",2,"min-width","15rem",3,"pSortableColumn"],["pReorderableColumn","",2,"min-width","15rem"],["pReorderableColumn","",2,"min-width","2rem",3,"pSortableColumn"],[1,"flex","justify-content-between","align-items-left"],[3,"field"],["type","number",3,"field"],["type","text",1,"w-full",3,"field"],[3,"ngClass"],[1,"flex","py-4"],["pButton","","pRipple","","type","button","icon","pi pi-ellipsis-v",1,"p-button-rounded","p-button-text","pt-5"],[1,"p-2",3,"value"],[3,"backgroundColor"],[1,"flex","align-items-center","justify-content-center"],["inputId","float-label","optionLabel","header","selectedItemsLabel","{0} columns selected","size","small","placeholder","Choose Columns",1,"p-input-icon-left",3,"onChange","onSelectAllChange","options","ngModel"],["colspan","8"]],template:function(e,n){if(e&1){let u=E();l(0,"p-card",7),p(1,"translate"),p(2,"uppercase"),p(3,"translate"),l(4,"p-table",8,0),y("onLazyLoad",function(A){return v(u),h(n.getDataPaged(A))}),b(6,Ie,4,5,"ng-template",null,1,S)(8,Ue,10,1,"ng-template",null,2,S)(10,it,6,2,"ng-template",null,3,S)(12,nt,2,2,"ng-template",null,4,S)(14,ot,3,0,"ng-template",null,5,S)(16,rt,3,0,"ng-template",null,6,S),a()()}e&2&&(m("header",c(2,18,c(1,16,"pages.products")))("subheader",c(3,20,"labels.admin_products")),o(4),m("value",n.stateValues().data)("paginator",!0)("loading",n.stateValues().loading)("rows",n.stateValues().data.length)("rowHover",!0)("rowsPerPageOptions",n.tablecon)("lazy",!0)("columns",n.columnsSelectSignal())("reorderableColumns",!0)("totalRecords",n.stateValues().total_records)("sortMode","multiple")("customSort",!0)("scrollable",!0)("paginatorPosition",n.stateValues().data&&n.stateValues().data.length>50?"both":"bottom"))},dependencies:[Y,X,le,ae,J,_e,pe,ce,me,se,de,ue,re,ne,oe,Se,ge,q,U,xe,Ce,ie,ee,te],encapsulation:2})};export{L as default};
