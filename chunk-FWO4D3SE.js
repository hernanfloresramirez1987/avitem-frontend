import{a as Ce}from"./chunk-OFSYLXU5.js";import{a as me,f as _e,g as ue,h as fe}from"./chunk-EUZSORZR.js";import"./chunk-BSVNSKM7.js";import"./chunk-TMFUZDJL.js";import{b as re,c as ae,d as le,e as pe,f as ce,g as se,i as de}from"./chunk-NG2XZZMJ.js";import"./chunk-ZOSWNEBS.js";import"./chunk-46I2LMBB.js";import"./chunk-G255QGHI.js";import"./chunk-UYIDI6XF.js";import{b as W,c as X,d as Y,e as Z}from"./chunk-IJWSAIOW.js";import{d as J,j as K}from"./chunk-NU7MKXHP.js";import{i as oe,j as ne}from"./chunk-JDMENEHL.js";import"./chunk-IFV3FHZ5.js";import{Ha as ee,Ia as te,Ja as ie}from"./chunk-S4O6IFFE.js";import{j as U,r as q,t as G}from"./chunk-OF6IZINW.js";import"./chunk-F2X3VGZZ.js";import{$ as v,Aa as n,Cb as C,Fa as x,Fb as R,Gb as k,Hb as M,Lb as H,Ma as z,Mb as s,N as j,Nb as m,Sa as g,T as N,_ as b,cb as d,cc as p,db as A,dc as c,fc as I,ib as y,kb as S,lb as P,ma as h,mb as F,n as V,nb as l,ob as a,pb as _,rc as Q,sc as O,tb as $,yb as w,zb as r}from"./chunk-H3HIGMDG.js";import{a as B}from"./chunk-C6Q5SG76.js";var T=class e{#e="http://127.0.0.1:8080/api/templates/";http=N(J);postComponentsRedirecctions=i=>this.http.post(`${this.#e}postComponentsRedirecctions`,i);postComponents=i=>this.http.post(`${this.#e}getcomponents`,i);static \u0275fac=function(t){return new(t||e)};static \u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"})};var be=["dt1"],ve=["filter"];function he(e,i){if(e&1){let t=$();l(0,"div",6)(1,"p-button",7),p(2,"translate"),w("click",function(){b(t);let u=r(),E=H(5);return v(u.clear(E))}),a(),l(3,"p-button",8),w("click",function(){b(t);let u=r();return v(u.add())}),a()()}e&2&&(n(),d("label",c(2,3,"labels.clear"))("outlined",!0),n(2),d("outlined",!0))}function ye(e,i){e&1&&(l(0,"th",13)(1,"div",20),s(2),p(3,"translate"),p(4,"uppercase"),_(5,"p-sortIcon",21),a()()),e&2&&(d("pSortableColumn","id"),n(2),m(c(4,5,c(3,3,"labels.id"))),n(3),d("field","id"))}function Se(e,i){if(e&1&&(l(0,"th",14)(1,"div",20),s(2),p(3,"translate"),p(4,"uppercase"),_(5,"p-sortIcon",21),a()()),e&2){let t=r().$implicit;C("pSortableColumn",t.field),n(2),m(c(4,5,c(3,3,"labels.nombre"))),n(3),d("field",t.field)}}function Pe(e,i){if(e&1&&(l(0,"th",15)(1,"div",20),s(2),p(3,"translate"),p(4,"uppercase"),_(5,"p-sortIcon",21),a()()),e&2){let t=r().$implicit;d("pSortableColumn",t.field),n(2),m(c(4,5,c(3,3,"labels.description"))),n(3),d("field",t.field)}}function Fe(e,i){if(e&1&&(l(0,"th",16)(1,"div",20),s(2),p(3,"translate"),p(4,"uppercase"),_(5,"p-sortIcon",21),a()()),e&2){let t=r().$implicit;C("pSortableColumn",t.field),n(2),m(c(4,5,c(3,3,"labels.cantidadStock"))),n(3),d("field",t.field)}}function we(e,i){if(e&1&&(l(0,"th",17)(1,"div",20),s(2),p(3,"translate"),p(4,"uppercase"),_(5,"p-sortIcon",21),a()()),e&2){let t=r().$implicit;C("pSortableColumn",t.field),n(2),m(c(4,5,c(3,3,"labels.fechaIngreso"))),n(3),d("field",t.field)}}function Ie(e,i){e&1&&(l(0,"th",18),s(1),p(2,"translate"),p(3,"uppercase"),a()),e&2&&(n(),m(c(3,3,c(2,1,"labels.unidadMedida"))))}function Te(e,i){if(e&1&&(l(0,"th",19)(1,"div",20),s(2),p(3,"translate"),p(4,"uppercase"),_(5,"p-sortIcon",21),a()()),e&2){let t=r().$implicit;C("pSortableColumn",t.field),n(2),m(c(4,5,c(3,3,"labels.codigoProducto"))),n(3),d("field",t.field)}}function Ee(e,i){if(e&1&&(l(0,"th",17)(1,"div",20),s(2),p(3,"translate"),p(4,"uppercase"),_(5,"p-sortIcon",21),a()()),e&2){let t=r().$implicit;C("pSortableColumn",t.field),n(2),m(c(4,5,c(3,3,"labels.state"))),n(3),d("field",t.field)}}function Be(e,i){if(e&1&&(l(0,"th",14)(1,"div",20),s(2),p(3,"translate"),p(4,"uppercase"),_(5,"p-sortIcon",21),a()()),e&2){let t=r().$implicit;C("pSortableColumn",t.field),n(2),m(c(4,5,c(3,3,"labels.empresa"))),n(3),d("field",t.field)}}function $e(e,i){e&1&&(l(0,"th",18),s(1),p(2,"translate"),p(3,"uppercase"),a()),e&2&&(n(),m(c(3,3,c(2,1,"labels.categoria"))))}function Re(e,i){if(e&1&&(l(0,"th",13)(1,"div",20),s(2),p(3,"translate"),p(4,"uppercase"),_(5,"p-sortIcon",21),a()()),e&2){let t=r().$implicit;C("pSortableColumn",t.field),n(2),m(c(4,5,c(3,3,"labels."+t.field))),n(3),d("field",t.field)}}function ke(e,i){if(e&1&&g(0,ye,6,7,"th",13)(1,Se,6,7,"th",14)(2,Pe,6,7,"th",15)(3,Fe,6,7,"th",16)(4,we,6,7,"th",17)(5,Ie,4,5,"th",18)(6,Te,6,7,"th",19)(7,Ee,6,7,"th",17)(8,Be,6,7,"th",14)(9,$e,4,5,"th",18)(10,Re,6,7,"th",13),e&2){let t,o=i.$implicit;y((t=o.field)==="id"?0:t==="nombre"?1:t==="descripcion"?2:t==="cantidadStock"?3:t==="fechaIngreso"?4:t==="unidadMedida"?5:t==="codigoProducto"?6:t==="state"?7:t==="empresa"?8:t==="categoria"?9:10)}}function Me(e,i){if(e&1&&_(0,"appcommon-filter-input",22),e&2){let t=r().$implicit;d("field",t.field)}}function De(e,i){if(e&1&&_(0,"appcommon-filter-input",22),e&2){let t=r().$implicit;d("field",t.field)}}function Le(e,i){if(e&1&&_(0,"appcommon-filter-input",23),e&2){let t=r().$implicit;d("field",t.field)}}function Ve(e,i){if(e&1&&(l(0,"th"),g(1,Me,1,1,"appcommon-filter-input",22)(2,De,1,1,"appcommon-filter-input",22)(3,Le,1,1,"appcommon-filter-input",23),a()),e&2){let t,o=i.$implicit;n(),y((t=o.field)==="id"?1:t==="cantidadStock"?2:3)}}function je(e,i){e&1&&(l(0,"th",12),s(1,"cargando"),a())}function Ne(e,i){if(e&1&&(l(0,"tr")(1,"th",9),_(2,"button",10)(3,"p-tableHeaderCheckbox",11),a(),P(4,ke,11,1,null,null,S),a(),l(6,"tr"),P(7,Ve,4,1,"th",null,S,!1,je,2,0,"th",12),a()),e&2){let t=i.$implicit;n(4),F(t),n(3),F(t)}}function ze(e,i){if(e&1&&(l(0,"td"),s(1),a()),e&2){let t=r().$implicit,o=r().$implicit;n(),m(o[t.field])}}function Ae(e,i){if(e&1&&(l(0,"td"),s(1),a()),e&2){let t=r().$implicit,o=r().$implicit;A("background-color",o.code),n(),m(o[t.field])}}function He(e,i){if(e&1&&(l(0,"td"),s(1),a()),e&2){let t=r().$implicit,o=r().$implicit;n(),m(o[t.field])}}function Qe(e,i){if(e&1&&(l(0,"td"),s(1),a()),e&2){let t=r().$implicit,o=r().$implicit;n(),m(o[t.field])}}function Oe(e,i){if(e&1&&(l(0,"td"),s(1),a()),e&2){let t=r().$implicit,o=r().$implicit;n(),m(o[t.field])}}function Ue(e,i){if(e&1&&(l(0,"td"),s(1),a()),e&2){let t=r().$implicit,o=r().$implicit;n(),m(o[t.field])}}function qe(e,i){if(e&1&&(l(0,"td"),s(1),a()),e&2){let t=r().$implicit,o=r().$implicit;n(),m(o[t.field])}}function Ge(e,i){if(e&1&&(l(0,"td"),s(1),a()),e&2){let t=r().$implicit,o=r().$implicit;n(),m(o[t.field])}}function Je(e,i){if(e&1&&(l(0,"td"),s(1),a()),e&2){let t=r().$implicit,o=r().$implicit;n(),m(o[t.field])}}function Ke(e,i){if(e&1&&g(0,ze,2,1,"td")(1,Ae,2,3,"td",28)(2,He,2,1,"td")(3,Qe,2,1,"td")(4,Oe,2,1,"td")(5,Ue,2,1,"td")(6,qe,2,1,"td")(7,Ge,2,1,"td")(8,Je,2,1,"td"),e&2){let t,o=i.$implicit;y((t=o.field)==="id"?0:t==="nombre"?1:t==="descripcion"?2:t==="codigoProducto"?3:t==="cantidadStock"?4:t==="state"?5:t==="empresa"?6:t==="categoria"?7:8)}}function We(e,i){if(e&1&&(l(0,"tr",24)(1,"td",25),_(2,"button",26)(3,"p-tableCheckbox",27),a(),P(4,Ke,9,1,null,null,S),a()),e&2){let t=i.$implicit,o=i.columns,u=r();d("ngClass",u.rowClass(t)),n(3),d("value",t),n(),F(o)}}var D=class e{constructor(i,t,o,u,E,L){this.productsServ=i;this.filterservice=t;this.translate=o;this.translateLanService=u;this.externapiServ=E;this.router=L;this.translateLanService.changeLanguage$.subscribe(f=>this.translate.use(f)),O(()=>{this.productsServ.postProductsGet().pipe(V(f=>(console.log("console.log('', t):   ",f),{data:Array.isArray(f)?[...f]:[],page:0,rows:0,total_records:0,loaded:!0,loading:!1,error:null}))).subscribe({next:f=>{console.log(B({},this.productsdto())),console.log(f),this.stateValues.set({data:f.data&&f.data.length>0?[...f.data]:[],page:0,rows:0,total_records:0,loaded:!0,loading:!1,error:null})},error:f=>this.stateValues.set({data:[],page:0,rows:0,total_records:0,loaded:!1,loading:!0,error:f})})})}table;filter;stateValues=h({data:[],page:0,rows:0,total_records:0,loaded:!1,loading:!0,error:null});searchTxt=h([]);productsdto=h({config:{populate_data:!0,page:1,rows:15,sort_field:[]},filter:{}});tablecon=me.cantidadRegistros;stateIni=!1;allowedColumns=["id","nombre","codigoProducto","empresa","cantidadStock","fechaIngreso","unidadMedida","state","categoria"];columns=this.allowedColumns;columnsSelectSignal=Q(()=>this.columns.map(i=>({field:i,header:i.charAt(0).toUpperCase()+i.slice(1)})));clear=i=>{this.productsdto.set({config:{populate_data:!1,page:1,rows:15,sort_field:[]},filter:{}}),i.clear()};getDataPaged(i){i.filters&&this.stateIni!==!1&&this.productsdto.update(()=>({config:{populate_data:!1,page:(i.first||0)/Number(i.rows)+1,sort_field:i.multiSortMeta?i.multiSortMeta.filter(t=>t.field):[],rows:Number(i.rows)},filter:B({},this.filterservice.applyFilterNew(i.filters,this.productsdto().filter))})),this.stateIni=!0}getColorBackground(i){switch(i){case"Natural":return"#cccccc";case"Champan":return"#FBE7C6";case"Negro":return"#000000";case"Madera":return"#8B4513";default:return"#FFFFFF"}}getColor(i){switch(i){case"Natural":return"#000000";case"Champan":return"#000000";case"Negro":return"#FFFFFF";case"Madera":return"#FFFFFF";default:return"#FFFFFF"}}add=()=>{this.router.navigate(["/inventory/products/create"])};rowClass(i){return{"!bg-red-50 !text-red-800":i.cantidadStock<=5}}static \u0275fac=function(t){return new(t||e)(x(Ce),x(fe),x(W),x(Z),x(T),x(K))};static \u0275cmp=z({type:e,selectors:[["app-products"]],viewQuery:function(t,o){if(t&1&&(R(be,5),R(ve,5)),t&2){let u;k(u=M())&&(o.table=u.first),k(u=M())&&(o.filter=u.first)}},decls:12,vars:22,consts:[["dt1",""],["caption",""],["header",""],["body",""],[3,"header","subheader"],["dataKey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} employees","styleClass","p-datatable-sm","stripedRows","","responsiveLayout","scroll","scrollHeight","60vh",3,"onLazyLoad","value","paginator","loading","rows","rowHover","rowsPerPageOptions","lazy","columns","reorderableColumns","totalRecords","sortMode","customSort","scrollable","paginatorPosition"],[1,"flex","flex-wrap","justify-content-end"],["icon","pi pi-filter-slash",3,"click","label","outlined"],["icon","pi pi-plus","severity","primary",1,"pr-1",3,"click","outlined"],["rowspan","2"],["pButton","","pRipple","","type","button","icon","pi pi-ellipsis-v",1,"p-button-rounded","p-button-text","pt-2"],[1,"pb-0","px-2"],[2,"min-width","12rem"],["pReorderableColumn","",3,"pSortableColumn"],["pReorderableColumn","",2,"min-width","20rem",3,"pSortableColumn"],["pReorderableColumn","",2,"min-width","25rem",3,"pSortableColumn"],["pReorderableColumn","",2,"min-width","10rem",3,"pSortableColumn"],["pReorderableColumn","",2,"min-width","15rem",3,"pSortableColumn"],["pReorderableColumn","",2,"min-width","15rem"],["pReorderableColumn","",2,"min-width","2rem",3,"pSortableColumn"],[1,"flex","justify-content-between","align-items-left"],[3,"field"],["type","number",3,"field"],["type","text",1,"w-full",3,"field"],[3,"ngClass"],[1,"flex","py-4"],["pButton","","pRipple","","type","button","icon","pi pi-ellipsis-v",1,"p-button-rounded","p-button-text","pt-5"],[1,"p-2",3,"value"],[3,"backgroundColor"]],template:function(t,o){if(t&1){let u=$();l(0,"p-card",4),p(1,"translate"),p(2,"uppercase"),p(3,"translate"),l(4,"p-table",5,0),w("onLazyLoad",function(L){return b(u),v(o.getDataPaged(L))}),g(6,he,4,5,"ng-template",null,1,I)(8,Ne,10,1,"ng-template",null,2,I)(10,We,6,2,"ng-template",null,3,I),a()()}t&2&&(d("header",c(2,18,c(1,16,"pages.products")))("subheader",c(3,20,"labels.admin_products")),n(4),d("value",o.stateValues().data)("paginator",!0)("loading",o.stateValues().loading)("rows",o.stateValues().data.length)("rowHover",!0)("rowsPerPageOptions",o.tablecon)("lazy",!0)("columns",o.columnsSelectSignal())("reorderableColumns",!0)("totalRecords",o.stateValues().total_records)("sortMode","multiple")("customSort",!0)("scrollable",!0)("paginatorPosition",o.stateValues().data&&o.stateValues().data.length>50?"both":"bottom"))},dependencies:[Y,X,ne,oe,q,de,re,ae,pe,le,ce,se,ie,ee,te,ue,_e,G,U],encapsulation:2})};export{D as default};
