import{a as _e,b as ue,c as fe}from"./chunk-SZAIYMOY.js";import{a as de}from"./chunk-QS6UWCU4.js";import"./chunk-FK6H3RFT.js";import{a as re,b as le,c as pe,f as se,g as me,h as ce}from"./chunk-N674FEQB.js";import"./chunk-JTXMDS4E.js";import"./chunk-2TFTJWQW.js";import"./chunk-GLG5OO3S.js";import{b as te,c as ie,d as ne,e as ae,i as oe}from"./chunk-NHAPQC3W.js";import"./chunk-KFFE56HM.js";import"./chunk-G255QGHI.js";import"./chunk-NUGAOAR2.js";import{b as J,c as K,d as N,e as G}from"./chunk-6HYSLB2P.js";import{i as Z,j as ee}from"./chunk-LC6JGRRQ.js";import"./chunk-2WKEWB2B.js";import{E as X,F as Y}from"./chunk-3T4WVZA5.js";import"./chunk-F2X3VGZZ.js";import{j as U}from"./chunk-THLIJB7Y.js";import{ea as W}from"./chunk-AAQOC4TC.js";import{r as q,s as H}from"./chunk-F7YKD2CL.js";import{$ as v,Aa as a,Cb as b,Fa as C,Ia as w,Jb as E,Kb as A,Lb as P,Ma as k,Mb as c,Nb as u,Qb as j,Sa as y,_ as g,cb as s,cc as p,dc as m,ec as z,fc as M,ib as T,kb as I,lb as V,ma as h,mb as F,n as D,nb as o,ob as r,pb as _,sc as O,tb as B,tc as Q,yb as x,zb as l}from"./chunk-J6TCZN46.js";import{a as L}from"./chunk-C6Q5SG76.js";var Ce=["dt1"],Se=["menu"],ge=["filter"];function ve(t,i){if(t&1){let e=B();o(0,"div",8)(1,"p-button",9),p(2,"translate"),x("click",function(){g(e);let f=l(),S=P(7);return v(f.clear(S))}),r(),o(3,"p-button",10),x("click",function(){g(e);let f=l();return v(f.add())}),r()()}t&2&&(a(),s("label",m(2,3,"labels.clear"))("outlined",!0),a(2),s("outlined",!0))}function ye(t,i){t&1&&(o(0,"th",13)(1,"div",15),c(2),p(3,"translate"),p(4,"uppercase"),_(5,"p-sortIcon",16),r()()),t&2&&(s("pSortableColumn","id"),a(2),u(m(4,5,m(3,3,"labels.id"))),a(3),s("field","id"))}function xe(t,i){if(t&1&&(o(0,"th",14)(1,"div",15),c(2),p(3,"translate"),p(4,"uppercase"),_(5,"p-sortIcon",16),r()()),t&2){let e=l().$implicit;b("pSortableColumn",e.field),a(2),u(m(4,5,m(3,3,"labels.no"))),a(3),s("field",e.field)}}function be(t,i){if(t&1&&(o(0,"th",14)(1,"div",15),c(2),p(3,"translate"),p(4,"uppercase"),_(5,"p-sortIcon",16),r()()),t&2){let e=l().$implicit;b("pSortableColumn",e.field),a(2),u(m(4,5,m(3,3,"labels.fechaVenta"))),a(3),s("field",e.field)}}function he(t,i){if(t&1&&(o(0,"th",14)(1,"div",15),c(2),p(3,"translate"),p(4,"uppercase"),_(5,"p-sortIcon",16),r()()),t&2){let e=l().$implicit;s("pSortableColumn",e.field),a(2),u(m(4,5,m(3,3,"labels.total"))),a(3),s("field",e.field)}}function we(t,i){if(t&1&&(o(0,"th",14)(1,"div",15),c(2),p(3,"translate"),p(4,"uppercase"),_(5,"p-sortIcon",16),r()()),t&2){let e=l().$implicit;b("pSortableColumn",e.field),a(2),u(m(4,5,m(3,3,"labels.proveedor"))),a(3),s("field",e.field)}}function Te(t,i){if(t&1&&(o(0,"th",14)(1,"div",15),c(2),p(3,"translate"),p(4,"uppercase"),_(5,"p-sortIcon",16),r()()),t&2){let e=l().$implicit;b("pSortableColumn",e.field),a(2),u(m(4,5,m(3,3,"labels."+e.field))),a(3),s("field",e.field)}}function Ie(t,i){if(t&1&&y(0,ye,6,7,"th",13)(1,xe,6,7,"th",14)(2,be,6,7,"th",14)(3,he,6,7,"th",14)(4,we,6,7,"th",14)(5,Te,6,7,"th",14),t&2){let e,n=i.$implicit;T((e=n.field)==="id"?0:e==="no"?1:e==="fechaventa"?2:e==="total"?3:e==="proveedor"?4:5)}}function Ve(t,i){if(t&1&&_(0,"appcommon-filter-input",17),t&2){let e=l().$implicit;s("field",e.field)}}function Fe(t,i){if(t&1&&_(0,"appcommon-filter-input",18),t&2){let e=l().$implicit;s("field",e.field)}}function Be(t,i){if(t&1&&_(0,"appcommon-filter-input",19),t&2){let e=l().$implicit;s("field",e.field)}}function Ee(t,i){if(t&1&&(o(0,"th"),y(1,Ve,1,1,"appcommon-filter-input",17)(2,Fe,1,1,"appcommon-filter-input",18)(3,Be,1,1,"appcommon-filter-input",19),r()),t&2){let e,n=i.$implicit;a(),T((e=n.field)==="fechaVenta"?1:e==="total"?2:3)}}function Pe(t,i){t&1&&(o(0,"th",12),c(1,"cargando"),r())}function Me(t,i){if(t&1&&(o(0,"tr"),_(1,"th",11),V(2,Ie,6,1,null,null,I),r(),o(4,"tr"),V(5,Ee,4,1,"th",null,I,!1,Pe,2,0,"th",12),r()),t&2){let e=i.$implicit;a(2),F(e),a(3),F(e)}}function Re(t,i){if(t&1&&(o(0,"td"),c(1),r()),t&2){let e=l().$implicit,n=l().$implicit;a(),u(n[e.field])}}function $e(t,i){if(t&1&&(o(0,"td"),c(1),p(2,"date"),r()),t&2){let e=l(2).$implicit;a(),u(z(2,1,e.fechaVenta,"dd/MM/yyyy"))}}function Le(t,i){if(t&1&&(o(0,"td",22),c(1),p(2,"bolivianos"),r()),t&2){let e=l().$implicit,n=l().$implicit;a(),u(m(2,1,n[e.field]))}}function De(t,i){if(t&1&&(o(0,"td"),c(1),r()),t&2){let e=l(2).$implicit;a(),j("",e.cliente.persona.nombre," ",e.cliente.persona.app," ",e.cliente.persona.apm,"")}}function ke(t,i){if(t&1&&(o(0,"td"),c(1),r()),t&2){let e=l(2).$implicit;a(),u(e.cliente.ci)}}function Ae(t,i){if(t&1&&(o(0,"td"),c(1),r()),t&2){let e=l(2).$implicit;a(),u(e.cliente.nit)}}function je(t,i){if(t&1&&y(0,Re,2,1,"td")(1,$e,3,4,"td")(2,Le,3,3,"td",22)(3,De,2,3,"td")(4,ke,2,1,"td")(5,Ae,2,1,"td"),t&2){let e,n=i.$implicit;T((e=n.field)==="id"?0:e==="fechaVenta"?1:e==="total"?2:e==="cliente"?3:e==="ci"?4:5)}}function ze(t,i){if(t&1){let e=B();o(0,"tr")(1,"td",20)(2,"p-button",21),x("click",function(f){g(e),l();let S=P(1);return v(S.toggle(f))}),r()(),V(3,je,6,1,null,null,I),r()}if(t&2){let e=i.columns;a(2),s("icon","pi pi-ellipsis-v")("text",!0),a(),F(e)}}var R=class t{constructor(i,e,n,f,S,$){this.translateLanService=i;this.translate=e;this.filterservice=n;this.ventasServ=f;this.router=S;this.pdfreport=$;this.translateLanService.changeLanguage$.subscribe(d=>this.translate.use(d)),Q(()=>{this.ventasServ.postAllVentasSearch(this.ventasdto()).pipe(D(d=>({data:Array.isArray(d.data)?[...d.data]:[],metadata:{page:d.metadata.page,rows:d.metadata.rows,total_records:d.metadata.total_records},loading:!1,error:null}))).subscribe({next:d=>this.stateValues.set(d),error:d=>{console.log(d),this.stateValues.set({data:[],metadata:{page:0,rows:0,total_records:0},loading:!0,error:d})}})})}table=w("dt1");menu=w("menu");filter=w("filter");stateValues=h({data:[],metadata:{page:0,rows:0,total_records:0},loading:!0,error:null});searchTxt=h([]);ventasdto=h({config:{populate_data:!0,page:1,rows:15,sort_field:[]},filter:{}});tablecon=re.cantidadRegistros;stateIni=!1;title="pages.sales";subtitle="labels.admin_sales";allowedColumns=["id","no","fechaVenta","total","cliente","ci","nit"];columns=this.allowedColumns;columnsSelectSignal=O(()=>this.columns.map(i=>({field:i,header:i.charAt(0).toUpperCase()+i.slice(1)})));colsOptionsSelect=this.allowedColumns.map(i=>({field:i,header:i.charAt(0).toUpperCase()+i.slice(1)}));selectedItemId=null;items=[{label:"View",icon:"pi pi-eye",routerLink:"/transactions/ventas/detail/214"},{label:"Download",icon:"pi pi-download",items:[{label:"Pdf",icon:"pi pi-file-pdf",style:{color:"crimson"},command:i=>{console.log(i),this.generatePdf()}}]}];expandedRows={};keylocalColumn="sales_cols";onColumnReorder=i=>localStorage.setItem(this.keylocalColumn,JSON.stringify(i.columns));getDataPaged(i){i.filters&&this.stateIni!==!1&&this.ventasdto.update(()=>({config:{populate_data:!1,page:(i.first||0)/Number(i.rows)+1,sort_field:i.multiSortMeta?i.multiSortMeta.filter(e=>e.field):[],rows:Number(i.rows)},filter:L({},this.filterservice.applyFilterNew(i.filters,this.ventasdto().filter))})),this.stateIni=!0}clear=i=>{this.ventasdto.set({config:{populate_data:!1,page:1,rows:15,sort_field:[]},filter:{}}),i.clear()};add=()=>this.router.navigate(["/transactions/ventas/create"]);generatePdf=()=>{let i=new _e,e=[{product:"Producto A",quantity:2,price:10,total:20},{product:"Producto B",quantity:1,price:15,total:15},{product:"Producto C",quantity:3,price:7,total:21}];this.pdfreport.generatePdf()};static \u0275fac=function(e){return new(e||t)(C(G),C(J),C(ce),C(ue),C(U),C(fe))};static \u0275cmp=k({type:t,selectors:[["app-sales"]],viewQuery:function(e,n){e&1&&(E(n.table,Ce,5),E(n.menu,Se,5),E(n.filter,ge,5)),e&2&&A(3)},decls:13,vars:25,consts:[["menu",""],["dt1",""],["header",""],["body",""],[3,"model","popup"],[3,"header","subheader"],["datakey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} items","styleClass","p-datatable-sm","responsiveLayout","scroll","scrollHeight","53vh",3,"onLazyLoad","value","paginator","loading","expandedRowKeys","rows","rowHover","rowsPerPageOptions","lazy","columns","reorderableColumns","totalRecords","sortMode","customSort","scrollable","paginatorPosition"],["pTemplate","caption"],[1,"flex","flex-wrap","justify-content-end"],["icon","pi pi-filter-slash",3,"click","label","outlined"],["icon","pi pi-plus","severity","primary",3,"click","outlined"],["rowspan","2"],[2,"min-width","12rem"],["pReorderableColumn","",2,"min-width","1rem",3,"pSortableColumn"],["pReorderableColumn","",3,"pSortableColumn"],[1,"flex","justify-content-between","align-items-left"],[3,"field"],["type","date",3,"field"],["type","number",3,"field"],["type","text",3,"field"],[1,"flex","py-4"],["type","button",1,"p-button-text","p-button-rounded",3,"click","icon","text"],[2,"width","12%","text-align","right"]],template:function(e,n){if(e&1){let f=B();_(0,"p-tieredmenu",4,0),o(2,"p-card",5),p(3,"translate"),p(4,"uppercase"),p(5,"translate"),o(6,"p-table",6,1),x("onLazyLoad",function($){return g(f),v(n.getDataPaged($))}),y(8,ve,4,5,"ng-template",7)(9,Me,8,1,"ng-template",null,2,M)(11,ze,5,2,"ng-template",null,3,M),r()()}e&2&&(s("model",n.items)("popup",!0),a(2),s("header",m(4,21,m(3,19,n.title)))("subheader",m(5,23,n.subtitle)),a(4),s("value",n.stateValues().data)("paginator",!0)("loading",n.stateValues().loading)("expandedRowKeys",n.expandedRows)("rows",n.stateValues().metadata.rows)("rowHover",!0)("rowsPerPageOptions",n.tablecon)("lazy",!0)("columns",n.columnsSelectSignal())("reorderableColumns",!0)("totalRecords",n.stateValues().metadata.total_records)("sortMode","multiple")("customSort",!0)("scrollable",!0)("paginatorPosition",n.stateValues().data&&n.stateValues().data.length>50?"both":"bottom"))},dependencies:[N,K,ee,Z,W,oe,te,ie,ae,ne,Y,X,me,se,q,pe,le,H,de],encapsulation:2})};export{R as default};
