import{a as me}from"./chunk-QU57CL5W.js";import{a as ce}from"./chunk-XQ45PO7U.js";import{a as te,b as ie,c as ne,d as ae,e as le,f as pe}from"./chunk-IRX7PXLM.js";import{c as W,d as X,e as Y,g as Z,k as ee}from"./chunk-E3QF5NRA.js";import"./chunk-MD3VDNIQ.js";import"./chunk-3B4LGE7N.js";import"./chunk-OHEWLBX4.js";import{s as oe,t as re}from"./chunk-TODYEVCJ.js";import"./chunk-YE3U7BHT.js";import"./chunk-4SYWTV55.js";import{Ba as q,Na as G,Oa as K,b as j,c as N,ca as H,e as Q,sa as J,ua as U}from"./chunk-AC5AOUNI.js";import{k as O}from"./chunk-TMRQNNBK.js";import"./chunk-F2X3VGZZ.js";import{Ab as T,Bb as c,Da as n,Eb as B,Ia as x,La as E,Lb as F,Mb as k,Nb as z,Ob as o,Pa as P,Pb as _,Qb as C,Va as b,a as I,ba as g,ca as S,dc as m,ec as s,fb as r,gc as R,lb as L,nb as $,ob as M,pa as v,pb as A,qb as a,rb as l,sb as d,sc as w,tc as D,wb as y}from"./chunk-RCKDCOFB.js";var se=["dt1"],de=["filter"],_e=(t,i)=>i.field;function ue(t,i){if(t&1){let e=y();a(0,"div",9)(1,"p-button",10),m(2,"translate"),T("click",function(){g(e);let f=c(),h=z(4);return S(f.clear(h))}),l()()}t&2&&(n(),r("label",s(2,2,"labels.clear"))("outlined",!0))}function fe(t,i){t&1&&(a(0,"th",13)(1,"div",18),o(2),m(3,"translate"),m(4,"uppercase"),d(5,"p-sortIcon",19),l()()),t&2&&(r("pSortableColumn","id"),n(2),C("",s(4,5,s(3,3,"labels.id"))," "),n(3),r("field","id"))}function he(t,i){if(t&1&&(a(0,"th",14)(1,"div",18),o(2),m(3,"translate"),m(4,"uppercase"),d(5,"p-sortIcon",19),l()()),t&2){let e=c().$implicit;B("pSortableColumn",e.field),n(2),C("",s(4,5,s(3,3,"labels.idLote"))," "),n(3),r("field",e.field)}}function Ce(t,i){if(t&1&&(a(0,"th",15)(1,"div",18),o(2),m(3,"translate"),m(4,"uppercase"),d(5,"p-sortIcon",19),l()()),t&2){let e=c().$implicit;B("pSortableColumn",e.field),n(2),C("",s(4,5,s(3,3,"labels.producto"))," "),n(3),r("field",e.field)}}function ge(t,i){if(t&1&&(a(0,"th",15)(1,"div",18),o(2),m(3,"translate"),m(4,"uppercase"),d(5,"p-sortIcon",19),l()()),t&2){let e=c().$implicit;B("pSortableColumn",e.field),n(2),C("",s(4,5,s(3,3,"labels.almacen"))," "),n(3),r("field",e.field)}}function Se(t,i){if(t&1&&(a(0,"th",16)(1,"div",18),o(2),m(3,"translate"),m(4,"uppercase"),d(5,"p-sortIcon",19),l()()),t&2){let e=c().$implicit;r("pSortableColumn",e.field),n(2),C("",s(4,5,s(3,3,"labels.cantreserv"))," "),n(3),r("field",e.field)}}function xe(t,i){if(t&1&&(a(0,"th",16)(1,"div",18),o(2),m(3,"translate"),m(4,"uppercase"),d(5,"p-sortIcon",19),l()()),t&2){let e=c().$implicit;r("pSortableColumn",e.field),n(2),C("",s(4,5,s(3,3,"labels.cantidadDespachada"))," "),n(3),r("field",e.field)}}function ve(t,i){if(t&1&&(a(0,"th",17)(1,"div",18),o(2),m(3,"uppercase"),d(4,"p-sortIcon",19),l()()),t&2){let e=c().$implicit;r("pSortableColumn",e.field),n(2),C("",s(3,3,e.field)," "),n(2),r("field",e.field)}}function be(t,i){if(t&1&&b(0,fe,6,7,"th",13)(1,he,6,7,"th",14)(2,Ce,6,7,"th",15)(3,ge,6,7,"th",15)(4,Se,6,7,"th",16)(5,xe,6,7,"th",16)(6,ve,5,5,"th",17),t&2){let e,p=i.$implicit;L((e=p.field)==="id"?0:e==="idLote"?1:e==="producto"?2:e==="almacen"?3:e==="cantidadReservada"?4:e==="cantidadDespachada"?5:6)}}function ye(t,i){if(t&1&&d(0,"appcommon-filter-input",20),t&2){let e=c().$implicit;r("field",e.field)}}function Te(t,i){if(t&1&&d(0,"appcommon-filter-input",21),t&2){let e=c().$implicit;r("field",e.field)}}function Be(t,i){if(t&1&&d(0,"appcommon-filter-input",20),t&2){let e=c().$implicit;r("field",e.field)}}function we(t,i){if(t&1&&d(0,"appcommon-filter-input",20),t&2){let e=c().$implicit;r("field",e.field)}}function Ie(t,i){if(t&1&&d(0,"appcommon-filter-input",20),t&2){let e=c().$implicit;r("field",e.field)}}function Ee(t,i){if(t&1&&d(0,"appcommon-filter-input",21),t&2){let e=c().$implicit;r("field",e.field)}}function Le(t,i){if(t&1&&(a(0,"th"),b(1,ye,1,1,"appcommon-filter-input",20)(2,Te,1,1,"appcommon-filter-input",21)(3,Be,1,1,"appcommon-filter-input",20)(4,we,1,1,"appcommon-filter-input",20)(5,Ie,1,1,"appcommon-filter-input",20)(6,Ee,1,1,"appcommon-filter-input",21),l()),t&2){let e,p=i.$implicit;n(),L((e=p.field)==="idLote"?1:e==="nombreProducto"?2:e==="cantidadStock"?3:e==="cantidadDespachada"?4:e==="cantidadReservada"?5:6)}}function Me(t,i){t&1&&(a(0,"th",12),o(1,"cargando"),l())}function Ae(t,i){if(t&1&&(a(0,"tr"),d(1,"th",11),M(2,be,7,1,null,null,_e),l(),a(4,"tr"),M(5,Le,7,1,"th",null,$,!1,Me,2,0,"th",12),l()),t&2){let e=i.$implicit;n(2),A(e),n(3),A(e)}}function Fe(t,i){if(t&1&&(a(0,"tr"),d(1,"td"),a(2,"td"),o(3),l(),a(4,"td"),o(5),l(),a(6,"td"),o(7),l(),a(8,"td"),o(9),l(),a(10,"td"),o(11),l(),a(12,"td"),o(13),l(),a(14,"td"),o(15),l(),a(16,"td"),o(17),l(),a(18,"td",22),o(19),l(),a(20,"td",22),o(21),l(),a(22,"td"),o(23),l(),a(24,"td",22),o(25),l()()),t&2){let e=i.$implicit;n(3),_(e.id),n(2),_(e.idLote),n(2),_(e.nombreProducto),n(2),_(e.almacen==null?null:e.almacen.nombre),n(2),_(e.cantidadStock),n(2),_(e.cantidadDespachada),n(2),_(e.cantidadReservada),n(2),_(e.cant_transferencias),n(2),_(e.precio_compra),n(2),_(e.precio_venta),n(2),_(e.sucursal),n(2),_(e.stock)}}function Re(t,i){if(t&1){let e=y();a(0,"div",23)(1,"p-multiSelect",24),T("onChange",function(f){g(e);let h=c();return S(h.cargaColumnas(f))})("onSelectAllChange",function(f){g(e);let h=c();return S(h.selectAll(f))}),l()()}if(t&2){let e=c();n(),r("options",e.colsOptionsSelect)("ngModel",e.columnsSelectSignal())}}function Ve(t,i){t&1&&(a(0,"tr")(1,"td",25),o(2,"No order found."),l()())}function Pe(t,i){t&1&&(a(0,"tr")(1,"td",25),o(2,"Loading orders data. Please wait."),l()())}var V=class t{constructor(i,e,p,f,h){this.branches=i;this.filterservice=e;this.translate=p;this.translateLanService=f;this.arrayurilservice=h;this.translateLanService.changeLanguage$.subscribe(u=>this.translate.use(u)),D(()=>{this.branches.getAllAlmacenes(this.branchesdto()).subscribe({next:u=>{console.log(u),console.log(I({},this.branchesdto())),console.log(this.stateValues())},error:u=>{this.stateValues.set({data:[],metadata:{page:0,rows:0,total_records:0},loading:!1,error:u}),console.log("console.log('', err):   ",u,this.stateValues())},complete:()=>{console.log("console.log('', this.stateValues()):   ",this.stateValues())}})})}table=E("dt1");filter=E("filter");stateValues=v({data:[],metadata:{page:0,rows:0,total_records:0},loading:!0,error:null});searchTxt=v([]);branchesdto=v({config:{populate_data:!0,page:1,rows:15,sort_field:[]},filter:{}});tablecon=te.cantidadRegistros;stateIni=!1;keylocalColumn="branchs_cols";allowedColumns=["id","nombre","direccion","matriz","pacacidad"];columns=this.allowedColumns;columnsSelectSignal=w(()=>this.columns.map(i=>({field:i,header:i.charAt(0).toUpperCase()+i.slice(1)})));colsOptionsSelect=this.allowedColumns.map(i=>({field:i,header:i.charAt(0).toUpperCase()+i.slice(1)}));clear=i=>{i.clear()};onColumnReorder=i=>localStorage.setItem(this.keylocalColumn,JSON.stringify(i.columns));getDataPaged(i){i.filters&&this.stateIni!==!1&&this.branchesdto.update(()=>({config:{populate_data:!1,page:(i.first||0)/Number(i.rows)+1,sort_field:i.multiSortMeta?i.multiSortMeta.filter(e=>e.field):[],rows:Number(i.rows)},filter:I({},this.filterservice.applyFilterNew(i.filters,this.branchesdto().filter))})),this.stateIni=!0}cargaColumnas(i){let e=this.arrayurilservice.selectOrderedArray(this.colsOptionsSelect,i.value);this.columnsSelectSignal=w(()=>e),localStorage.setItem(this.keylocalColumn,JSON.stringify(this.columnsSelectSignal()))}selectAll(i){let e=[];i.checked&&(e=this.allowedColumns),this.columnsSelectSignal=w(()=>e),localStorage.setItem(this.keylocalColumn,JSON.stringify(e))}static \u0275fac=function(e){return new(e||t)(x(me),x(pe),x(j),x(Q),x(ce))};static \u0275cmp=P({type:t,selectors:[["app-branches"]],viewQuery:function(e,p){e&1&&(F(p.table,se,5),F(p.filter,de,5)),e&2&&k(2)},decls:13,vars:20,consts:[["dt1",""],["paginatorleft",""],["emptymessage",""],[3,"header"],["datakey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} items","styleClass","p-datatable-sm p-datatable-gridlines p-0 m-0","responsiveLayout","scroll","scrollHeight","70vh",3,"onColReorder","onLazyLoad","value","paginator","rows","loading","rowHover","rowsPerPageOptions","lazy","columns","reorderableColumns","totalRecords","sortMode","customSort","scrollable","paginatorPosition","showCurrentPageReport"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","loadingbody"],[1,"flex","flex-wrap","justify-content-end","gap-2"],["icon","pi pi-filter-slash",3,"click","label","outlined"],["rowspan","2"],[2,"min-width","8rem"],["pReorderableColumn","",2,"min-width","1rem",3,"pSortableColumn"],["pReorderableColumn","",2,"min-width","8rem",3,"pSortableColumn"],["pReorderableColumn","",2,"min-width","20rem",3,"pSortableColumn"],["pReorderableColumn","",2,"min-width","10rem",3,"pSortableColumn"],["pReorderableColumn","",3,"pSortableColumn"],[1,"flex","justify-content-between","align-items-left"],[3,"field"],["type","number",3,"field"],["type","text",3,"field"],[1,"text-right"],[1,"flex","align-items-center","justify-content-center"],["inputId","float-label","optionLabel","header","selectedItemsLabel","{0} columns selected","size","small","placeholder","Choose Columns",1,"p-input-icon-left",3,"onChange","onSelectAllChange","options","ngModel"],["colspan","8"]],template:function(e,p){if(e&1){let f=y();a(0,"p-card",3),m(1,"translate"),m(2,"uppercase"),a(3,"p-table",4,0),T("onColReorder",function(u){return g(f),S(p.onColumnReorder(u))})("onLazyLoad",function(u){return g(f),S(p.getDataPaged(u))}),b(5,ue,3,4,"ng-template",5)(6,Ae,8,1,"ng-template",6)(7,Fe,26,12,"ng-template",7)(8,Re,2,2,"ng-template",null,1,R)(10,Ve,3,0,"ng-template",null,2,R)(12,Pe,3,0,"ng-template",8),l()()}e&2&&(r("header",s(2,18,s(1,16,"pages.branches"))),n(3),r("value",p.stateValues().data)("paginator",!0)("rows",p.stateValues().metadata.rows)("loading",p.stateValues().loading)("rowHover",!0)("rowsPerPageOptions",p.tablecon)("lazy",!0)("columns",p.columnsSelectSignal())("reorderableColumns",!0)("totalRecords",p.stateValues().metadata.total_records)("sortMode","multiple")("customSort",!0)("scrollable",!0)("paginatorPosition","bottom")("showCurrentPageReport",!0))},dependencies:[re,oe,H,ee,W,X,Z,Y,K,G,N,O,le,ae,ne,ie,q,J,U],encapsulation:2})};export{V as default};
