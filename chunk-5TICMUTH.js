import{a as W}from"./chunk-MLR4ATCB.js";import{a as N,b as G}from"./chunk-3WV3ZJ7R.js";import{b as U,j as H}from"./chunk-XUHDHR7E.js";import"./chunk-OGQHURAE.js";import{a as J}from"./chunk-NHECFUMR.js";import"./chunk-5XVCGBHY.js";import{o as q,p as K,q as $}from"./chunk-DXZH3M7L.js";import"./chunk-XMSLJEE3.js";import{Ha as x,Ia as D,Ja as F,Oa as j,Pa as z,Qa as Q,Z as A}from"./chunk-L6F5SHP5.js";import{k as E,w as O}from"./chunk-A5I2MG6G.js";import"./chunk-F2X3VGZZ.js";import{$a as u,Ab as y,Bb as h,Ca as _,Cb as S,Fb as P,Ha as s,Na as L,Ta as R,Xb as w,Yb as T,a as C,aa as p,ba as c,jc as k,kb as l,kc as B,lb as m,mb as I,oa as g,q as M,qb as v,ub as d,vb as b}from"./chunk-4PTIY3UM.js";var X=["dt1"],Y=["filter"];function Z(a,e){if(a&1){let i=v();l(0,"tr")(1,"th",8)(2,"p-button",9),d("click",function(o){p(i);let n=b();return c(n.toggleMenu(o))}),m()()()}a&2&&(_(2),u("rounded",!1)("text",!0))}function ee(a,e){if(a&1){let i=v();l(0,"tr")(1,"td")(2,"p-button",9),d("click",function(o){p(i);let n=b();return c(n.toggleMenu(o))}),m()()()}a&2&&(_(2),u("rounded",!1)("text",!0))}var V=class a{constructor(e,i,t,o,n,f){this.usersServ=e;this.clientServ=i;this.filterservice=t;this.translate=o;this.translateLanService=n;this.router=f;this.translateLanService.changeLanguage$.subscribe(r=>this.translate.use(r)),B(()=>{this.clientServ.postClients(this.employeedto()).pipe(M(r=>(console.log("console.log('', t):   ",r),{data:Array.isArray(r)?[...r]:[],page:0,rows:0,total_records:0,loaded:!0,loading:!1,error:null}))).subscribe({next:r=>{console.log(C({},this.employeedto())),console.log(r),this.stateValues.set({data:r.data&&r.data.length>0?[...r.data]:[],page:0,rows:0,total_records:0,loaded:!0,loading:!1,error:null})},error:r=>this.stateValues.set({data:[],page:0,rows:0,total_records:0,loaded:!1,loading:!0,error:r})})}),this.usersServ.getExpedidoOptions().subscribe(r=>this.expedidoOptions=r)}table;filter;stateValues=g({data:[],page:0,rows:0,total_records:0,loaded:!1,loading:!0,error:null});searchTxt=g([]);employeedto=g({config:{populate_data:!0,page:1,rows:15,sort_field:[]},filter:{}});tablecon=N.cantidadRegistros;stateIni=!1;allowedColumns=["id","ci","nombre","app","apm","sexo","fnaci","idtipo"];columns=this.allowedColumns;columnsSelectSignal=k(()=>this.columns.map(e=>({field:e,header:e.charAt(0).toUpperCase()+e.slice(1)})));clients=[];expedidoOptions;ngOnInit(){this.clientServ.getAllClients().subscribe(e=>{this.clients=e})}clear=e=>{this.employeedto.set({config:{populate_data:!1,page:1,rows:15,sort_field:[]},filter:{}}),e.clear()};toggleMenu=e=>{console.log(e)};getDataPaged(e){e.filters&&this.stateIni!==!1&&this.employeedto.update(()=>({config:{populate_data:!1,page:(e.first||0)/Number(e.rows)+1,sort_field:e.multiSortMeta?e.multiSortMeta.filter(i=>i.field):[],rows:Number(e.rows)},filter:C({},this.filterservice.applyFilterNew(e.filters,this.employeedto().filter))})),this.stateIni=!0}add=()=>this.router.navigate(["/users/clientes/create"]);static \u0275fac=function(i){return new(i||a)(s(J),s(W),s(G),s(j),s(q),s(O))};static \u0275cmp=L({type:a,selectors:[["app-clientes"]],viewQuery:function(i,t){if(i&1&&(y(X,5),y(Y,5)),i&2){let o;h(o=S())&&(t.table=o.first),h(o=S())&&(t.filter=o.first)}},decls:12,vars:19,consts:[["dt1",""],[3,"header"],[1,"flex","justify-content-between"],["pButton","","label","Clear","icon","pi pi-filter-slash",1,"p-button-outlined","mr-1",3,"click"],["pButton","","label","Add","icon","pi pi-plus",1,"p-button-outlined","mr-1",3,"click"],["dataKey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} employees","styleClass","p-datatable-sm","responsiveLayout","scroll","scrollHeight","60vh",3,"onLazyLoad","value","paginator","loading","rows","rowHover","rowsPerPageOptions","lazy","columns","reorderableColumns","totalRecords","sortMode","customSort","scrollable","paginatorPosition"],["pTemplate","header"],["pTemplate","body"],["rowspan","2"],["icon","pi pi-ellipsis-v","severity","secondary",3,"click","rounded","text"]],template:function(i,t){if(i&1){let o=v();l(0,"p-card",1),w(1,"translate"),w(2,"uppercase"),l(3,"div",2),I(4,"div"),l(5,"div")(6,"button",3),d("click",function(){p(o);let f=P(9);return c(t.clear(f))}),m(),l(7,"button",4),d("click",function(){return p(o),c(t.add())}),m()()(),l(8,"p-table",5,0),d("onLazyLoad",function(f){return p(o),c(t.getDataPaged(f))}),R(10,Z,3,2,"ng-template",6)(11,ee,3,2,"ng-template",7),m()()}i&2&&(u("header",T(2,17,T(1,15,"pages.clients"))),_(8),u("value",t.stateValues().data)("paginator",!0)("loading",t.stateValues().loading)("rows",t.stateValues().data.length)("rowHover",!0)("rowsPerPageOptions",t.tablecon)("lazy",!0)("columns",t.columnsSelectSignal())("reorderableColumns",!0)("totalRecords",t.stateValues().total_records)("sortMode","multiple")("customSort",!0)("scrollable",!0)("paginatorPosition",t.stateValues().data&&t.stateValues().data.length>50?"both":"bottom"))},dependencies:[$,K,A,Q,z,F,x,D,E,H,U],encapsulation:2})};export{V as default};
